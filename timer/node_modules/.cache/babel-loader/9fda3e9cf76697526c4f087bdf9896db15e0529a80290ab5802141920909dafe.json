{"ast":null,"code":"import \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nimport imageAnalysisService from '../../AIsiri/services/imageAnalysisService.js';\nimport { log } from '../../AIsiri/utils/logger.js';\nexport default {\n  name: 'ImageAnalysisModal',\n  emits: ['close', 'analysisComplete', 'showToast'],\n  props: {\n    visible: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data() {\n    return {\n      activeTab: 'upload',\n      selectedFile: null,\n      previewUrl: '',\n      imageUrl: '',\n      customPrompt: '',\n      isDragOver: false,\n      isUploading: false,\n      analysisResult: null,\n      errorMessage: ''\n    };\n  },\n  methods: {\n    /**\n     * å…³é—­æ¨¡æ€æ¡†\n     */\n    closeModal() {\n      this.$emit('close');\n      this.resetForm();\n    },\n    /**\n     * é‡ç½®è¡¨å•\n     */\n    resetForm() {\n      this.selectedFile = null;\n      this.previewUrl = '';\n      this.imageUrl = '';\n      this.customPrompt = '';\n      this.isDragOver = false;\n      this.isUploading = false;\n      this.analysisResult = null;\n      this.errorMessage = '';\n      this.activeTab = 'upload';\n    },\n    /**\n     * è§¦å‘æ–‡ä»¶é€‰æ‹©\n     */\n    triggerFileSelect() {\n      if (!this.selectedFile && !this.isUploading) {\n        this.$refs.fileInput.click();\n      }\n    },\n    /**\n     * å¤„ç†æ–‡ä»¶é€‰æ‹©\n     */\n    handleFileSelect(event) {\n      const file = event.target.files[0];\n      if (file) {\n        this.selectFile(file);\n      }\n    },\n    /**\n     * å¤„ç†æ‹–æ‹½æ”¾ç½®\n     */\n    handleDrop(event) {\n      event.preventDefault();\n      this.isDragOver = false;\n      const files = event.dataTransfer.files;\n      if (files.length > 0) {\n        this.selectFile(files[0]);\n      }\n    },\n    /**\n     * é€‰æ‹©æ–‡ä»¶\n     */\n    selectFile(file) {\n      // éªŒè¯æ–‡ä»¶\n      const validation = imageAnalysisService.validateImageFile(file);\n      if (!validation.isValid) {\n        this.showError(validation.errors.join(', '));\n        return;\n      }\n      this.selectedFile = file;\n      this.previewUrl = URL.createObjectURL(file);\n      this.errorMessage = '';\n      this.analysisResult = null;\n    },\n    /**\n     * ç§»é™¤å›¾ç‰‡\n     */\n    removeImage() {\n      if (this.previewUrl) {\n        URL.revokeObjectURL(this.previewUrl);\n      }\n      this.selectedFile = null;\n      this.previewUrl = '';\n      this.analysisResult = null;\n    },\n    /**\n     * åˆ†æä¸Šä¼ çš„å›¾ç‰‡\n     */\n    async analyzeImage() {\n      if (!this.selectedFile) return;\n      try {\n        this.isUploading = true;\n        this.errorMessage = '';\n        this.analysisResult = null;\n        log.info('å¼€å§‹åˆ†æä¸Šä¼ çš„å›¾ç‰‡', {\n          fileName: this.selectedFile.name,\n          customPrompt: this.customPrompt\n        });\n        const result = await imageAnalysisService.uploadAndAnalyze(this.selectedFile, this.customPrompt);\n        this.analysisResult = result;\n        this.showSuccess('å›¾ç‰‡åˆ†æå®Œæˆï¼');\n\n        // å‘é€åˆ†æç»“æœåˆ°çˆ¶ç»„ä»¶\n        this.$emit('analysisComplete', result);\n      } catch (error) {\n        log.error('å›¾ç‰‡åˆ†æå¤±è´¥', error);\n        this.showError(error.message || 'å›¾ç‰‡åˆ†æå¤±è´¥');\n      } finally {\n        this.isUploading = false;\n      }\n    },\n    /**\n     * åˆ†æç½‘ç»œå›¾ç‰‡\n     */\n    async analyzeImageUrl() {\n      if (!this.imageUrl.trim()) return;\n      try {\n        this.isUploading = true;\n        this.errorMessage = '';\n        this.analysisResult = null;\n        log.info('å¼€å§‹åˆ†æç½‘ç»œå›¾ç‰‡', {\n          imageUrl: this.imageUrl,\n          customPrompt: this.customPrompt\n        });\n        const result = await imageAnalysisService.analyzeImageUrl(this.imageUrl, this.customPrompt);\n        this.analysisResult = result;\n        this.showSuccess('å›¾ç‰‡åˆ†æå®Œæˆï¼');\n\n        // å‘é€åˆ†æç»“æœåˆ°çˆ¶ç»„ä»¶\n        this.$emit('analysisComplete', result);\n      } catch (error) {\n        log.error('ç½‘ç»œå›¾ç‰‡åˆ†æå¤±è´¥', error);\n        this.showError(error.message || 'å›¾ç‰‡åˆ†æå¤±è´¥');\n      } finally {\n        this.isUploading = false;\n      }\n    },\n    /**\n     * æ ¼å¼åŒ–æ–‡ä»¶å¤§å°\n     */\n    formatFileSize(bytes) {\n      return imageAnalysisService.formatFileSize(bytes);\n    },\n    /**\n     * æ˜¾ç¤ºæˆåŠŸæç¤º\n     */\n    showSuccess(message) {\n      this.$emit('showToast', message, 'success');\n    },\n    /**\n     * æ˜¾ç¤ºé”™è¯¯æç¤º\n     */\n    showError(message) {\n      this.errorMessage = message;\n    }\n  },\n  beforeUnmount() {\n    // æ¸…ç†é¢„è§ˆURL\n    if (this.previewUrl) {\n      URL.revokeObjectURL(this.previewUrl);\n    }\n  }\n};","map":{"version":3,"names":["imageAnalysisService","log","name","emits","props","visible","type","Boolean","default","data","activeTab","selectedFile","previewUrl","imageUrl","customPrompt","isDragOver","isUploading","analysisResult","errorMessage","methods","closeModal","$emit","resetForm","triggerFileSelect","$refs","fileInput","click","handleFileSelect","event","file","target","files","selectFile","handleDrop","preventDefault","dataTransfer","length","validation","validateImageFile","isValid","showError","errors","join","URL","createObjectURL","removeImage","revokeObjectURL","analyzeImage","info","fileName","result","uploadAndAnalyze","showSuccess","error","message","analyzeImageUrl","trim","formatFileSize","bytes","beforeUnmount"],"sources":["C:\\Users\\wuby\\OneDrive\\Desktop\\backend(1) 3\\timer\\src\\components\\AIsecretary\\ImageAnalysisModal.vue"],"sourcesContent":["<template>\n  <Teleport to=\"body\">\n    <div v-if=\"visible\" class=\"image-analysis-modal\" @click.self=\"closeModal\">\n      <div class=\"modal-content\">\n      <!-- æ¨¡æ€æ¡†å¤´éƒ¨ -->\n      <div class=\"modal-header\">\n        <h3>ğŸ–¼ï¸ å›¾ç‰‡åˆ†æ</h3>\n        <button class=\"close-btn\" @click=\"closeModal\">\n          <font-awesome-icon icon=\"times\" />\n        </button>\n      </div>\n\n      <!-- æ¨¡æ€æ¡†å†…å®¹ -->\n      <div class=\"modal-body\">\n        <!-- æ ‡ç­¾é¡µåˆ‡æ¢ -->\n        <div class=\"tab-container\">\n          <button \n            class=\"tab-btn\" \n            :class=\"{ active: activeTab === 'upload' }\"\n            @click=\"activeTab = 'upload'\"\n          >\n            ğŸ“ ä¸Šä¼ å›¾ç‰‡\n          </button>\n          <button \n            class=\"tab-btn\" \n            :class=\"{ active: activeTab === 'url' }\"\n            @click=\"activeTab = 'url'\"\n          >\n            ğŸ”— ç½‘ç»œå›¾ç‰‡\n          </button>\n        </div>\n\n        <!-- ä¸Šä¼ å›¾ç‰‡æ ‡ç­¾é¡µ -->\n        <div v-if=\"activeTab === 'upload'\" class=\"tab-content\">\n          <!-- æ‹–æ‹½ä¸Šä¼ åŒºåŸŸ -->\n          <div \n            class=\"upload-area\"\n            :class=\"{ \n              'dragover': isDragOver, \n              'has-image': selectedFile,\n              'uploading': isUploading \n            }\"\n            @drop=\"handleDrop\"\n            @dragover.prevent=\"isDragOver = true\"\n            @dragleave.prevent=\"isDragOver = false\"\n            @click=\"triggerFileSelect\"\n          >\n            <div v-if=\"!selectedFile\" class=\"upload-placeholder\">\n              <font-awesome-icon icon=\"cloud-upload-alt\" class=\"upload-icon\" />\n              <p class=\"upload-text\">æ‹–æ‹½å›¾ç‰‡åˆ°æ­¤å¤„æˆ–ç‚¹å‡»é€‰æ‹©</p>\n              <p class=\"upload-hint\">æ”¯æŒ JPEGã€PNGã€GIFã€WebPã€BMP æ ¼å¼ï¼Œæœ€å¤§ 10MB</p>\n            </div>\n            \n            <div v-else class=\"image-preview\">\n              <img :src=\"previewUrl\" :alt=\"selectedFile.name\" class=\"preview-image\" />\n              <div class=\"image-info\">\n                <p class=\"image-name\">{{ selectedFile.name }}</p>\n                <p class=\"image-size\">{{ formatFileSize(selectedFile.size) }}</p>\n              </div>\n              <button class=\"remove-image\" @click.stop=\"removeImage\">\n                <font-awesome-icon icon=\"times\" />\n              </button>\n            </div>\n\n            <div v-if=\"isUploading\" class=\"upload-progress\">\n              <font-awesome-icon icon=\"spinner\" spin />\n              <span>æ­£åœ¨åˆ†æå›¾ç‰‡...</span>\n            </div>\n          </div>\n\n          <!-- éšè—çš„æ–‡ä»¶è¾“å…¥ -->\n          <input \n            ref=\"fileInput\"\n            type=\"file\" \n            accept=\"image/*\"\n            style=\"display: none\"\n            @change=\"handleFileSelect\"\n          >\n        </div>\n\n        <!-- ç½‘ç»œå›¾ç‰‡æ ‡ç­¾é¡µ -->\n        <div v-if=\"activeTab === 'url'\" class=\"tab-content\">\n          <div class=\"url-input-container\">\n            <input \n              v-model=\"imageUrl\"\n              type=\"url\" \n              placeholder=\"è¯·è¾“å…¥å›¾ç‰‡URLåœ°å€...\"\n              class=\"url-input\"\n              :disabled=\"isUploading\"\n            />\n            <button \n              class=\"analyze-url-btn\"\n              @click=\"analyzeImageUrl\"\n              :disabled=\"!imageUrl.trim() || isUploading\"\n            >\n              <font-awesome-icon icon=\"search\" />\n              åˆ†æ\n            </button>\n          </div>\n        </div>\n\n        <!-- è‡ªå®šä¹‰æç¤ºè¯ -->\n        <div class=\"prompt-section\">\n          <label class=\"prompt-label\">\n            <font-awesome-icon icon=\"comment\" />\n            è‡ªå®šä¹‰åˆ†ææç¤ºè¯ï¼ˆå¯é€‰ï¼‰\n          </label>\n          <textarea \n            v-model=\"customPrompt\"\n            placeholder=\"ä¾‹å¦‚ï¼šè¯·è¯¦ç»†æè¿°è¿™å¼ å›¾ç‰‡çš„å†…å®¹ï¼ŒåŒ…æ‹¬åœºæ™¯ã€å¯¹è±¡ã€é¢œè‰²ç­‰...\"\n            class=\"prompt-input\"\n            rows=\"3\"\n            :disabled=\"isUploading\"\n          ></textarea>\n        </div>\n\n        <!-- åˆ†æç»“æœ -->\n        <div v-if=\"analysisResult\" class=\"analysis-result\">\n          <h4>ğŸ“Š åˆ†æç»“æœ</h4>\n          <div class=\"result-content\">\n            <p class=\"result-text\">{{ analysisResult.analysis.content }}</p>\n            <div class=\"result-meta\">\n              <span class=\"token-info\">\n                <font-awesome-icon icon=\"info-circle\" />\n                æ¶ˆè€— Token: {{ analysisResult.analysis.usage.total_tokens }}\n              </span>\n            </div>\n          </div>\n        </div>\n\n        <!-- é”™è¯¯æç¤º -->\n        <div v-if=\"errorMessage\" class=\"error-message\">\n          <font-awesome-icon icon=\"exclamation-triangle\" />\n          {{ errorMessage }}\n        </div>\n      </div>\n\n      <!-- æ¨¡æ€æ¡†åº•éƒ¨ -->\n      <div class=\"modal-footer\">\n        <button class=\"btn btn-secondary\" @click=\"closeModal\">\n          å–æ¶ˆ\n        </button>\n        <button \n          v-if=\"activeTab === 'upload' && selectedFile\"\n          class=\"btn btn-primary\"\n          @click=\"analyzeImage\"\n          :disabled=\"isUploading\"\n        >\n          <font-awesome-icon v-if=\"isUploading\" icon=\"spinner\" spin />\n          <span v-else>å¼€å§‹åˆ†æ</span>\n        </button>\n      </div>\n    </div>\n  </div>\n</Teleport>\n</template>\n\n<script>\nimport imageAnalysisService from '../../AIsiri/services/imageAnalysisService.js'\nimport { log } from '../../AIsiri/utils/logger.js'\n\nexport default {\n  name: 'ImageAnalysisModal',\n  emits: ['close', 'analysisComplete', 'showToast'],\n  props: {\n    visible: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data() {\n    return {\n      activeTab: 'upload',\n      selectedFile: null,\n      previewUrl: '',\n      imageUrl: '',\n      customPrompt: '',\n      isDragOver: false,\n      isUploading: false,\n      analysisResult: null,\n      errorMessage: ''\n    }\n  },\n  methods: {\n    /**\n     * å…³é—­æ¨¡æ€æ¡†\n     */\n    closeModal() {\n      this.$emit('close')\n      this.resetForm()\n    },\n\n    /**\n     * é‡ç½®è¡¨å•\n     */\n    resetForm() {\n      this.selectedFile = null\n      this.previewUrl = ''\n      this.imageUrl = ''\n      this.customPrompt = ''\n      this.isDragOver = false\n      this.isUploading = false\n      this.analysisResult = null\n      this.errorMessage = ''\n      this.activeTab = 'upload'\n    },\n\n    /**\n     * è§¦å‘æ–‡ä»¶é€‰æ‹©\n     */\n    triggerFileSelect() {\n      if (!this.selectedFile && !this.isUploading) {\n        this.$refs.fileInput.click()\n      }\n    },\n\n    /**\n     * å¤„ç†æ–‡ä»¶é€‰æ‹©\n     */\n    handleFileSelect(event) {\n      const file = event.target.files[0]\n      if (file) {\n        this.selectFile(file)\n      }\n    },\n\n    /**\n     * å¤„ç†æ‹–æ‹½æ”¾ç½®\n     */\n    handleDrop(event) {\n      event.preventDefault()\n      this.isDragOver = false\n      \n      const files = event.dataTransfer.files\n      if (files.length > 0) {\n        this.selectFile(files[0])\n      }\n    },\n\n    /**\n     * é€‰æ‹©æ–‡ä»¶\n     */\n    selectFile(file) {\n      // éªŒè¯æ–‡ä»¶\n      const validation = imageAnalysisService.validateImageFile(file)\n      if (!validation.isValid) {\n        this.showError(validation.errors.join(', '))\n        return\n      }\n\n      this.selectedFile = file\n      this.previewUrl = URL.createObjectURL(file)\n      this.errorMessage = ''\n      this.analysisResult = null\n    },\n\n    /**\n     * ç§»é™¤å›¾ç‰‡\n     */\n    removeImage() {\n      if (this.previewUrl) {\n        URL.revokeObjectURL(this.previewUrl)\n      }\n      this.selectedFile = null\n      this.previewUrl = ''\n      this.analysisResult = null\n    },\n\n    /**\n     * åˆ†æä¸Šä¼ çš„å›¾ç‰‡\n     */\n    async analyzeImage() {\n      if (!this.selectedFile) return\n\n      try {\n        this.isUploading = true\n        this.errorMessage = ''\n        this.analysisResult = null\n\n        log.info('å¼€å§‹åˆ†æä¸Šä¼ çš„å›¾ç‰‡', { \n          fileName: this.selectedFile.name,\n          customPrompt: this.customPrompt \n        })\n\n        const result = await imageAnalysisService.uploadAndAnalyze(\n          this.selectedFile, \n          this.customPrompt\n        )\n\n        this.analysisResult = result\n        this.showSuccess('å›¾ç‰‡åˆ†æå®Œæˆï¼')\n        \n        // å‘é€åˆ†æç»“æœåˆ°çˆ¶ç»„ä»¶\n        this.$emit('analysisComplete', result)\n      } catch (error) {\n        log.error('å›¾ç‰‡åˆ†æå¤±è´¥', error)\n        this.showError(error.message || 'å›¾ç‰‡åˆ†æå¤±è´¥')\n      } finally {\n        this.isUploading = false\n      }\n    },\n\n    /**\n     * åˆ†æç½‘ç»œå›¾ç‰‡\n     */\n    async analyzeImageUrl() {\n      if (!this.imageUrl.trim()) return\n\n      try {\n        this.isUploading = true\n        this.errorMessage = ''\n        this.analysisResult = null\n\n        log.info('å¼€å§‹åˆ†æç½‘ç»œå›¾ç‰‡', { \n          imageUrl: this.imageUrl,\n          customPrompt: this.customPrompt \n        })\n\n        const result = await imageAnalysisService.analyzeImageUrl(\n          this.imageUrl, \n          this.customPrompt\n        )\n\n        this.analysisResult = result\n        this.showSuccess('å›¾ç‰‡åˆ†æå®Œæˆï¼')\n        \n        // å‘é€åˆ†æç»“æœåˆ°çˆ¶ç»„ä»¶\n        this.$emit('analysisComplete', result)\n      } catch (error) {\n        log.error('ç½‘ç»œå›¾ç‰‡åˆ†æå¤±è´¥', error)\n        this.showError(error.message || 'å›¾ç‰‡åˆ†æå¤±è´¥')\n      } finally {\n        this.isUploading = false\n      }\n    },\n\n    /**\n     * æ ¼å¼åŒ–æ–‡ä»¶å¤§å°\n     */\n    formatFileSize(bytes) {\n      return imageAnalysisService.formatFileSize(bytes)\n    },\n\n    /**\n     * æ˜¾ç¤ºæˆåŠŸæç¤º\n     */\n    showSuccess(message) {\n      this.$emit('showToast', message, 'success')\n    },\n\n    /**\n     * æ˜¾ç¤ºé”™è¯¯æç¤º\n     */\n    showError(message) {\n      this.errorMessage = message\n    }\n  },\n\n  beforeUnmount() {\n    // æ¸…ç†é¢„è§ˆURL\n    if (this.previewUrl) {\n      URL.revokeObjectURL(this.previewUrl)\n    }\n  }\n}\n</script>\n\n<style scoped>\n.image-analysis-modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  z-index: 9999;\n  /* ä½¿ç”¨flexboxç¡®ä¿å¼¹çª—åœ¨å±å¹•æ­£ä¸­å¤® */\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 20px;\n  box-sizing: border-box;\n}\n\n.modal-content {\n  background: white;\n  border-radius: 16px;\n  width: 100%;\n  max-width: 500px;\n  max-height: 90vh;\n  overflow: hidden;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\n  position: relative;\n}\n\n.modal-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 20px 24px;\n  border-bottom: 1px solid #e5e5ea;\n}\n\n.modal-header h3 {\n  margin: 0;\n  font-size: 18px;\n  font-weight: 600;\n  color: #1d1d1f;\n}\n\n.close-btn {\n  background: none;\n  border: none;\n  font-size: 18px;\n  color: #8e8e93;\n  cursor: pointer;\n  padding: 8px;\n  border-radius: 8px;\n  transition: all 0.2s;\n}\n\n.close-btn:hover {\n  background: #f2f2f7;\n  color: #1d1d1f;\n}\n\n.modal-body {\n  padding: 24px;\n  max-height: 60vh;\n  overflow-y: auto;\n}\n\n/* æ ‡ç­¾é¡µæ ·å¼ */\n.tab-container {\n  display: flex;\n  gap: 8px;\n  margin-bottom: 20px;\n  border-bottom: 1px solid #e5e5ea;\n}\n\n.tab-btn {\n  background: none;\n  border: none;\n  padding: 12px 16px;\n  font-size: 14px;\n  color: #8e8e93;\n  cursor: pointer;\n  border-bottom: 2px solid transparent;\n  transition: all 0.2s;\n}\n\n.tab-btn.active {\n  color: #007aff;\n  border-bottom-color: #007aff;\n}\n\n.tab-btn:hover:not(.active) {\n  color: #1d1d1f;\n  background: #f2f2f7;\n  border-radius: 8px 8px 0 0;\n}\n\n.tab-content {\n  margin-bottom: 20px;\n}\n\n/* ä¸Šä¼ åŒºåŸŸæ ·å¼ */\n.upload-area {\n  border: 2px dashed #d1d1d6;\n  border-radius: 12px;\n  padding: 40px 20px;\n  text-align: center;\n  cursor: pointer;\n  transition: all 0.2s;\n  background: #fafafa;\n}\n\n.upload-area:hover:not(.uploading) {\n  border-color: #007aff;\n  background: #f0f8ff;\n}\n\n.upload-area.dragover {\n  border-color: #007aff;\n  background: #e6f3ff;\n  transform: scale(1.02);\n}\n\n.upload-area.has-image {\n  border-style: solid;\n  border-color: #34c759;\n  background: #f0fff4;\n  padding: 20px;\n}\n\n.upload-area.uploading {\n  border-color: #007aff;\n  background: #f0f8ff;\n  cursor: not-allowed;\n}\n\n.upload-placeholder {\n  color: #8e8e93;\n}\n\n.upload-icon {\n  font-size: 48px;\n  color: #d1d1d6;\n  margin-bottom: 16px;\n}\n\n.upload-text {\n  font-size: 16px;\n  font-weight: 600;\n  margin: 0 0 8px 0;\n  color: #1d1d1f;\n}\n\n.upload-hint {\n  font-size: 14px;\n  margin: 0;\n  color: #8e8e93;\n}\n\n/* å›¾ç‰‡é¢„è§ˆæ ·å¼ */\n.image-preview {\n  position: relative;\n  display: flex;\n  align-items: center;\n  gap: 16px;\n}\n\n.preview-image {\n  width: 80px;\n  height: 80px;\n  object-fit: cover;\n  border-radius: 8px;\n  border: 2px solid #e5e5ea;\n}\n\n.image-info {\n  flex: 1;\n  text-align: left;\n}\n\n.image-name {\n  font-size: 14px;\n  font-weight: 600;\n  margin: 0 0 4px 0;\n  color: #1d1d1f;\n  word-break: break-all;\n}\n\n.image-size {\n  font-size: 12px;\n  margin: 0;\n  color: #8e8e93;\n}\n\n.remove-image {\n  position: absolute;\n  top: -8px;\n  right: -8px;\n  background: #ff3b30;\n  color: white;\n  border: none;\n  width: 24px;\n  height: 24px;\n  border-radius: 12px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 12px;\n  transition: all 0.2s;\n}\n\n.remove-image:hover {\n  background: #d70015;\n  transform: scale(1.1);\n}\n\n/* ä¸Šä¼ è¿›åº¦æ ·å¼ */\n.upload-progress {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  color: #007aff;\n  font-size: 14px;\n  margin-top: 16px;\n}\n\n/* URLè¾“å…¥æ ·å¼ */\n.url-input-container {\n  display: flex;\n  gap: 12px;\n  margin-bottom: 20px;\n}\n\n.url-input {\n  flex: 1;\n  padding: 12px 16px;\n  border: 1px solid #d1d1d6;\n  border-radius: 8px;\n  font-size: 14px;\n  outline: none;\n  transition: all 0.2s;\n}\n\n.url-input:focus {\n  border-color: #007aff;\n  box-shadow: 0 0 0 2px rgba(0, 122, 255, 0.2);\n}\n\n.analyze-url-btn {\n  padding: 12px 20px;\n  background: #007aff;\n  color: white;\n  border: none;\n  border-radius: 8px;\n  font-size: 14px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.analyze-url-btn:hover:not(:disabled) {\n  background: #0056d3;\n}\n\n.analyze-url-btn:disabled {\n  background: #e5e5ea;\n  color: #8e8e93;\n  cursor: not-allowed;\n}\n\n/* æç¤ºè¯è¾“å…¥æ ·å¼ */\n.prompt-section {\n  margin-bottom: 20px;\n}\n\n.prompt-label {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-size: 14px;\n  font-weight: 600;\n  color: #1d1d1f;\n  margin-bottom: 8px;\n}\n\n.prompt-input {\n  width: 100%;\n  padding: 12px 16px;\n  border: 1px solid #d1d1d6;\n  border-radius: 8px;\n  font-size: 14px;\n  outline: none;\n  resize: vertical;\n  min-height: 80px;\n  transition: all 0.2s;\n  font-family: inherit;\n}\n\n.prompt-input:focus {\n  border-color: #007aff;\n  box-shadow: 0 0 0 2px rgba(0, 122, 255, 0.2);\n}\n\n/* åˆ†æç»“æœæ ·å¼ */\n.analysis-result {\n  background: #f8f9fa;\n  border-radius: 12px;\n  padding: 20px;\n  margin-bottom: 20px;\n  border-left: 4px solid #007aff;\n}\n\n.analysis-result h4 {\n  margin: 0 0 16px 0;\n  font-size: 16px;\n  font-weight: 600;\n  color: #1d1d1f;\n}\n\n.result-text {\n  margin: 0 0 16px 0;\n  font-size: 14px;\n  line-height: 1.6;\n  color: #1d1d1f;\n}\n\n.result-meta {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n}\n\n.token-info {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  font-size: 12px;\n  color: #8e8e93;\n}\n\n/* é”™è¯¯æç¤ºæ ·å¼ */\n.error-message {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  background: #fff5f5;\n  color: #dc2626;\n  padding: 12px 16px;\n  border-radius: 8px;\n  border: 1px solid #fecaca;\n  margin-bottom: 20px;\n  font-size: 14px;\n}\n\n/* æ¨¡æ€æ¡†åº•éƒ¨æ ·å¼ */\n.modal-footer {\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  gap: 12px;\n  padding: 20px 24px;\n  border-top: 1px solid #e5e5ea;\n  background: #fafafa;\n}\n\n.btn {\n  padding: 12px 24px;\n  border: none;\n  border-radius: 8px;\n  font-size: 14px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.btn-secondary {\n  background: #f2f2f7;\n  color: #1d1d1f;\n}\n\n.btn-secondary:hover {\n  background: #e5e5ea;\n}\n\n.btn-primary {\n  background: #007aff;\n  color: white;\n}\n\n.btn-primary:hover:not(:disabled) {\n  background: #0056d3;\n}\n\n.btn-primary:disabled {\n  background: #e5e5ea;\n  color: #8e8e93;\n  cursor: not-allowed;\n}\n\n/* å“åº”å¼è®¾è®¡ */\n@media (max-width: 600px) {\n  .image-analysis-modal {\n    padding: 10px;\n  }\n  \n  .modal-content {\n    max-height: 95vh;\n    width: calc(100% - 20px);\n    max-width: none;\n  }\n  \n  .modal-body {\n    padding: 16px;\n    max-height: 70vh;\n  }\n  \n  .upload-area {\n    padding: 30px 16px;\n  }\n  \n  .upload-area.has-image {\n    padding: 16px;\n  }\n  \n  .preview-image {\n    width: 60px;\n    height: 60px;\n  }\n  \n  .url-input-container {\n    flex-direction: column;\n  }\n  \n  .analyze-url-btn {\n    width: 100%;\n    justify-content: center;\n  }\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}