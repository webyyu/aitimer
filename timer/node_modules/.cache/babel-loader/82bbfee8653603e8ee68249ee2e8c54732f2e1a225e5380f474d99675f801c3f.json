{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport TaskTimeBlocks from '../components/task/TaskTimeBlocks.vue';\nimport TaskQuadrant from '../components/task/TaskQuadrant.vue';\nimport AddTaskModal from '../components/task/AddTaskModal.vue';\nimport TabBar from '../components/common/TabBar.vue';\nimport VoiceCloneModal from '../components/aivoice/VoiceCloneModal.vue';\nimport AIVoiceModal from '../components/aivoice/AIVoiceModal.vue';\nimport api from '@/api';\nimport { playRandomVoice } from '@/aivoice/voicePlayer.js';\nexport default {\n  name: 'TaskPage',\n  components: {\n    TaskTimeBlocks,\n    TaskQuadrant,\n    AddTaskModal,\n    TabBar,\n    VoiceCloneModal,\n    AIVoiceModal\n  },\n  data() {\n    return {\n      currentView: 'time',\n      currentTimeSegment: 'morning',\n      // ÂΩìÂâçÈÄâ‰∏≠ÁöÑÊó∂Èó¥ÊÆµ\n      sidebarOpen: false,\n      showAddModal: false,\n      timeBlocks: [],\n      unscheduledTasks: [],\n      // Ê∑ªÂä†Êú™ÊåáÂÆöÊó∂Èó¥ÁöÑ‰ªªÂä°Êï∞ÁªÑ\n      timeSegments: [{\n        value: 'morning',\n        label: 'Êó©‰∏ä'\n      }, {\n        value: 'afternoon',\n        label: '‰∏ãÂçà'\n      }, {\n        value: 'evening',\n        label: 'Êôö‰∏ä'\n      }],\n      quadrants: [{\n        id: 1,\n        title: 'ÈáçË¶Å‰∏îÁ¥ßÊÄ•',\n        tasks: []\n      }, {\n        id: 2,\n        title: 'ÈáçË¶Å‰∏çÁ¥ßÊÄ•',\n        tasks: []\n      }, {\n        id: 3,\n        title: 'Á¥ßÊÄ•‰∏çÈáçË¶Å',\n        tasks: []\n      }, {\n        id: 4,\n        title: '‰∏çÈáçË¶Å‰∏çÁ¥ßÊÄ•',\n        tasks: []\n      }],\n      settings: [{\n        id: 1,\n        label: 'ÈÄöÁü•ËÆæÁΩÆ',\n        description: 'ÁÆ°ÁêÜ‰ªªÂä°ÊèêÈÜíÂíåÊé®ÈÄÅ'\n      }, {\n        id: 2,\n        label: 'Â≠¶‰π†ËÆ°Âàí',\n        description: 'Ë∞ÉÊï¥AIÁîüÊàêÁöÑÂ≠¶‰π†ËÆ°Âàí'\n      }, {\n        id: 3,\n        label: '‰∏ªÈ¢òËÆæÁΩÆ',\n        description: 'ÂàáÊç¢Ê∑±Ëâ≤/ÊµÖËâ≤Ê®°Âºè'\n      }, {\n        id: 4,\n        label: 'Êï∞ÊçÆÂêåÊ≠•',\n        description: '‰∫ëÁ´ØÂ§á‰ªΩÂíåÊÅ¢Â§ç'\n      }, {\n        id: 5,\n        label: 'AIËØ≠Èü≥',\n        description: 'ÂÆöÂà∂‰Ω†ÁöÑaiËØ≠Èü≥Âä©Êâã'\n      }, {\n        id: 6,\n        label: 'ÈÄÄÂá∫ÁôªÂΩï',\n        description: 'ÈÄÄÂá∫Âà∞ÁôªÂΩïÁïåÈù¢'\n      }],\n      showVoiceCloneModal: false,\n      hasClonedVoice: false,\n      showAIVoiceModal: false\n    };\n  },\n  computed: {\n    filteredTimeBlocks() {\n      // Ê†πÊçÆÂΩìÂâçÈÄâ‰∏≠ÁöÑÊó∂Èó¥ÊÆµËøáÊª§Êó∂Èó¥Âùó\n      return this.timeBlocks.filter(block => {\n        const segmentMap = {\n          'morning': ['morning'],\n          'afternoon': ['afternoon'],\n          'evening': ['evening']\n        };\n        return segmentMap[this.currentTimeSegment]?.includes(block.timeBlockType);\n      });\n    },\n    currentUserId() {\n      const user = JSON.parse(localStorage.getItem('user') || 'null');\n      return user?._id || user?.id || null;\n    }\n  },\n  created() {\n    this.fetchTasks();\n  },\n  activated() {\n    // Ëã•‰ΩøÁî®keep-aliveÔºåÂàôËøîÂõûÊó∂Ëá™Âä®Âà∑Êñ∞\n    this.fetchTasks();\n    // ËøîÂõûÊó∂‰πüËá™Âä®ÂàáÊç¢Âà∞ÂØπÂ∫îÊó∂Èó¥ÊÆµ\n    this.autoSwitchTimeSegment();\n  },\n  methods: {\n    handleSettingClick(setting) {\n      if (setting && (setting.id === 5 || setting.label === 'AIËØ≠Èü≥')) {\n        this.showVoiceCloneModal = true;\n      } else if (setting && (setting.id === 6 || setting.label === 'ÈÄÄÂá∫ÁôªÂΩï')) {\n        try {\n          console.log('üîí [TaskPage] ÊâßË°åÈÄÄÂá∫ÁôªÂΩï');\n          localStorage.removeItem('token');\n          localStorage.removeItem('user');\n          localStorage.removeItem('auth_verified');\n        } finally {\n          this.sidebarOpen = false;\n          this.$router.replace({\n            path: '/auth/login'\n          });\n        }\n      }\n    },\n    onCloneSuccess() {\n      this.hasClonedVoice = true;\n      this.showVoiceCloneModal = false;\n      // ÊâìÂºÄAIËØ≠Èü≥Èô™‰º¥ËÆæÁΩÆÂºπÁ™ó\n      this.showAIVoiceModal = true;\n    },\n    onApplyVoice() {\n      // ÂÖ≥Èó≠AIËØ≠Èü≥ÂºπÁ™óÔºõ‰øùÁïôÁÆÄÂçïÂ§ÑÁêÜ‰ª•‰∏çÂΩ±ÂìçÂéüÊúâÈÄªËæë\n      this.showAIVoiceModal = false;\n    },\n    async fetchTasks() {\n      try {\n        console.log('üîÑ [TaskPage] ÂºÄÂßãËé∑Âèñ‰ªªÂä°ÂàóË°®...');\n\n        // Êú™ÁôªÂΩïÈò≤Êä§\n        const userId = this.currentUserId;\n        if (!userId) {\n          console.warn('‚ö†Ô∏è [TaskPage] Êú™ÁôªÂΩïÔºåË∑≥ËΩ¨Âà∞ÁôªÂΩïÈ°µ');\n          this.$router.replace({\n            path: '/auth/login',\n            query: {\n              redirect: this.$route.fullPath\n            }\n          });\n          return;\n        }\n\n        // Áõ¥Êé•Ëé∑ÂèñÊâÄÊúâ‰ªªÂä°Ôºå‰∏çÂÜçÊåâÊó•ÊúüËøáÊª§\n        console.log('üìã [TaskPage] Ëé∑ÂèñÊâÄÊúâ‰ªªÂä°...');\n        const response = await api.tasks.getAllTasks({\n          userId\n        });\n        console.log('üìã [TaskPage] ‰ªªÂä°ÂìçÂ∫î:', response);\n        if (response.success && response.data) {\n          console.log('‚úÖ [TaskPage] ÊàêÂäüËé∑Âèñ‰ªªÂä°:', response.data.length);\n          this.processTasks(response.data);\n        } else {\n          console.warn('‚ö†Ô∏è [TaskPage] ‰ªªÂä°ÂìçÂ∫îÊ†ºÂºèÂºÇÂ∏∏Ôºå‰ΩøÁî®Ê®°ÊãüÊï∞ÊçÆ');\n          this.initializeMockData();\n        }\n      } catch (error) {\n        console.error('‚ùå [TaskPage] Ëé∑Âèñ‰ªªÂä°Â§±Ë¥•:', error);\n        // Âá∫ÈîôÊó∂‰ΩøÁî®Ê®°ÊãüÊï∞ÊçÆ\n        this.initializeMockData();\n      }\n    },\n    // Â§ñÈÉ®Âà∑Êñ∞‰ªªÂä°ÂàóË°®Ôºà‰æõÁï™ËåÑÈíüÂÆåÊàêÂêéËß¶ÂèëÔºâ\n    async refreshTasks() {\n      await this.fetchTasks();\n    },\n    // ‰øÆÊîπprocessTasksÊñπÊ≥ïÔºåÂ§ÑÁêÜÂÆûÈôÖAPIËøîÂõûÁöÑ‰ªªÂä°Êï∞ÊçÆ\n    processTasks(tasks) {\n      console.log('üìä [TaskPage] ÂºÄÂßãÂ§ÑÁêÜ‰ªªÂä°Êï∞ÊçÆ:', tasks.length);\n\n      // ÂàùÂßãÂåñÊó∂Èó¥ÂùóÔºåÊîØÊåÅÊõ¥ÁªÜÂàÜÁöÑÊó∂Èó¥ÊÆµ\n      this.timeBlocks = [{\n        id: 1,\n        label: 'Êó©Êô® 0:00 - 8:00',\n        timeBlockType: 'morning',\n        tasks: [],\n        collapsed: false\n      }, {\n        id: 2,\n        label: '‰∏äÂçà 8:00 - 16:00',\n        timeBlockType: 'afternoon',\n        tasks: [],\n        collapsed: false\n      }, {\n        id: 3,\n        label: 'Êôö‰∏ä 16:00 - 24:00',\n        timeBlockType: 'evening',\n        tasks: [],\n        collapsed: false\n      }];\n\n      // Ê∏ÖÁ©∫Áé∞Êúâ‰ªªÂä°\n      this.quadrants.forEach(q => q.tasks = []);\n      this.unscheduledTasks = [];\n\n      // ÈÅçÂéÜ‰ªªÂä°Âπ∂ÂàÜÈÖç\n      tasks.forEach(task => {\n        console.log('üîç [TaskPage] Â§ÑÁêÜ‰ªªÂä°:', task.title, task);\n\n        // ÂàÜÈÖçÂà∞ÂõõË±°Èôê\n        const quadrant = this.quadrants.find(q => q.id == task.quadrant);\n        if (quadrant) {\n          quadrant.tasks.push({\n            id: task._id,\n            title: task.title,\n            completed: task.completed\n          });\n        }\n\n        // Âü∫‰∫éAPIËøîÂõûÁöÑÊñ∞Êï∞ÊçÆÁªìÊûÑÂ§ÑÁêÜÊó∂Èó¥‰ø°ÊÅØ\n        let taskTimeDisplay = 'Êú™ÊåáÂÆö';\n        let targetTimeBlockType = 'unscheduled';\n\n        // Âà§Êñ≠ÊòØAIÁîüÊàêÁöÑÊó•Á®ãËøòÊòØÁî®Êà∑ÁîüÊàêÁöÑÊó•Á®ã\n        if (task.timeBlock && task.timeBlock.startTime) {\n          // AIÁîüÊàêÁöÑÊó•Á®ãÔºå‰ΩøÁî®timeBlock.startTime‰Ωú‰∏∫Âà§Êñ≠Ê†áÂáÜ\n          const hour = parseInt(task.timeBlock.startTime.split(':')[0]);\n          taskTimeDisplay = `${task.timeBlock.startTime} - ${task.timeBlock.endTime || this.addHour(task.timeBlock.startTime)}`;\n          if (hour >= 0 && hour < 8) {\n            targetTimeBlockType = 'morning';\n          } else if (hour >= 8 && hour < 16) {\n            targetTimeBlockType = 'afternoon';\n          } else if (hour >= 16 && hour < 24) {\n            targetTimeBlockType = 'evening';\n          }\n          console.log(`üéØ [TaskPage] AIÁîüÊàê‰ªªÂä°\"${task.title}\"Ê†πÊçÆstartTimeËÆ°ÁÆóÊó∂Èó¥ÂùóÁ±ªÂûã: ${targetTimeBlockType}`);\n        } else if (task.time && task.time.trim()) {\n          // Áî®Êà∑ÁîüÊàêÁöÑÊó•Á®ãÔºå‰ΩøÁî®time‰Ωú‰∏∫Âà§Êñ≠Ê†áÂáÜ\n          const hour = parseInt(task.time.split(':')[0]);\n          taskTimeDisplay = `${task.time} - ${this.addHour(task.time)}`;\n          if (hour >= 0 && hour < 8) {\n            targetTimeBlockType = 'morning';\n          } else if (hour >= 8 && hour < 16) {\n            targetTimeBlockType = 'afternoon';\n          } else if (hour >= 16 && hour < 24) {\n            targetTimeBlockType = 'evening';\n          }\n          console.log(`‚è∞ [TaskPage] Áî®Êà∑ÁîüÊàê‰ªªÂä°\"${task.title}\"Ê†πÊçÆtimeËÆ°ÁÆóÊó∂Èó¥ÂùóÁ±ªÂûã: ${targetTimeBlockType}`);\n        }\n        const taskData = {\n          id: task._id,\n          title: task.title,\n          time: taskTimeDisplay,\n          priority: task.priority || 'medium',\n          completed: task.completed\n        };\n\n        // ÂàÜÈÖçÂà∞ÂØπÂ∫îÁöÑÊó∂Èó¥Âùó\n        if (targetTimeBlockType !== 'unscheduled') {\n          const timeBlock = this.timeBlocks.find(tb => tb.timeBlockType === targetTimeBlockType);\n          if (timeBlock) {\n            timeBlock.tasks.push(taskData);\n            console.log(`üìç [TaskPage] ‰ªªÂä°\"${task.title}\"ÂàÜÈÖçÂà∞${timeBlock.label}`);\n          } else {\n            this.unscheduledTasks.push(taskData);\n          }\n        } else {\n          // Ê≤°ÊúâÊó∂Èó¥ÁöÑ‰ªªÂä°ÊîæÂà∞Êú™ÊåáÂÆö‰ªªÂä°ÂàóË°®\n          this.unscheduledTasks.push(taskData);\n          console.log(`üìç [TaskPage] ‰ªªÂä°\"${task.title}\"ÂàÜÈÖçÂà∞Êú™ÊåáÂÆö‰ªªÂä°`);\n        }\n      });\n\n      // Ê∑ªÂä†ËØ¶ÁªÜÁöÑË∞ÉËØï‰ø°ÊÅØ\n      console.log('üìä [TaskPage] Êó∂Èó¥Âùó‰ªªÂä°ÂàÜÈÖçËØ¶ÊÉÖ:');\n      this.timeBlocks.forEach(tb => {\n        console.log(`  ${tb.label} (${tb.timeBlockType}): ${tb.tasks.length}‰∏™‰ªªÂä°`);\n        tb.tasks.forEach(task => {\n          console.log(`    - ${task.title} (${task.time})`);\n        });\n\n        // Ëá™Âä®ÊäòÂè†Á©∫ÁöÑÊó∂Èó¥ÂùóÔºåÂ±ïÂºÄÊúâ‰ªªÂä°ÁöÑÊó∂Èó¥Âùó\n        if (tb.tasks.length === 0) {\n          tb.collapsed = true;\n        } else {\n          tb.collapsed = false;\n        }\n      });\n      console.log(`üìã [TaskPage] Êú™ÊåáÂÆöÊó∂Èó¥‰ªªÂä°: ${this.unscheduledTasks.length}‰∏™`);\n      this.unscheduledTasks.forEach(task => {\n        console.log(`  - ${task.title}`);\n      });\n    },\n    initializeMockData() {\n      console.log('‚ö†Ô∏è [TaskPage] APIË∞ÉÁî®Â§±Ë¥•Ôºå‰ΩøÁî®Ê®°ÊãüÊï∞ÊçÆ');\n      // ÂΩìAPIË∞ÉÁî®Â§±Ë¥•Êó∂ÁöÑÂ§áÁî®Ê®°ÊãüÊï∞ÊçÆÔºå‰ΩøÁî®‰∏éprocessTasksÁõ∏ÂêåÁöÑÁªìÊûÑ\n      this.timeBlocks = [{\n        id: 1,\n        label: 'Êó©Êô® 0:00 - 8:00',\n        timeBlockType: 'morning',\n        tasks: [{\n          id: 1,\n          title: 'Ëã±ËØ≠Êô®ËØªËÆ°Âàí',\n          time: '7:30 - 8:30',\n          priority: 'high',\n          completed: false\n        }],\n        collapsed: false\n      }, {\n        id: 2,\n        label: '‰∏äÂçà 8:00 - 16:00',\n        timeBlockType: 'afternoon',\n        tasks: [{\n          id: 2,\n          title: 'ËÄÉÁ†îÊï∞Â≠¶Â§ç‰π†',\n          time: '9:00 - 11:00',\n          priority: 'high',\n          completed: true\n        }, {\n          id: 3,\n          title: 'ÊîøÊ≤ªÁü•ËØÜÁÇπËÉåËØµ',\n          time: '11:00 - 12:00',\n          priority: 'medium',\n          completed: false\n        }, {\n          id: 4,\n          title: '‰∏ì‰∏öËØæÁ¨îËÆ∞Êï¥ÁêÜ',\n          time: '14:00 - 16:00',\n          priority: 'medium',\n          completed: false\n        }],\n        collapsed: false\n      }, {\n        id: 3,\n        label: 'Êôö‰∏ä 16:00 - 24:00',\n        timeBlockType: 'evening',\n        tasks: [],\n        collapsed: true // ÂàùÂßãÊ≤°Êúâ‰ªªÂä°ÔºåËÆæ‰∏∫ÊäòÂè†\n      }];\n\n      // Ê∑ªÂä†Êú™ÊåáÂÆöÊó∂Èó¥ÁöÑ‰ªªÂä°Ê°Ü\n      this.unscheduledTasks = [{\n        id: 5,\n        title: 'Â§ç‰π†Ëã±ËØ≠ÂçïËØç',\n        priority: 'low',\n        completed: false\n      }, {\n        id: 6,\n        title: 'Êï¥ÁêÜÂ≠¶‰π†ËµÑÊñô',\n        priority: 'medium',\n        completed: false\n      }];\n      this.quadrants = [{\n        id: 1,\n        title: 'ÈáçË¶Å‰∏îÁ¥ßÊÄ•',\n        tasks: [{\n          id: 2,\n          title: 'ËÄÉÁ†îÊï∞Â≠¶Â§ç‰π†',\n          completed: true\n        }]\n      }, {\n        id: 2,\n        title: 'ÈáçË¶Å‰∏çÁ¥ßÊÄ•',\n        tasks: [{\n          id: 1,\n          title: 'Ëã±ËØ≠Êô®ËØªËÆ°Âàí',\n          completed: false\n        }, {\n          id: 4,\n          title: '‰∏ì‰∏öËØæÁ¨îËÆ∞Êï¥ÁêÜ',\n          completed: false\n        }]\n      }, {\n        id: 3,\n        title: 'Á¥ßÊÄ•‰∏çÈáçË¶Å',\n        tasks: [{\n          id: 3,\n          title: 'ÊîøÊ≤ªÁü•ËØÜÁÇπËÉåËØµ',\n          completed: false\n        }]\n      }, {\n        id: 4,\n        title: '‰∏çÈáçË¶Å‰∏çÁ¥ßÊÄ•',\n        tasks: []\n      }];\n    },\n    // Ê∑ªÂä†ÊäòÂè†/Â±ïÂºÄÂäüËÉΩ\n    toggleTimeBlockCollapse(timeBlockId) {\n      const timeBlock = this.timeBlocks.find(tb => tb.id === timeBlockId);\n      if (timeBlock) {\n        timeBlock.collapsed = !timeBlock.collapsed;\n      }\n    },\n    // Ê∑ªÂä†Êú™ÊåáÂÆöÊó∂Èó¥ÁöÑ‰ªªÂä°Âà∞ÂØπÂ∫îÊó∂Èó¥Âùó\n    moveToTimeBlock(task, timeBlockId) {\n      const taskIndex = this.unscheduledTasks.findIndex(t => t.id === task.id);\n      if (taskIndex > -1) {\n        this.unscheduledTasks.splice(taskIndex, 1);\n        const timeBlock = this.timeBlocks.find(tb => tb.id === timeBlockId);\n        if (timeBlock) {\n          timeBlock.tasks.push(task);\n        }\n      }\n    },\n    switchView(view) {\n      this.currentView = view;\n    },\n    toggleSidebar() {\n      this.sidebarOpen = !this.sidebarOpen;\n    },\n    openAddTask() {\n      this.showAddModal = true;\n    },\n    closeAddTask() {\n      this.showAddModal = false;\n    },\n    async handleAddTask(taskData) {\n      try {\n        console.log('üîÑ [TaskPage] ÂºÄÂßãÂàõÂª∫‰ªªÂä°:', taskData);\n        const userId = this.currentUserId;\n        if (!userId) {\n          console.warn('‚ö†Ô∏è [TaskPage] Êú™ÁôªÂΩïÔºåË∑≥ËΩ¨Âà∞ÁôªÂΩïÈ°µ');\n          this.$router.replace({\n            path: '/auth/login',\n            query: {\n              redirect: this.$route.fullPath\n            }\n          });\n          return;\n        }\n        const response = await api.tasks.createTask({\n          title: taskData.title,\n          description: taskData.description || '',\n          priority: taskData.priority || 'medium',\n          completed: false,\n          quadrant: taskData.quadrant,\n          date: taskData.date,\n          time: taskData.time,\n          userId,\n          timeBlockType: taskData.timeBlockType,\n          isScheduled: taskData.isScheduled\n        });\n        console.log('‚úÖ [TaskPage] ‰ªªÂä°ÂàõÂª∫ÊàêÂäü:', response);\n\n        // ÈáçÊñ∞Ëé∑Âèñ‰ªªÂä°ÂàóË°®\n        await this.fetchTasks();\n        this.closeAddTask();\n      } catch (error) {\n        console.error('‚ùå [TaskPage] ÂàõÂª∫‰ªªÂä°Â§±Ë¥•:', error);\n        // Âá∫ÈîôÊó∂‰ΩøÁî®ÂéüÊúâÈÄªËæë\n        const task = {\n          id: Date.now(),\n          // ‰ΩøÁî®Êó∂Èó¥Êà≥‰Ωú‰∏∫‰∏¥Êó∂ID\n          title: taskData.title,\n          time: taskData.time ? `${taskData.time} - ${this.addHour(taskData.time)}` : 'Êú™ÊåáÂÆö',\n          priority: taskData.priority || 'medium',\n          completed: false,\n          date: taskData.date\n        };\n\n        // Ê∑ªÂä†Âà∞ÂØπÂ∫îÁöÑË±°Èôê\n        const quadrant = this.quadrants.find(q => q.id === taskData.quadrant);\n        if (quadrant) {\n          quadrant.tasks.push(task);\n        }\n\n        // Ê†πÊçÆÊó∂Èó¥Ê∑ªÂä†Âà∞ÂØπÂ∫îÁöÑÊó∂Èó¥Âùó\n        if (taskData.time && taskData.timeBlockType) {\n          const timeBlock = this.timeBlocks.find(tb => tb.timeBlockType === taskData.timeBlockType);\n          if (timeBlock) {\n            timeBlock.tasks.push(task);\n            console.log(`‚úÖ [TaskPage] ‰ªªÂä°Ê∑ªÂä†Âà∞${timeBlock.label}:`, task.title);\n          }\n        }\n        this.closeAddTask();\n      }\n    },\n    // ËæÖÂä©ÊñπÊ≥ïÔºöÁªôÊó∂Èó¥Âä†‰∏ÄÂ∞èÊó∂\n    addHour(time) {\n      const [hour, minute] = time.split(':').map(Number);\n      const newHour = (hour + 1) % 24;\n      return `${newHour.toString().padStart(2, '0')}:${minute.toString().padStart(2, '0')}`;\n    },\n    // ÊãñÂä®Áõ∏ÂÖ≥ÊñπÊ≥ï\n    startDrag(event) {\n      event.preventDefault();\n      this.isDragging = true;\n      const clientX = event.clientX || event.touches && event.touches[0].clientX;\n      const clientY = event.clientY || event.touches && event.touches[0].clientY;\n      this.dragOffset.x = clientX - this.btnPosition.x;\n      this.dragOffset.y = clientY - this.btnPosition.y;\n      document.addEventListener('mousemove', this.onDrag);\n      document.addEventListener('mouseup', this.stopDrag);\n      document.addEventListener('touchmove', this.onDrag);\n      document.addEventListener('touchend', this.stopDrag);\n    },\n    onDrag(event) {\n      if (!this.isDragging) return;\n      const clientX = event.clientX || event.touches && event.touches[0].clientX;\n      const clientY = event.clientY || event.touches && event.touches[0].clientY;\n      let newX = clientX - this.dragOffset.x;\n      let newY = clientY - this.dragOffset.y;\n\n      // ÈôêÂà∂ÊåâÈíÆÂú®Â±èÂπïËåÉÂõ¥ÂÜÖ\n      const maxX = window.innerWidth - 56;\n      const maxY = window.innerHeight - 56;\n      newX = Math.max(0, Math.min(newX, maxX));\n      newY = Math.max(0, Math.min(newY, maxY));\n      this.btnPosition.x = newX;\n      this.btnPosition.y = newY;\n    },\n    stopDrag() {\n      this.isDragging = false;\n      document.removeEventListener('mousemove', this.onDrag);\n      document.removeEventListener('mouseup', this.stopDrag);\n      document.removeEventListener('touchmove', this.onDrag);\n      document.removeEventListener('touchend', this.stopDrag);\n    },\n    async toggleTask(task) {\n      try {\n        const response = await api.tasks.toggleTaskStatus(task.id);\n        console.log('Toggled task status:', response);\n\n        // Êõ¥Êñ∞Êú¨Âú∞Áä∂ÊÄÅ\n        const willBeCompleted = !task.completed;\n        task.completed = willBeCompleted;\n\n        // Ëã•ÂàöÂÆåÊàêÔºåÊí≠ÊîæÈºìÂä±ËØ≠Èü≥\n        if (willBeCompleted) {\n          playRandomVoice('encourage');\n        }\n      } catch (error) {\n        console.error('Failed to toggle task status:', error);\n        // Âá∫ÈîôÊó∂‰ΩøÁî®ÂéüÊúâÈÄªËæë\n        task.completed = !task.completed;\n      }\n    },\n    openPomodoro(task) {\n      this.$router.push({\n        path: '/pomodoro',\n        query: {\n          task: task.title,\n          taskId: task.id,\n          from: '/task'\n        }\n      });\n    },\n    // ÂàáÊç¢Êó∂Èó¥ÊÆµ\n    switchTimeSegment(segment) {\n      console.log('üîÑ [TaskPage] ÂàáÊç¢Êó∂Èó¥ÊÆµ:', segment);\n      this.currentTimeSegment = segment;\n    },\n    // Ê†πÊçÆÂΩìÂâçÊó∂Èó¥Ëá™Âä®ÂàáÊç¢Âà∞ÂØπÂ∫îÊó∂Èó¥ÊÆµ\n    autoSwitchTimeSegment() {\n      const now = new Date();\n      const currentHour = now.getHours();\n      let targetSegment = 'morning'; // ÈªòËÆ§Êó©‰∏ä\n\n      if (currentHour >= 0 && currentHour < 8) {\n        targetSegment = 'morning';\n      } else if (currentHour >= 8 && currentHour < 16) {\n        targetSegment = 'afternoon';\n      } else if (currentHour >= 16 && currentHour < 24) {\n        targetSegment = 'evening';\n      }\n      console.log(`üïê [TaskPage] ÂΩìÂâçÊó∂Èó¥: ${currentHour}:00, Ëá™Âä®ÂàáÊç¢Âà∞: ${targetSegment}`);\n      this.currentTimeSegment = targetSegment;\n    }\n  },\n  mounted() {\n    console.log('üîÑ [TaskPage] ÁªÑ‰ª∂ÊåÇËΩΩÔºåÂºÄÂßãËé∑Âèñ‰ªªÂä°...');\n    // È°µÈù¢Âä†ËΩΩÊó∂Á´ãÂç≥Ëé∑Âèñ‰ªªÂä°\n    this.fetchTasks();\n\n    // Ê†πÊçÆÂΩìÂâçÊó∂Èó¥Ëá™Âä®ÂàáÊç¢Âà∞ÂØπÂ∫îÊó∂Èó¥ÊÆµ\n    this.autoSwitchTimeSegment();\n\n    // ÁõëÂê¨AIÁîüÊàêËÆ°Âàí‰∫ã‰ª∂ÔºåËá™Âä®Âà∑Êñ∞‰ªªÂä°ÂàóË°®\n    this._aiPlanHandler = () => {\n      console.log('üéØ [TaskPage] Êî∂Âà∞AIËÆ°ÂàíÁîüÊàê‰∫ã‰ª∂ÔºåÂà∑Êñ∞‰ªªÂä°ÂàóË°®');\n      this.refreshTasks();\n    };\n    window.addEventListener('ai-plan-generated', this._aiPlanHandler);\n\n    // ÁõëÂê¨Á™óÂè£Â§ßÂ∞èÂèòÂåñÔºåË∞ÉÊï¥ÊåâÈíÆ‰ΩçÁΩÆ\n    this._resizeHandler = () => {\n      if (this.btnPosition.x > window.innerWidth - 56) {\n        this.btnPosition.x = window.innerWidth - 76;\n      }\n      if (this.btnPosition.y > window.innerHeight - 56) {\n        this.btnPosition.y = window.innerHeight - 146;\n      }\n    };\n    window.addEventListener('resize', this._resizeHandler);\n  },\n  beforeUnmount() {\n    if (this._aiPlanHandler) {\n      window.removeEventListener('ai-plan-generated', this._aiPlanHandler);\n      this._aiPlanHandler = null;\n    }\n    if (this._resizeHandler) {\n      window.removeEventListener('resize', this._resizeHandler);\n      this._resizeHandler = null;\n    }\n  }\n};","map":{"version":3,"names":["TaskTimeBlocks","TaskQuadrant","AddTaskModal","TabBar","VoiceCloneModal","AIVoiceModal","api","playRandomVoice","name","components","data","currentView","currentTimeSegment","sidebarOpen","showAddModal","timeBlocks","unscheduledTasks","timeSegments","value","label","quadrants","id","title","tasks","settings","description","showVoiceCloneModal","hasClonedVoice","showAIVoiceModal","computed","filteredTimeBlocks","filter","block","segmentMap","includes","timeBlockType","currentUserId","user","JSON","parse","localStorage","getItem","_id","created","fetchTasks","activated","autoSwitchTimeSegment","methods","handleSettingClick","setting","console","log","removeItem","$router","replace","path","onCloneSuccess","onApplyVoice","userId","warn","query","redirect","$route","fullPath","response","getAllTasks","success","length","processTasks","initializeMockData","error","refreshTasks","collapsed","forEach","q","task","quadrant","find","push","completed","taskTimeDisplay","targetTimeBlockType","timeBlock","startTime","hour","parseInt","split","endTime","addHour","time","trim","taskData","priority","tb","toggleTimeBlockCollapse","timeBlockId","moveToTimeBlock","taskIndex","findIndex","t","splice","switchView","view","toggleSidebar","openAddTask","closeAddTask","handleAddTask","createTask","date","isScheduled","Date","now","minute","map","Number","newHour","toString","padStart","startDrag","event","preventDefault","isDragging","clientX","touches","clientY","dragOffset","x","btnPosition","y","document","addEventListener","onDrag","stopDrag","newX","newY","maxX","window","innerWidth","maxY","innerHeight","Math","max","min","removeEventListener","toggleTask","toggleTaskStatus","willBeCompleted","openPomodoro","taskId","from","switchTimeSegment","segment","currentHour","getHours","targetSegment","mounted","_aiPlanHandler","_resizeHandler","beforeUnmount"],"sources":["C:\\Users\\wuby\\OneDrive\\Desktop\\backend(1) 3\\timer\\src\\views\\Task.vue"],"sourcesContent":["<template>\n  <div class=\"home-container\">\n    <!-- Header -->\n    <div class=\"header\">\n      <div class=\"settings-btn\" @click=\"toggleSidebar\">\n        <font-awesome-icon icon=\"cog\" />\n      </div>\n      \n      <div class=\"view-toggle\">\n        <button \n          class=\"toggle-btn\" \n          :class=\"{ active: currentView === 'time' }\"\n          @click=\"switchView('time')\"\n        >\n          Êó∂Èó¥Âùó\n        </button>\n        <button \n          class=\"toggle-btn\" \n          :class=\"{ active: currentView === 'quadrant' }\"\n          @click=\"switchView('quadrant')\"\n        >\n          ÂõõË±°Èôê\n        </button>\n      </div>\n      \n      <div class=\"settings-btn\" @click=\"openAddTask\">\n        <font-awesome-icon icon=\"plus\" />\n      </div>\n    </div>\n    \n    <!-- Content -->\n    <div class=\"content\">\n      <!-- Time Blocks View -->\n      <div v-if=\"currentView === 'time'\" class=\"time-view-container\">\n        <!-- Time Segment Selector -->\n        <div class=\"time-segment-section\">\n          <div class=\"section-title\">\n            <h3>Êó∂Èó¥ÊÆµ</h3>\n            <a href=\"/task-collections\" class=\"view-all-link\">‰ªªÂä°ÈõÜ</a>\n          </div>\n          <div class=\"segmented\">\n            <button \n              v-for=\"segment in timeSegments\"\n              :key=\"segment.value\"\n              :class=\"{ active: currentTimeSegment === segment.value }\"\n              @click=\"switchTimeSegment(segment.value)\"\n            >\n              {{ segment.label }}\n            </button>\n          </div>\n        </div>\n        \n        <!-- Time Blocks -->\n        <TaskTimeBlocks\n          :time-blocks=\"filteredTimeBlocks\"\n          @task-click=\"openPomodoro\"\n          @task-toggle=\"toggleTask\"\n          @toggle-collapse=\"toggleTimeBlockCollapse\"\n        />\n      </div>\n      \n      <!-- Quadrant View -->\n      <TaskQuadrant\n        v-else\n        :quadrants=\"quadrants\"\n        @task-click=\"openPomodoro\"\n        @task-toggle=\"toggleTask\"\n      />\n    </div>\n    \n    <!-- Sidebar -->\n    <div class=\"sidebar\" :class=\"{ open: sidebarOpen }\">\n      <div class=\"sidebar-header\">\n        <div class=\"sidebar-title\">ËÆæÁΩÆ</div>\n        <div class=\"close-sidebar\" @click=\"toggleSidebar\">\n          <font-awesome-icon icon=\"times\" />\n        </div>\n      </div>\n      <div class=\"sidebar-content\">\n        <div v-for=\"setting in settings\" :key=\"setting.id\" class=\"setting-item\" @click=\"handleSettingClick(setting)\">\n          <div class=\"setting-label\">{{ setting.label }}</div>\n          <div class=\"setting-description\">{{ setting.description }}</div>\n        </div>\n      </div>\n    </div>\n    \n    <!-- Add Task Modal -->\n    <AddTaskModal\n      :visible=\"showAddModal\"\n      @close=\"closeAddTask\"\n      @submit=\"handleAddTask\"\n    />\n    \n    <!-- Voice Clone Modal -->\n    <VoiceCloneModal\n      v-if=\"showVoiceCloneModal\"\n      :hasCloned=\"hasClonedVoice\"\n      @close=\"showVoiceCloneModal = false\"\n      @clone-success=\"onCloneSuccess\"\n    />\n\n    <!-- AI Voice Modal -->\n    <AIVoiceModal\n      v-if=\"showAIVoiceModal\"\n      @close=\"showAIVoiceModal = false\"\n      @apply-voice=\"onApplyVoice\"\n    />\n \n    <!-- Overlay -->\n    <div \n      v-if=\"sidebarOpen\" \n      class=\"overlay\" \n      @click=\"toggleSidebar\"\n    ></div>\n    \n    <!-- AI Assistant Button -->\n    <div \n      class=\"ai-assistant-btn\" \n      @click=\"$router.push('/ai-secretary')\"\n    >\n      <font-awesome-icon icon=\"robot\" />\n    </div>\n    \n    <!-- Tab Bar -->\n    <TabBar />\n  </div>\n</template>\n\n<script>\nimport TaskTimeBlocks from '../components/task/TaskTimeBlocks.vue'\nimport TaskQuadrant from '../components/task/TaskQuadrant.vue'\nimport AddTaskModal from '../components/task/AddTaskModal.vue'\nimport TabBar from '../components/common/TabBar.vue'\nimport VoiceCloneModal from '../components/aivoice/VoiceCloneModal.vue'\nimport AIVoiceModal from '../components/aivoice/AIVoiceModal.vue'\nimport api from '@/api'\nimport { playRandomVoice } from '@/aivoice/voicePlayer.js'\n\nexport default {\n  name: 'TaskPage',\n  components: {\n    TaskTimeBlocks,\n    TaskQuadrant,\n    AddTaskModal,\n    TabBar,\n    VoiceCloneModal,\n    AIVoiceModal\n  },\n  data() {\n    return {\n      currentView: 'time',\n      currentTimeSegment: 'morning', // ÂΩìÂâçÈÄâ‰∏≠ÁöÑÊó∂Èó¥ÊÆµ\n      sidebarOpen: false,\n      showAddModal: false,\n      timeBlocks: [],\n      unscheduledTasks: [], // Ê∑ªÂä†Êú™ÊåáÂÆöÊó∂Èó¥ÁöÑ‰ªªÂä°Êï∞ÁªÑ\n      timeSegments: [\n        { value: 'morning', label: 'Êó©‰∏ä' },\n        { value: 'afternoon', label: '‰∏ãÂçà' },\n        { value: 'evening', label: 'Êôö‰∏ä' }\n      ],\n      quadrants: [\n        {\n          id: 1,\n          title: 'ÈáçË¶Å‰∏îÁ¥ßÊÄ•',\n          tasks: []\n        },\n        {\n          id: 2,\n          title: 'ÈáçË¶Å‰∏çÁ¥ßÊÄ•',\n          tasks: []\n        },\n        {\n          id: 3,\n          title: 'Á¥ßÊÄ•‰∏çÈáçË¶Å',\n          tasks: []\n        },\n        {\n          id: 4,\n          title: '‰∏çÈáçË¶Å‰∏çÁ¥ßÊÄ•',\n          tasks: []\n        }\n      ],\n      settings: [\n        { id: 1, label: 'ÈÄöÁü•ËÆæÁΩÆ', description: 'ÁÆ°ÁêÜ‰ªªÂä°ÊèêÈÜíÂíåÊé®ÈÄÅ' },\n        { id: 2, label: 'Â≠¶‰π†ËÆ°Âàí', description: 'Ë∞ÉÊï¥AIÁîüÊàêÁöÑÂ≠¶‰π†ËÆ°Âàí' },\n        { id: 3, label: '‰∏ªÈ¢òËÆæÁΩÆ', description: 'ÂàáÊç¢Ê∑±Ëâ≤/ÊµÖËâ≤Ê®°Âºè' },\n        { id: 4, label: 'Êï∞ÊçÆÂêåÊ≠•', description: '‰∫ëÁ´ØÂ§á‰ªΩÂíåÊÅ¢Â§ç' },\n        { id: 5, label: 'AIËØ≠Èü≥', description: 'ÂÆöÂà∂‰Ω†ÁöÑaiËØ≠Èü≥Âä©Êâã' },\n        { id: 6, label: 'ÈÄÄÂá∫ÁôªÂΩï', description: 'ÈÄÄÂá∫Âà∞ÁôªÂΩïÁïåÈù¢' }\n      ],\n      showVoiceCloneModal: false,\n      hasClonedVoice: false,\n      showAIVoiceModal: false\n    }\n  },\n  computed: {\n    filteredTimeBlocks() {\n      // Ê†πÊçÆÂΩìÂâçÈÄâ‰∏≠ÁöÑÊó∂Èó¥ÊÆµËøáÊª§Êó∂Èó¥Âùó\n      return this.timeBlocks.filter(block => {\n        const segmentMap = {\n          'morning': ['morning'],\n          'afternoon': ['afternoon'],\n          'evening': ['evening']\n        };\n        return segmentMap[this.currentTimeSegment]?.includes(block.timeBlockType);\n      });\n    },\n    currentUserId() {\n      const user = JSON.parse(localStorage.getItem('user') || 'null')\n      return user?._id || user?.id || null\n    }\n  },\n  created() {\n    this.fetchTasks()\n  },\n  activated() {\n    // Ëã•‰ΩøÁî®keep-aliveÔºåÂàôËøîÂõûÊó∂Ëá™Âä®Âà∑Êñ∞\n    this.fetchTasks()\n    // ËøîÂõûÊó∂‰πüËá™Âä®ÂàáÊç¢Âà∞ÂØπÂ∫îÊó∂Èó¥ÊÆµ\n    this.autoSwitchTimeSegment()\n  },\n  methods: {\n    handleSettingClick(setting) {\n      if (setting && (setting.id === 5 || setting.label === 'AIËØ≠Èü≥')) {\n        this.showVoiceCloneModal = true\n      } else if (setting && (setting.id === 6 || setting.label === 'ÈÄÄÂá∫ÁôªÂΩï')) {\n        try {\n          console.log('üîí [TaskPage] ÊâßË°åÈÄÄÂá∫ÁôªÂΩï')\n          localStorage.removeItem('token')\n          localStorage.removeItem('user')\n          localStorage.removeItem('auth_verified')\n        } finally {\n          this.sidebarOpen = false\n          this.$router.replace({ path: '/auth/login' })\n        }\n      }\n    },\n    onCloneSuccess() {\n      this.hasClonedVoice = true\n      this.showVoiceCloneModal = false\n      // ÊâìÂºÄAIËØ≠Èü≥Èô™‰º¥ËÆæÁΩÆÂºπÁ™ó\n      this.showAIVoiceModal = true\n    },\n    onApplyVoice() {\n      // ÂÖ≥Èó≠AIËØ≠Èü≥ÂºπÁ™óÔºõ‰øùÁïôÁÆÄÂçïÂ§ÑÁêÜ‰ª•‰∏çÂΩ±ÂìçÂéüÊúâÈÄªËæë\n      this.showAIVoiceModal = false\n    },\n    async fetchTasks() {\n      try {\n        console.log('üîÑ [TaskPage] ÂºÄÂßãËé∑Âèñ‰ªªÂä°ÂàóË°®...');\n        \n        // Êú™ÁôªÂΩïÈò≤Êä§\n        const userId = this.currentUserId\n        if (!userId) {\n          console.warn('‚ö†Ô∏è [TaskPage] Êú™ÁôªÂΩïÔºåË∑≥ËΩ¨Âà∞ÁôªÂΩïÈ°µ')\n          this.$router.replace({ path: '/auth/login', query: { redirect: this.$route.fullPath } })\n          return\n        }\n\n        // Áõ¥Êé•Ëé∑ÂèñÊâÄÊúâ‰ªªÂä°Ôºå‰∏çÂÜçÊåâÊó•ÊúüËøáÊª§\n        console.log('üìã [TaskPage] Ëé∑ÂèñÊâÄÊúâ‰ªªÂä°...');\n        const response = await api.tasks.getAllTasks({ userId })\n        console.log('üìã [TaskPage] ‰ªªÂä°ÂìçÂ∫î:', response)\n        \n        if (response.success && response.data) {\n          console.log('‚úÖ [TaskPage] ÊàêÂäüËé∑Âèñ‰ªªÂä°:', response.data.length);\n          this.processTasks(response.data)\n        } else {\n          console.warn('‚ö†Ô∏è [TaskPage] ‰ªªÂä°ÂìçÂ∫îÊ†ºÂºèÂºÇÂ∏∏Ôºå‰ΩøÁî®Ê®°ÊãüÊï∞ÊçÆ');\n          this.initializeMockData()\n        }\n      } catch (error) {\n        console.error('‚ùå [TaskPage] Ëé∑Âèñ‰ªªÂä°Â§±Ë¥•:', error)\n        // Âá∫ÈîôÊó∂‰ΩøÁî®Ê®°ÊãüÊï∞ÊçÆ\n        this.initializeMockData()\n      }\n    },\n    // Â§ñÈÉ®Âà∑Êñ∞‰ªªÂä°ÂàóË°®Ôºà‰æõÁï™ËåÑÈíüÂÆåÊàêÂêéËß¶ÂèëÔºâ\n    async refreshTasks() {\n      await this.fetchTasks()\n    },\n    \n    // ‰øÆÊîπprocessTasksÊñπÊ≥ïÔºåÂ§ÑÁêÜÂÆûÈôÖAPIËøîÂõûÁöÑ‰ªªÂä°Êï∞ÊçÆ\n    processTasks(tasks) {\n      console.log('üìä [TaskPage] ÂºÄÂßãÂ§ÑÁêÜ‰ªªÂä°Êï∞ÊçÆ:', tasks.length);\n      \n      // ÂàùÂßãÂåñÊó∂Èó¥ÂùóÔºåÊîØÊåÅÊõ¥ÁªÜÂàÜÁöÑÊó∂Èó¥ÊÆµ\n      this.timeBlocks = [\n        {\n          id: 1,\n          label: 'Êó©Êô® 0:00 - 8:00',\n          timeBlockType: 'morning',\n          tasks: [],\n          collapsed: false\n        },\n        {\n          id: 2,\n          label: '‰∏äÂçà 8:00 - 16:00',\n          timeBlockType: 'afternoon',\n          tasks: [],\n          collapsed: false\n        },\n        {\n          id: 3,\n          label: 'Êôö‰∏ä 16:00 - 24:00',\n          timeBlockType: 'evening',\n          tasks: [],\n          collapsed: false\n        }\n      ]\n      \n      // Ê∏ÖÁ©∫Áé∞Êúâ‰ªªÂä°\n      this.quadrants.forEach(q => (q.tasks = []));\n      this.unscheduledTasks = []\n      \n      // ÈÅçÂéÜ‰ªªÂä°Âπ∂ÂàÜÈÖç\n      tasks.forEach(task => {\n        console.log('üîç [TaskPage] Â§ÑÁêÜ‰ªªÂä°:', task.title, task);\n        \n        // ÂàÜÈÖçÂà∞ÂõõË±°Èôê\n        const quadrant = this.quadrants.find(q => q.id == task.quadrant)\n        if (quadrant) {\n          quadrant.tasks.push({\n            id: task._id,\n            title: task.title,\n            completed: task.completed\n          })\n        }\n        \n        // Âü∫‰∫éAPIËøîÂõûÁöÑÊñ∞Êï∞ÊçÆÁªìÊûÑÂ§ÑÁêÜÊó∂Èó¥‰ø°ÊÅØ\n        let taskTimeDisplay = 'Êú™ÊåáÂÆö';\n        let targetTimeBlockType = 'unscheduled';\n        \n        // Âà§Êñ≠ÊòØAIÁîüÊàêÁöÑÊó•Á®ãËøòÊòØÁî®Êà∑ÁîüÊàêÁöÑÊó•Á®ã\n        if (task.timeBlock && task.timeBlock.startTime) {\n          // AIÁîüÊàêÁöÑÊó•Á®ãÔºå‰ΩøÁî®timeBlock.startTime‰Ωú‰∏∫Âà§Êñ≠Ê†áÂáÜ\n          const hour = parseInt(task.timeBlock.startTime.split(':')[0]);\n          taskTimeDisplay = `${task.timeBlock.startTime} - ${task.timeBlock.endTime || this.addHour(task.timeBlock.startTime)}`;\n          \n          if (hour >= 0 && hour < 8) {\n            targetTimeBlockType = 'morning';\n          } else if (hour >= 8 && hour < 16) {\n            targetTimeBlockType = 'afternoon';\n          } else if (hour >= 16 && hour < 24) {\n            targetTimeBlockType = 'evening';\n          }\n          console.log(`üéØ [TaskPage] AIÁîüÊàê‰ªªÂä°\"${task.title}\"Ê†πÊçÆstartTimeËÆ°ÁÆóÊó∂Èó¥ÂùóÁ±ªÂûã: ${targetTimeBlockType}`);\n        } else if (task.time && task.time.trim()) {\n          // Áî®Êà∑ÁîüÊàêÁöÑÊó•Á®ãÔºå‰ΩøÁî®time‰Ωú‰∏∫Âà§Êñ≠Ê†áÂáÜ\n          const hour = parseInt(task.time.split(':')[0]);\n          taskTimeDisplay = `${task.time} - ${this.addHour(task.time)}`;\n          \n          if (hour >= 0 && hour < 8) {\n            targetTimeBlockType = 'morning';\n          } else if (hour >= 8 && hour < 16) {\n            targetTimeBlockType = 'afternoon';\n          } else if (hour >= 16 && hour < 24) {\n            targetTimeBlockType = 'evening';\n          }\n          console.log(`‚è∞ [TaskPage] Áî®Êà∑ÁîüÊàê‰ªªÂä°\"${task.title}\"Ê†πÊçÆtimeËÆ°ÁÆóÊó∂Èó¥ÂùóÁ±ªÂûã: ${targetTimeBlockType}`);\n        }\n        \n        const taskData = {\n          id: task._id,\n          title: task.title,\n          time: taskTimeDisplay,\n          priority: task.priority || 'medium',\n          completed: task.completed\n        };\n\n        // ÂàÜÈÖçÂà∞ÂØπÂ∫îÁöÑÊó∂Èó¥Âùó\n        if (targetTimeBlockType !== 'unscheduled') {\n          const timeBlock = this.timeBlocks.find(tb => tb.timeBlockType === targetTimeBlockType);\n          if (timeBlock) {\n            timeBlock.tasks.push(taskData);\n            console.log(`üìç [TaskPage] ‰ªªÂä°\"${task.title}\"ÂàÜÈÖçÂà∞${timeBlock.label}`);\n          } else {\n            this.unscheduledTasks.push(taskData);\n          }\n        } else {\n          // Ê≤°ÊúâÊó∂Èó¥ÁöÑ‰ªªÂä°ÊîæÂà∞Êú™ÊåáÂÆö‰ªªÂä°ÂàóË°®\n          this.unscheduledTasks.push(taskData);\n          console.log(`üìç [TaskPage] ‰ªªÂä°\"${task.title}\"ÂàÜÈÖçÂà∞Êú™ÊåáÂÆö‰ªªÂä°`);\n        }\n      })\n\n      // Ê∑ªÂä†ËØ¶ÁªÜÁöÑË∞ÉËØï‰ø°ÊÅØ\n      console.log('üìä [TaskPage] Êó∂Èó¥Âùó‰ªªÂä°ÂàÜÈÖçËØ¶ÊÉÖ:');\n      this.timeBlocks.forEach(tb => {\n        console.log(`  ${tb.label} (${tb.timeBlockType}): ${tb.tasks.length}‰∏™‰ªªÂä°`);\n        tb.tasks.forEach(task => {\n          console.log(`    - ${task.title} (${task.time})`);\n        });\n        \n        // Ëá™Âä®ÊäòÂè†Á©∫ÁöÑÊó∂Èó¥ÂùóÔºåÂ±ïÂºÄÊúâ‰ªªÂä°ÁöÑÊó∂Èó¥Âùó\n        if (tb.tasks.length === 0) {\n          tb.collapsed = true;\n        } else {\n          tb.collapsed = false;\n        }\n      });\n      \n      console.log(`üìã [TaskPage] Êú™ÊåáÂÆöÊó∂Èó¥‰ªªÂä°: ${this.unscheduledTasks.length}‰∏™`);\n      this.unscheduledTasks.forEach(task => {\n        console.log(`  - ${task.title}`);\n      });\n    },\n    \n    initializeMockData() {\n      console.log('‚ö†Ô∏è [TaskPage] APIË∞ÉÁî®Â§±Ë¥•Ôºå‰ΩøÁî®Ê®°ÊãüÊï∞ÊçÆ');\n      // ÂΩìAPIË∞ÉÁî®Â§±Ë¥•Êó∂ÁöÑÂ§áÁî®Ê®°ÊãüÊï∞ÊçÆÔºå‰ΩøÁî®‰∏éprocessTasksÁõ∏ÂêåÁöÑÁªìÊûÑ\n      this.timeBlocks = [\n        {\n          id: 1,\n          label: 'Êó©Êô® 0:00 - 8:00',\n          timeBlockType: 'morning',\n          tasks: [\n            {\n              id: 1,\n              title: 'Ëã±ËØ≠Êô®ËØªËÆ°Âàí',\n              time: '7:30 - 8:30',\n              priority: 'high',\n              completed: false\n            }\n          ],\n          collapsed: false\n        },\n        {\n          id: 2,\n          label: '‰∏äÂçà 8:00 - 16:00',\n          timeBlockType: 'afternoon',\n          tasks: [\n            {\n              id: 2,\n              title: 'ËÄÉÁ†îÊï∞Â≠¶Â§ç‰π†',\n              time: '9:00 - 11:00',\n              priority: 'high',\n              completed: true\n            },\n            {\n              id: 3,\n              title: 'ÊîøÊ≤ªÁü•ËØÜÁÇπËÉåËØµ',\n              time: '11:00 - 12:00',\n              priority: 'medium',\n              completed: false\n            },\n            {\n              id: 4,\n              title: '‰∏ì‰∏öËØæÁ¨îËÆ∞Êï¥ÁêÜ',\n              time: '14:00 - 16:00',\n              priority: 'medium',\n              completed: false\n            }\n          ],\n          collapsed: false\n        },\n        {\n          id: 3,\n          label: 'Êôö‰∏ä 16:00 - 24:00',\n          timeBlockType: 'evening',\n          tasks: [],\n          collapsed: true // ÂàùÂßãÊ≤°Êúâ‰ªªÂä°ÔºåËÆæ‰∏∫ÊäòÂè†\n        }\n      ]\n      \n      // Ê∑ªÂä†Êú™ÊåáÂÆöÊó∂Èó¥ÁöÑ‰ªªÂä°Ê°Ü\n      this.unscheduledTasks = [\n        {\n          id: 5,\n          title: 'Â§ç‰π†Ëã±ËØ≠ÂçïËØç',\n          priority: 'low',\n          completed: false\n        },\n        {\n          id: 6,\n          title: 'Êï¥ÁêÜÂ≠¶‰π†ËµÑÊñô',\n          priority: 'medium',\n          completed: false\n        }\n      ]\n      \n      this.quadrants = [\n        {\n          id: 1,\n          title: 'ÈáçË¶Å‰∏îÁ¥ßÊÄ•',\n          tasks: [\n            {\n              id: 2,\n              title: 'ËÄÉÁ†îÊï∞Â≠¶Â§ç‰π†',\n              completed: true\n            }\n          ]\n        },\n        {\n          id: 2,\n          title: 'ÈáçË¶Å‰∏çÁ¥ßÊÄ•',\n          tasks: [\n            {\n              id: 1,\n              title: 'Ëã±ËØ≠Êô®ËØªËÆ°Âàí',\n              completed: false\n            },\n            {\n              id: 4,\n              title: '‰∏ì‰∏öËØæÁ¨îËÆ∞Êï¥ÁêÜ',\n              completed: false\n            }\n          ]\n        },\n        {\n          id: 3,\n          title: 'Á¥ßÊÄ•‰∏çÈáçË¶Å',\n          tasks: [\n            {\n              id: 3,\n              title: 'ÊîøÊ≤ªÁü•ËØÜÁÇπËÉåËØµ',\n              completed: false\n            }\n          ]\n        },\n        {\n          id: 4,\n          title: '‰∏çÈáçË¶Å‰∏çÁ¥ßÊÄ•',\n          tasks: []\n        }\n      ]\n    },\n    \n    // Ê∑ªÂä†ÊäòÂè†/Â±ïÂºÄÂäüËÉΩ\n    toggleTimeBlockCollapse(timeBlockId) {\n      const timeBlock = this.timeBlocks.find(tb => tb.id === timeBlockId)\n      if (timeBlock) {\n        timeBlock.collapsed = !timeBlock.collapsed\n      }\n    },\n    \n    // Ê∑ªÂä†Êú™ÊåáÂÆöÊó∂Èó¥ÁöÑ‰ªªÂä°Âà∞ÂØπÂ∫îÊó∂Èó¥Âùó\n    moveToTimeBlock(task, timeBlockId) {\n      const taskIndex = this.unscheduledTasks.findIndex(t => t.id === task.id)\n      if (taskIndex > -1) {\n        this.unscheduledTasks.splice(taskIndex, 1)\n        const timeBlock = this.timeBlocks.find(tb => tb.id === timeBlockId)\n        if (timeBlock) {\n          timeBlock.tasks.push(task)\n        }\n      }\n    },\n    switchView(view) {\n      this.currentView = view\n    },\n    toggleSidebar() {\n      this.sidebarOpen = !this.sidebarOpen\n    },\n    openAddTask() {\n      this.showAddModal = true\n    },\n    closeAddTask() {\n      this.showAddModal = false\n    },\n    async handleAddTask(taskData) {\n      try {\n        console.log('üîÑ [TaskPage] ÂºÄÂßãÂàõÂª∫‰ªªÂä°:', taskData);\n        \n        const userId = this.currentUserId\n        if (!userId) {\n          console.warn('‚ö†Ô∏è [TaskPage] Êú™ÁôªÂΩïÔºåË∑≥ËΩ¨Âà∞ÁôªÂΩïÈ°µ')\n          this.$router.replace({ path: '/auth/login', query: { redirect: this.$route.fullPath } })\n          return\n        }\n        \n        const response = await api.tasks.createTask({\n          title: taskData.title,\n          description: taskData.description || '',\n          priority: taskData.priority || 'medium',\n          completed: false,\n          quadrant: taskData.quadrant,\n          date: taskData.date,\n          time: taskData.time,\n          userId,\n          timeBlockType: taskData.timeBlockType,\n          isScheduled: taskData.isScheduled\n        })\n        console.log('‚úÖ [TaskPage] ‰ªªÂä°ÂàõÂª∫ÊàêÂäü:', response)\n        \n        // ÈáçÊñ∞Ëé∑Âèñ‰ªªÂä°ÂàóË°®\n        await this.fetchTasks()\n        this.closeAddTask()\n      } catch (error) {\n        console.error('‚ùå [TaskPage] ÂàõÂª∫‰ªªÂä°Â§±Ë¥•:', error)\n        // Âá∫ÈîôÊó∂‰ΩøÁî®ÂéüÊúâÈÄªËæë\n        const task = {\n          id: Date.now(), // ‰ΩøÁî®Êó∂Èó¥Êà≥‰Ωú‰∏∫‰∏¥Êó∂ID\n          title: taskData.title,\n          time: taskData.time ? `${taskData.time} - ${this.addHour(taskData.time)}` : 'Êú™ÊåáÂÆö',\n          priority: taskData.priority || 'medium',\n          completed: false,\n          date: taskData.date\n        }\n        \n        // Ê∑ªÂä†Âà∞ÂØπÂ∫îÁöÑË±°Èôê\n        const quadrant = this.quadrants.find(q => q.id === taskData.quadrant)\n        if (quadrant) {\n          quadrant.tasks.push(task)\n        }\n        \n        // Ê†πÊçÆÊó∂Èó¥Ê∑ªÂä†Âà∞ÂØπÂ∫îÁöÑÊó∂Èó¥Âùó\n        if (taskData.time && taskData.timeBlockType) {\n          const timeBlock = this.timeBlocks.find(tb => tb.timeBlockType === taskData.timeBlockType);\n          if (timeBlock) {\n            timeBlock.tasks.push(task);\n            console.log(`‚úÖ [TaskPage] ‰ªªÂä°Ê∑ªÂä†Âà∞${timeBlock.label}:`, task.title);\n          }\n        }\n        \n        this.closeAddTask()\n      }\n    },\n    \n    // ËæÖÂä©ÊñπÊ≥ïÔºöÁªôÊó∂Èó¥Âä†‰∏ÄÂ∞èÊó∂\n    addHour(time) {\n      const [hour, minute] = time.split(':').map(Number);\n      const newHour = (hour + 1) % 24;\n      return `${newHour.toString().padStart(2, '0')}:${minute.toString().padStart(2, '0')}`;\n    },\n    \n    // ÊãñÂä®Áõ∏ÂÖ≥ÊñπÊ≥ï\n    startDrag(event) {\n      event.preventDefault();\n      this.isDragging = true;\n      \n      const clientX = event.clientX || (event.touches && event.touches[0].clientX);\n      const clientY = event.clientY || (event.touches && event.touches[0].clientY);\n      \n      this.dragOffset.x = clientX - this.btnPosition.x;\n      this.dragOffset.y = clientY - this.btnPosition.y;\n      \n      document.addEventListener('mousemove', this.onDrag);\n      document.addEventListener('mouseup', this.stopDrag);\n      document.addEventListener('touchmove', this.onDrag);\n      document.addEventListener('touchend', this.stopDrag);\n    },\n    \n    onDrag(event) {\n      if (!this.isDragging) return;\n      \n      const clientX = event.clientX || (event.touches && event.touches[0].clientX);\n      const clientY = event.clientY || (event.touches && event.touches[0].clientY);\n      \n      let newX = clientX - this.dragOffset.x;\n      let newY = clientY - this.dragOffset.y;\n      \n      // ÈôêÂà∂ÊåâÈíÆÂú®Â±èÂπïËåÉÂõ¥ÂÜÖ\n      const maxX = window.innerWidth - 56;\n      const maxY = window.innerHeight - 56;\n      \n      newX = Math.max(0, Math.min(newX, maxX));\n      newY = Math.max(0, Math.min(newY, maxY));\n      \n      this.btnPosition.x = newX;\n      this.btnPosition.y = newY;\n    },\n    \n    stopDrag() {\n      this.isDragging = false;\n      document.removeEventListener('mousemove', this.onDrag);\n      document.removeEventListener('mouseup', this.stopDrag);\n      document.removeEventListener('touchmove', this.onDrag);\n      document.removeEventListener('touchend', this.stopDrag);\n    },\n    async toggleTask(task) {\n      try {\n        const response = await api.tasks.toggleTaskStatus(task.id)\n        console.log('Toggled task status:', response)\n        \n        // Êõ¥Êñ∞Êú¨Âú∞Áä∂ÊÄÅ\n        const willBeCompleted = !task.completed\n        task.completed = willBeCompleted\n        \n        // Ëã•ÂàöÂÆåÊàêÔºåÊí≠ÊîæÈºìÂä±ËØ≠Èü≥\n        if (willBeCompleted) {\n          playRandomVoice('encourage')\n        }\n      } catch (error) {\n        console.error('Failed to toggle task status:', error)\n        // Âá∫ÈîôÊó∂‰ΩøÁî®ÂéüÊúâÈÄªËæë\n        task.completed = !task.completed\n      }\n    },\n    openPomodoro(task) {\n      this.$router.push({\n        path: '/pomodoro',\n        query: { task: task.title, taskId: task.id, from: '/task' }\n      })\n    },\n    \n    // ÂàáÊç¢Êó∂Èó¥ÊÆµ\n    switchTimeSegment(segment) {\n      console.log('üîÑ [TaskPage] ÂàáÊç¢Êó∂Èó¥ÊÆµ:', segment);\n      this.currentTimeSegment = segment;\n    },\n    \n    // Ê†πÊçÆÂΩìÂâçÊó∂Èó¥Ëá™Âä®ÂàáÊç¢Âà∞ÂØπÂ∫îÊó∂Èó¥ÊÆµ\n    autoSwitchTimeSegment() {\n      const now = new Date();\n      const currentHour = now.getHours();\n      \n      let targetSegment = 'morning'; // ÈªòËÆ§Êó©‰∏ä\n      \n      if (currentHour >= 0 && currentHour < 8) {\n        targetSegment = 'morning';\n      } else if (currentHour >= 8 && currentHour < 16) {\n        targetSegment = 'afternoon';\n      } else if (currentHour >= 16 && currentHour < 24) {\n        targetSegment = 'evening';\n      }\n      \n      console.log(`üïê [TaskPage] ÂΩìÂâçÊó∂Èó¥: ${currentHour}:00, Ëá™Âä®ÂàáÊç¢Âà∞: ${targetSegment}`);\n      this.currentTimeSegment = targetSegment;\n    }\n  },\n  mounted() {\n    console.log('üîÑ [TaskPage] ÁªÑ‰ª∂ÊåÇËΩΩÔºåÂºÄÂßãËé∑Âèñ‰ªªÂä°...');\n    // È°µÈù¢Âä†ËΩΩÊó∂Á´ãÂç≥Ëé∑Âèñ‰ªªÂä°\n    this.fetchTasks();\n    \n    // Ê†πÊçÆÂΩìÂâçÊó∂Èó¥Ëá™Âä®ÂàáÊç¢Âà∞ÂØπÂ∫îÊó∂Èó¥ÊÆµ\n    this.autoSwitchTimeSegment();\n    \n    // ÁõëÂê¨AIÁîüÊàêËÆ°Âàí‰∫ã‰ª∂ÔºåËá™Âä®Âà∑Êñ∞‰ªªÂä°ÂàóË°®\n    this._aiPlanHandler = () => {\n      console.log('üéØ [TaskPage] Êî∂Âà∞AIËÆ°ÂàíÁîüÊàê‰∫ã‰ª∂ÔºåÂà∑Êñ∞‰ªªÂä°ÂàóË°®');\n      this.refreshTasks();\n    }\n    window.addEventListener('ai-plan-generated', this._aiPlanHandler);\n    \n    // ÁõëÂê¨Á™óÂè£Â§ßÂ∞èÂèòÂåñÔºåË∞ÉÊï¥ÊåâÈíÆ‰ΩçÁΩÆ\n    this._resizeHandler = () => {\n      if (this.btnPosition.x > window.innerWidth - 56) {\n        this.btnPosition.x = window.innerWidth - 76;\n      }\n      if (this.btnPosition.y > window.innerHeight - 56) {\n        this.btnPosition.y = window.innerHeight - 146;\n      }\n    }\n    window.addEventListener('resize', this._resizeHandler);\n  },\n  beforeUnmount() {\n    if (this._aiPlanHandler) {\n      window.removeEventListener('ai-plan-generated', this._aiPlanHandler)\n      this._aiPlanHandler = null\n    }\n    if (this._resizeHandler) {\n      window.removeEventListener('resize', this._resizeHandler)\n      this._resizeHandler = null\n    }\n  }\n}\n</script>\n\n<style scoped>\n.home-container {\n  height: 100vh;\n  background: #f2f2f7;\n  display: flex;\n  flex-direction: column;\n}\n\n.header {\n  background: #fff;\n  padding: 12px 20px;\n  border-bottom: 0.5px solid #e5e5ea;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.settings-btn {\n  width: 32px;\n  height: 32px;\n  border-radius: 16px;\n  background: #f2f2f7;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: background 0.2s;\n}\n\n.settings-btn:hover {\n  background: #e5e5ea;\n}\n\n.view-toggle {\n  display: flex;\n  background: #f2f2f7;\n  border-radius: 20px;\n  padding: 4px;\n  width: 200px;\n}\n\n.toggle-btn {\n  flex: 1;\n  padding: 8px 16px;\n  border: none;\n  background: transparent;\n  border-radius: 16px;\n  font-size: 14px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n  color: #8e8e93;\n}\n\n.toggle-btn.active {\n  background: #667eea;\n  color: white;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n\n.content {\n  flex: 1;\n  overflow: hidden;\n}\n\n.sidebar {\n  position: fixed;\n  top: 0;\n  left: -300px;\n  width: 300px;\n  height: 100vh;\n  background: white;\n  box-shadow: 2px 0 8px rgba(0, 0, 0, 0.1);\n  transition: left 0.3s ease;\n  z-index: 1000;\n  overflow-y: auto;\n}\n\n.sidebar.open {\n  left: 0;\n}\n\n.sidebar-header {\n  padding: 20px;\n  border-bottom: 1px solid #e5e5ea;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.sidebar-title {\n  font-size: 18px;\n  font-weight: 600;\n}\n\n.close-sidebar {\n  width: 32px;\n  height: 32px;\n  border-radius: 16px;\n  background: #f2f2f7;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n}\n\n.sidebar-content {\n  padding: 20px;\n}\n\n.setting-item {\n  padding: 15px 0;\n  border-bottom: 1px solid #f2f2f7;\n}\n\n.setting-item:last-child {\n  border-bottom: none;\n}\n\n.setting-label {\n  font-size: 16px;\n  font-weight: 500;\n  margin-bottom: 8px;\n}\n\n.setting-description {\n  font-size: 14px;\n  color: #8e8e93;\n}\n\n\n\n.overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: transparent;\n  z-index: 999;\n}\n\n.ai-assistant-btn {\n  position: fixed;\n  width: 56px;\n  height: 56px;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  border-radius: 28px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n  font-size: 24px;\n  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  z-index: 100;\n  user-select: none;\n  touch-action: none;\n}\n\n.ai-assistant-btn:hover {\n  transform: scale(1.1);\n  box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);\n}\n\n.ai-assistant-btn:active {\n  transform: scale(0.95);\n}\n\n@media (max-width: 430px) {\n  .header {\n    padding: 10px 16px;\n  }\n  \n  .view-toggle {\n    width: 160px;\n  }\n  \n  .section {\n    margin: 16px;\n  }\n  \n  .quadrant-grid {\n    height: calc(100vh - 180px);\n  }\n  \n  .sidebar {\n    width: 280px;\n  }\n}\n\n/* Êó∂Èó¥ÊÆµÈÄâÊã©Âô®Ê†∑Âºè */\n.time-view-container {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n\n.time-segment-section {\n  padding: 16px 20px 8px;\n  background: white;\n  border-bottom: 1px solid #f2f2f7;\n}\n\n.section-title {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 12px;\n}\n\n.section-title h3 {\n  font-size: 18px;\n  font-weight: 600;\n  color: #1d1d1f;\n  margin: 0;\n}\n\n.view-all-link {\n  font-size: 14px;\n  color: #007aff;\n  text-decoration: none;\n  font-weight: 500;\n}\n\n.view-all-link:hover {\n  text-decoration: underline;\n}\n\n/* ÂàÜÊÆµÊéß‰ª∂Ê†∑Âºè - ÂèÇËÄÉhome111.html */\n.segmented {\n  display: flex;\n  background: #f2f2f7;\n  border-radius: 12px;\n  padding: 2px;\n  width: 100%;\n}\n\n.segmented button {\n  flex: 1;\n  padding: 10px 16px;\n  border: none;\n  background: transparent;\n  border-radius: 10px;\n  font-size: 14px;\n  font-weight: 500;\n  color: #8e8e93;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  white-space: nowrap;\n}\n\n.segmented button.active {\n  background: white;\n  color: #1d1d1f;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.06);\n}\n\n.segmented button:hover:not(.active) {\n  color: #1d1d1f;\n}\n\n/* ÂìçÂ∫îÂºèÈÄÇÈÖç */\n@media (max-width: 430px) {\n  .time-segment-section {\n    padding: 12px 16px 6px;\n  }\n  \n  .section-title h3 {\n    font-size: 16px;\n  }\n  \n  .segmented button {\n    padding: 8px 12px;\n    font-size: 13px;\n  }\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}