{"ast":null,"code":"import { withModifiers as _withModifiers, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createTextVNode as _createTextVNode, normalizeClass as _normalizeClass, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"modal-container ai-voice-modal-content\",\n  style: {\n    \"max-width\": \"420px\",\n    \"border-radius\": \"36px\",\n    \"overflow\": \"hidden\"\n  }\n};\nconst _hoisted_2 = {\n  class: \"modal-header\"\n};\nconst _hoisted_3 = {\n  class: \"modal-title\"\n};\nconst _hoisted_4 = {\n  width: \"18\",\n  height: \"18\",\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  style: {\n    \"vertical-align\": \"middle\"\n  }\n};\nconst _hoisted_5 = {\n  class: \"modal-body\"\n};\nconst _hoisted_6 = {\n  class: \"segmented-control\"\n};\nconst _hoisted_7 = {\n  key: 0,\n  class: \"form-section\"\n};\nconst _hoisted_8 = {\n  class: \"form-group\"\n};\nconst _hoisted_9 = {\n  class: \"form-group\"\n};\nconst _hoisted_10 = {\n  class: \"chip-group\"\n};\nconst _hoisted_11 = [\"onClick\"];\nconst _hoisted_12 = {\n  class: \"form-group\"\n};\nconst _hoisted_13 = {\n  class: \"chip-group\"\n};\nconst _hoisted_14 = [\"onClick\"];\nconst _hoisted_15 = {\n  class: \"form-group\"\n};\nconst _hoisted_16 = {\n  class: \"form-group\"\n};\nconst _hoisted_17 = {\n  key: 1,\n  class: \"form-section\"\n};\nconst _hoisted_18 = {\n  class: \"form-group\"\n};\nconst _hoisted_19 = {\n  class: \"form-group\"\n};\nconst _hoisted_20 = {\n  key: 2,\n  class: \"result-section\"\n};\nconst _hoisted_21 = {\n  key: 0,\n  class: \"audio-card\"\n};\nconst _hoisted_22 = {\n  class: \"audio-player\"\n};\nconst _hoisted_23 = [\"src\"];\nconst _hoisted_24 = {\n  key: 1,\n  class: \"audio-card\"\n};\nconst _hoisted_25 = {\n  class: \"audio-player\"\n};\nconst _hoisted_26 = [\"src\"];\nconst _hoisted_27 = {\n  key: 3,\n  class: \"form-error\"\n};\nconst _hoisted_28 = {\n  class: \"modal-footer\"\n};\nconst _hoisted_29 = [\"disabled\"];\nconst _hoisted_30 = [\"disabled\"];\nconst _hoisted_31 = {\n  key: 0,\n  class: \"loading-overlay\"\n};\nimport { ref, watch } from 'vue';\nimport aivoiceAPI from '@/api/aivoice.js';\nimport VoiceManagerModal from './VoiceManagerModal.vue';\nexport default {\n  __name: 'AIVoiceModal',\n  props: {\n    userId: {\n      type: String,\n      default: ''\n    }\n  },\n  emits: ['close', 'apply-voice'],\n  setup(__props, {\n    emit: __emit\n  }) {\n    /* global defineEmits, defineProps */\n    const emit = __emit;\n    const props = __props;\n    // 避免未使用告警\n    void props.userId;\n    const mode = ref('ai');\n    const mimicTarget = ref('');\n    const encourageStyles = ['温柔', '热情', '专业', '调侃'];\n    const criticizeStyles = ['委婉', '严厉', '专业', '调侃'];\n    const encourageStyle = ref(encourageStyles[0]);\n    const criticizeStyle = ref(criticizeStyles[0]);\n    const encourageText = ref('');\n    const criticizeText = ref('');\n    const loading = ref(false);\n    const errorMsg = ref('');\n    const audioUrls = ref({\n      encourage: '',\n      criticize: ''\n    });\n    const aiGenerated = ref(false);\n    const cacheBuster = ref(0);\n    const retryCount = ref({\n      encourage: 0,\n      criticize: 0\n    });\n    const showVoiceManager = ref(false);\n    function close() {\n      if (loading.value) return;\n      emit('close');\n    }\n    function openManager() {\n      showVoiceManager.value = true;\n    }\n    function resolveUserId() {\n      if (props.userId) return props.userId;\n      try {\n        const user = JSON.parse(localStorage.getItem('user') || 'null');\n        return user?._id || user?.id || localStorage.getItem('userId') || '';\n      } catch (_) {\n        return localStorage.getItem('userId') || '';\n      }\n    }\n    function toHttps(url) {\n      if (!url) return url;\n      if (url.startsWith('http://')) return 'https://' + url.slice('http://'.length);\n      return url;\n    }\n    function withBuster(url) {\n      if (!url) return url;\n      const sep = url.includes('?') ? '&' : '?';\n      return `${url}${sep}v=${cacheBuster.value}`;\n    }\n    function onAudioError(kind) {\n      if (!retryCount.value[kind]) retryCount.value[kind] = 0;\n      if (retryCount.value[kind] >= 3) return;\n      retryCount.value[kind] += 1;\n      cacheBuster.value = Date.now();\n    }\n    // 已移除跨域可用性轮询，避免触发 CORS 报错\n    async function synthesizeVoice() {\n      if (mode.value === 'custom' && (!encourageText.value || !criticizeText.value)) {\n        errorMsg.value = '请填写完整文本';\n        return;\n      }\n      if (mode.value === 'ai' && !aiGenerated.value) {\n        // 改为真实调用 imitate-text\n        loading.value = true;\n        errorMsg.value = '';\n        try {\n          const res = await aivoiceAPI.imitateText(mimicTarget.value || '默认', encourageStyle.value, criticizeStyle.value);\n          encourageText.value = res?.data?.encourage || res?.encourage || '';\n          criticizeText.value = res?.data?.criticize || res?.criticize || '';\n          if (!encourageText.value || !criticizeText.value) throw new Error('AI文本生成失败');\n          aiGenerated.value = true;\n          loading.value = false;\n        } catch (err) {\n          loading.value = false;\n          errorMsg.value = err?.message || 'AI文本生成失败';\n        }\n        return;\n      }\n      // 第二次点击或自定义模式：调用后端合成\n      if (!encourageText.value || !criticizeText.value) {\n        errorMsg.value = '请填写完整文本';\n        return;\n      }\n      const userId = resolveUserId();\n      if (!userId) {\n        errorMsg.value = '未登录或缺少用户标识，请先登录';\n        return;\n      }\n      loading.value = true;\n      errorMsg.value = '';\n      audioUrls.value = {\n        encourage: '',\n        criticize: ''\n      };\n      retryCount.value = {\n        encourage: 0,\n        criticize: 0\n      };\n      try {\n        const res = await aivoiceAPI.synthesizeVoice(userId, encourageText.value, criticizeText.value);\n        const encUrl = toHttps(res?.data?.encourage_url || res?.encourage_url || '');\n        const criUrl = toHttps(res?.data?.criticize_url || res?.criticize_url || '');\n        audioUrls.value.encourage = encUrl;\n        audioUrls.value.criticize = criUrl;\n        cacheBuster.value = Date.now();\n        aiGenerated.value = false;\n        loading.value = false;\n        if (!audioUrls.value.encourage && !audioUrls.value.criticize) {\n          throw new Error('未返回音频链接');\n        }\n      } catch (err) {\n        loading.value = false;\n        errorMsg.value = err?.message || '合成失败，请稍后重试';\n      }\n    }\n    function applyVoice() {\n      emit('apply-voice');\n      close();\n    }\n    watch(() => mode.value, () => {\n      aiGenerated.value = false;\n      errorMsg.value = '';\n      encourageText.value = '';\n      criticizeText.value = '';\n      audioUrls.value = {\n        encourage: '',\n        criticize: ''\n      };\n    });\n    return (_ctx, _cache) => {\n      return _openBlock(), _createElementBlock(\"div\", {\n        class: \"modal-overlay ai-voice-modal-overlay\",\n        onClick: _withModifiers(close, [\"self\"])\n      }, [_createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"header\", _hoisted_2, [_createElementVNode(\"a\", {\n        href: \"#\",\n        class: \"header-link\",\n        onClick: _withModifiers(openManager, [\"prevent\"])\n      }, \"管理已有语音\"), _createElementVNode(\"h2\", _hoisted_3, [(_openBlock(), _createElementBlock(\"svg\", _hoisted_4, _cache[10] || (_cache[10] = [_createElementVNode(\"path\", {\n        d: \"M12 3a3 3 0 0 1 3 3v5a3 3 0 1 1-6 0V6a3 3 0 0 1 3-3z\",\n        fill: \"#4F46E5\"\n      }, null, -1), _createElementVNode(\"path\", {\n        d: \"M5 11a1 1 0 0 1 2 0v1a5 5 0 1 0 10 0v-1a1 1 0 1 1 2 0v1a7 7 0 0 1-6 6.93V21a1 1 0 1 1-2 0v-2.07A7 7 0 0 1 5 12v-1z\",\n        fill: \"#818CF8\"\n      }, null, -1)]))), _cache[11] || (_cache[11] = _createTextVNode(\" AI语音陪伴设置 \", -1))]), _createElementVNode(\"button\", {\n        class: \"icon-button\",\n        onClick: close,\n        title: \"关闭\"\n      }, \"✕\")]), _createElementVNode(\"main\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"button\", {\n        class: _normalizeClass({\n          active: mode.value === 'ai'\n        }),\n        onClick: _cache[0] || (_cache[0] = $event => mode.value = 'ai')\n      }, \"AI生成文本\", 2), _createElementVNode(\"button\", {\n        class: _normalizeClass({\n          active: mode.value === 'custom'\n        }),\n        onClick: _cache[1] || (_cache[1] = $event => mode.value = 'custom')\n      }, \"自定义文本\", 2)]), mode.value === 'ai' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [!aiGenerated.value ? (_openBlock(), _createElementBlock(_Fragment, {\n        key: 0\n      }, [_createElementVNode(\"div\", _hoisted_8, [_cache[12] || (_cache[12] = _createElementVNode(\"label\", null, \"模仿对象\", -1)), _withDirectives(_createElementVNode(\"input\", {\n        \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => mimicTarget.value = $event),\n        type: \"text\",\n        placeholder: \"例如：一位严厉的健身教练\"\n      }, null, 512), [[_vModelText, mimicTarget.value]])]), _createElementVNode(\"div\", _hoisted_9, [_cache[13] || (_cache[13] = _createElementVNode(\"label\", null, \"鼓励风格\", -1)), _createElementVNode(\"div\", _hoisted_10, [(_openBlock(), _createElementBlock(_Fragment, null, _renderList(encourageStyles, style => {\n        return _createElementVNode(\"button\", {\n          key: style,\n          class: _normalizeClass([\"chip\", {\n            active: encourageStyle.value === style\n          }]),\n          onClick: $event => encourageStyle.value = style\n        }, _toDisplayString(style), 11, _hoisted_11);\n      }), 64))])]), _createElementVNode(\"div\", _hoisted_12, [_cache[14] || (_cache[14] = _createElementVNode(\"label\", null, \"批评风格\", -1)), _createElementVNode(\"div\", _hoisted_13, [(_openBlock(), _createElementBlock(_Fragment, null, _renderList(criticizeStyles, style => {\n        return _createElementVNode(\"button\", {\n          key: style,\n          class: _normalizeClass([\"chip\", {\n            active: criticizeStyle.value === style\n          }]),\n          onClick: $event => criticizeStyle.value = style\n        }, _toDisplayString(style), 11, _hoisted_14);\n      }), 64))])])], 64)) : (_openBlock(), _createElementBlock(_Fragment, {\n        key: 1\n      }, [_createElementVNode(\"div\", _hoisted_15, [_cache[15] || (_cache[15] = _createElementVNode(\"label\", null, \"鼓励文本\", -1)), _withDirectives(_createElementVNode(\"textarea\", {\n        \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => encourageText.value = $event),\n        rows: \"3\",\n        placeholder: \"AI生成的鼓励语音内容\"\n      }, null, 512), [[_vModelText, encourageText.value]]), _cache[16] || (_cache[16] = _createElementVNode(\"span\", {\n        class: \"ai-tag\"\n      }, \"AI智能生成，可修改\", -1))]), _createElementVNode(\"div\", _hoisted_16, [_cache[17] || (_cache[17] = _createElementVNode(\"label\", null, \"批评文本\", -1)), _withDirectives(_createElementVNode(\"textarea\", {\n        \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => criticizeText.value = $event),\n        rows: \"3\",\n        placeholder: \"AI生成的批评语音内容\"\n      }, null, 512), [[_vModelText, criticizeText.value]]), _cache[18] || (_cache[18] = _createElementVNode(\"span\", {\n        class: \"ai-tag\"\n      }, \"AI智能生成，可修改\", -1))])], 64))])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_17, [_createElementVNode(\"div\", _hoisted_18, [_cache[19] || (_cache[19] = _createElementVNode(\"label\", null, \"鼓励文本\", -1)), _withDirectives(_createElementVNode(\"textarea\", {\n        \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => encourageText.value = $event),\n        rows: \"3\",\n        placeholder: \"请输入鼓励语音内容\"\n      }, null, 512), [[_vModelText, encourageText.value]])]), _createElementVNode(\"div\", _hoisted_19, [_cache[20] || (_cache[20] = _createElementVNode(\"label\", null, \"批评文本\", -1)), _withDirectives(_createElementVNode(\"textarea\", {\n        \"onUpdate:modelValue\": _cache[6] || (_cache[6] = $event => criticizeText.value = $event),\n        rows: \"3\",\n        placeholder: \"请输入批评语音内容\"\n      }, null, 512), [[_vModelText, criticizeText.value]])])])), audioUrls.value.encourage || audioUrls.value.criticize ? (_openBlock(), _createElementBlock(\"div\", _hoisted_20, [audioUrls.value.encourage ? (_openBlock(), _createElementBlock(\"div\", _hoisted_21, [_cache[21] || (_cache[21] = _createElementVNode(\"span\", {\n        class: \"audio-label\"\n      }, \"鼓励音频\", -1)), _createElementVNode(\"div\", _hoisted_22, [_createElementVNode(\"audio\", {\n        src: withBuster(audioUrls.value.encourage),\n        controls: \"\",\n        onError: _cache[7] || (_cache[7] = $event => onAudioError('encourage'))\n      }, null, 40, _hoisted_23)])])) : _createCommentVNode(\"\", true), audioUrls.value.criticize ? (_openBlock(), _createElementBlock(\"div\", _hoisted_24, [_cache[22] || (_cache[22] = _createElementVNode(\"span\", {\n        class: \"audio-label\"\n      }, \"批评音频\", -1)), _createElementVNode(\"div\", _hoisted_25, [_createElementVNode(\"audio\", {\n        src: withBuster(audioUrls.value.criticize),\n        controls: \"\",\n        onError: _cache[8] || (_cache[8] = $event => onAudioError('criticize'))\n      }, null, 40, _hoisted_26)])])) : _createCommentVNode(\"\", true)])) : _createCommentVNode(\"\", true), errorMsg.value ? (_openBlock(), _createElementBlock(\"p\", _hoisted_27, _toDisplayString(errorMsg.value), 1)) : _createCommentVNode(\"\", true)]), _createElementVNode(\"footer\", _hoisted_28, [_createElementVNode(\"button\", {\n        class: \"btn btn-secondary\",\n        onClick: close\n      }, \"关闭\"), audioUrls.value.encourage || audioUrls.value.criticize ? (_openBlock(), _createElementBlock(\"button\", {\n        key: 0,\n        class: \"btn btn-primary\",\n        onClick: applyVoice,\n        disabled: loading.value\n      }, \"应用语音\", 8, _hoisted_29)) : (_openBlock(), _createElementBlock(\"button\", {\n        key: 1,\n        class: \"btn btn-primary\",\n        onClick: synthesizeVoice,\n        disabled: loading.value || mode.value === 'custom' && (!encourageText.value || !criticizeText.value) || mode.value === 'ai' && loading.value\n      }, _toDisplayString(mode.value === 'ai' ? aiGenerated.value ? loading.value ? '合成中...' : '合成语音' : loading.value ? '生成中...' : '生成文本' : loading.value ? '合成中...' : '合成语音'), 9, _hoisted_30))]), loading.value ? (_openBlock(), _createElementBlock(\"div\", _hoisted_31, _cache[23] || (_cache[23] = [_createElementVNode(\"div\", {\n        class: \"spinner\"\n      }, null, -1), _createElementVNode(\"p\", null, \"请等待片刻，正在处理...\", -1)]))) : _createCommentVNode(\"\", true), showVoiceManager.value ? (_openBlock(), _createBlock(VoiceManagerModal, {\n        key: 1,\n        userId: resolveUserId(),\n        onClose: _cache[9] || (_cache[9] = $event => showVoiceManager.value = false)\n      }, null, 8, [\"userId\"])) : _createCommentVNode(\"\", true)])]);\n    };\n  }\n};","map":{"version":3,"names":["ref","watch","aivoiceAPI","VoiceManagerModal","emit","__emit","props","__props","userId","mode","mimicTarget","encourageStyles","criticizeStyles","encourageStyle","criticizeStyle","encourageText","criticizeText","loading","errorMsg","audioUrls","encourage","criticize","aiGenerated","cacheBuster","retryCount","showVoiceManager","close","value","openManager","resolveUserId","user","JSON","parse","localStorage","getItem","_id","id","_","toHttps","url","startsWith","slice","length","withBuster","sep","includes","onAudioError","kind","Date","now","synthesizeVoice","res","imitateText","data","Error","err","message","encUrl","encourage_url","criUrl","criticize_url","applyVoice","_createElementBlock","class","onClick","_withModifiers","_createElementVNode","_hoisted_1","_hoisted_2","href","_hoisted_3","_hoisted_4","_cache","d","fill","title","_hoisted_5","_hoisted_6","_normalizeClass","active","$event","_hoisted_7","_Fragment","key","_hoisted_8","type","placeholder","_hoisted_9","_hoisted_10","_renderList","style","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","rows","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","src","controls","onError","_hoisted_24","_hoisted_25","_hoisted_27","_toDisplayString","_hoisted_28","disabled","_hoisted_29","_hoisted_30","_hoisted_31","_createBlock","onClose"],"sources":["/root/timer/src/components/aivoice/AIVoiceModal.vue"],"sourcesContent":["<template>\n  <div class=\"modal-overlay ai-voice-modal-overlay\" @click.self=\"close\">\n    <div class=\"modal-container ai-voice-modal-content\" style=\"max-width: 420px; border-radius: 36px; overflow: hidden;\">\n      <header class=\"modal-header\">\n        <a href=\"#\" class=\"header-link\" @click.prevent=\"openManager\">管理已有语音</a>\n        <h2 class=\"modal-title\">\n          <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" style=\"vertical-align: middle\"><path d=\"M12 3a3 3 0 0 1 3 3v5a3 3 0 1 1-6 0V6a3 3 0 0 1 3-3z\" fill=\"#4F46E5\"/><path d=\"M5 11a1 1 0 0 1 2 0v1a5 5 0 1 0 10 0v-1a1 1 0 1 1 2 0v1a7 7 0 0 1-6 6.93V21a1 1 0 1 1-2 0v-2.07A7 7 0 0 1 5 12v-1z\" fill=\"#818CF8\"/></svg>\n          AI语音陪伴设置\n        </h2>\n        <button class=\"icon-button\" @click=\"close\" title=\"关闭\">✕</button>\n      </header>\n      <main class=\"modal-body\">\n        <div class=\"segmented-control\">\n          <button :class=\"{ active: mode==='ai' }\" @click=\"mode='ai'\">AI生成文本</button>\n          <button :class=\"{ active: mode==='custom' }\" @click=\"mode='custom'\">自定义文本</button>\n        </div>\n\n        <div class=\"form-section\" v-if=\"mode==='ai'\">\n          <template v-if=\"!aiGenerated\">\n          <div class=\"form-group\">\n            <label>模仿对象</label>\n              <input v-model=\"mimicTarget\" type=\"text\" placeholder=\"例如：一位严厉的健身教练\" />\n          </div>\n          <div class=\"form-group\">\n            <label>鼓励风格</label>\n              <div class=\"chip-group\">\n                <button v-for=\"style in encourageStyles\" :key=\"style\" class=\"chip\" :class=\"{ active: encourageStyle===style }\" @click=\"encourageStyle=style\">{{ style }}</button>\n              </div>\n            </div>\n            <div class=\"form-group\">\n              <label>批评风格</label>\n              <div class=\"chip-group\">\n                <button v-for=\"style in criticizeStyles\" :key=\"style\" class=\"chip\" :class=\"{ active: criticizeStyle===style }\" @click=\"criticizeStyle=style\">{{ style }}</button>\n              </div>\n            </div>\n          </template>\n          <template v-else>\n            <div class=\"form-group\">\n              <label>鼓励文本</label>\n              <textarea v-model=\"encourageText\" rows=\"3\" placeholder=\"AI生成的鼓励语音内容\"></textarea>\n              <span class=\"ai-tag\">AI智能生成，可修改</span>\n          </div>\n          <div class=\"form-group\">\n              <label>批评文本</label>\n              <textarea v-model=\"criticizeText\" rows=\"3\" placeholder=\"AI生成的批评语音内容\"></textarea>\n              <span class=\"ai-tag\">AI智能生成，可修改</span>\n            </div>\n          </template>\n        </div>\n\n        <div class=\"form-section\" v-else>\n          <div class=\"form-group\">\n            <label>鼓励文本</label>\n            <textarea v-model=\"encourageText\" rows=\"3\" placeholder=\"请输入鼓励语音内容\"></textarea>\n          </div>\n          <div class=\"form-group\">\n            <label>批评文本</label>\n            <textarea v-model=\"criticizeText\" rows=\"3\" placeholder=\"请输入批评语音内容\"></textarea>\n          </div>\n        </div>\n\n        <div v-if=\"audioUrls.encourage || audioUrls.criticize\" class=\"result-section\">\n          <div v-if=\"audioUrls.encourage\" class=\"audio-card\">\n            <span class=\"audio-label\">鼓励音频</span>\n            <div class=\"audio-player\">\n              <audio :src=\"withBuster(audioUrls.encourage)\" controls @error=\"onAudioError('encourage')\" />\n            </div>\n          </div>\n          <div v-if=\"audioUrls.criticize\" class=\"audio-card\">\n            <span class=\"audio-label\">批评音频</span>\n            <div class=\"audio-player\">\n              <audio :src=\"withBuster(audioUrls.criticize)\" controls @error=\"onAudioError('criticize')\" />\n            </div>\n        </div>\n        </div>\n\n        <p v-if=\"errorMsg\" class=\"form-error\">{{ errorMsg }}</p>\n      </main>\n      <footer class=\"modal-footer\">\n        <button class=\"btn btn-secondary\" @click=\"close\">关闭</button>\n        <button\n          v-if=\"audioUrls.encourage || audioUrls.criticize\"\n          class=\"btn btn-primary\"\n          @click=\"applyVoice\"\n          :disabled=\"loading\"\n        >应用语音</button>\n        <button\n          v-else\n          class=\"btn btn-primary\"\n          @click=\"synthesizeVoice\"\n          :disabled=\"loading || (mode==='custom' && (!encourageText || !criticizeText)) || (mode==='ai' && loading)\"\n        >{{\n            mode === 'ai'\n              ? (aiGenerated ? (loading ? '合成中...' : '合成语音') : (loading ? '生成中...' : '生成文本'))\n              : (loading ? '合成中...' : '合成语音')\n        }}</button>\n      </footer>\n\n      <div v-if=\"loading\" class=\"loading-overlay\">\n        <div class=\"spinner\"></div>\n        <p>请等待片刻，正在处理...</p>\n      </div>\n\n      <VoiceManagerModal v-if=\"showVoiceManager\" :userId=\"resolveUserId()\" @close=\"showVoiceManager=false\" />\n    </div>\n  </div>\n</template>\n\n<script setup>\n/* global defineEmits, defineProps */\nimport { ref, watch } from 'vue';\nimport aivoiceAPI from '@/api/aivoice.js'\nimport VoiceManagerModal from './VoiceManagerModal.vue'\nconst emit = defineEmits(['close', 'apply-voice']);\nconst props = defineProps({\n  userId: { type: String, default: '' }\n});\n// 避免未使用告警\nvoid props.userId;\nconst mode = ref('ai');\nconst mimicTarget = ref('');\nconst encourageStyles = ['温柔', '热情', '专业', '调侃'];\nconst criticizeStyles = ['委婉', '严厉', '专业', '调侃'];\nconst encourageStyle = ref(encourageStyles[0]);\nconst criticizeStyle = ref(criticizeStyles[0]);\nconst encourageText = ref('');\nconst criticizeText = ref('');\nconst loading = ref(false);\nconst errorMsg = ref('');\nconst audioUrls = ref({ encourage: '', criticize: '' });\nconst aiGenerated = ref(false);\nconst cacheBuster = ref(0);\nconst retryCount = ref({ encourage: 0, criticize: 0 });\nconst showVoiceManager = ref(false);\n\nfunction close() {\n  if (loading.value) return;\n  emit('close');\n}\nfunction openManager() { showVoiceManager.value = true }\nfunction resolveUserId() {\n  if (props.userId) return props.userId\n  try {\n    const user = JSON.parse(localStorage.getItem('user') || 'null')\n    return user?._id || user?.id || localStorage.getItem('userId') || ''\n  } catch (_) {\n    return localStorage.getItem('userId') || ''\n  }\n}\nfunction toHttps(url) {\n  if (!url) return url\n  if (url.startsWith('http://')) return 'https://' + url.slice('http://'.length)\n  return url\n}\nfunction withBuster(url) {\n  if (!url) return url\n  const sep = url.includes('?') ? '&' : '?'\n  return `${url}${sep}v=${cacheBuster.value}`\n}\nfunction onAudioError(kind) {\n  if (!retryCount.value[kind]) retryCount.value[kind] = 0\n  if (retryCount.value[kind] >= 3) return\n  retryCount.value[kind] += 1\n  cacheBuster.value = Date.now()\n}\n// 已移除跨域可用性轮询，避免触发 CORS 报错\nasync function synthesizeVoice() {\n  if (mode.value === 'custom' && (!encourageText.value || !criticizeText.value)) {\n    errorMsg.value = '请填写完整文本';\n    return;\n  }\n  if (mode.value === 'ai' && !aiGenerated.value) {\n    // 改为真实调用 imitate-text\n    loading.value = true;\n    errorMsg.value = '';\n    try {\n      const res = await aivoiceAPI.imitateText(mimicTarget.value || '默认', encourageStyle.value, criticizeStyle.value)\n      encourageText.value = res?.data?.encourage || res?.encourage || ''\n      criticizeText.value = res?.data?.criticize || res?.criticize || ''\n      if (!encourageText.value || !criticizeText.value) throw new Error('AI文本生成失败')\n      aiGenerated.value = true;\n      loading.value = false;\n    } catch (err) {\n      loading.value = false;\n      errorMsg.value = err?.message || 'AI文本生成失败';\n    }\n    return;\n  }\n  // 第二次点击或自定义模式：调用后端合成\n  if (!encourageText.value || !criticizeText.value) {\n    errorMsg.value = '请填写完整文本';\n    return;\n  }\n  const userId = resolveUserId()\n  if (!userId) {\n    errorMsg.value = '未登录或缺少用户标识，请先登录';\n    return;\n  }\n  loading.value = true;\n  errorMsg.value = '';\n  audioUrls.value = { encourage: '', criticize: '' };\n  retryCount.value = { encourage: 0, criticize: 0 }\n  try {\n    const res = await aivoiceAPI.synthesizeVoice(userId, encourageText.value, criticizeText.value)\n    const encUrl = toHttps(res?.data?.encourage_url || res?.encourage_url || '')\n    const criUrl = toHttps(res?.data?.criticize_url || res?.criticize_url || '')\n    audioUrls.value.encourage = encUrl\n    audioUrls.value.criticize = criUrl\n    cacheBuster.value = Date.now()\n    aiGenerated.value = false;\n    loading.value = false;\n    if (!audioUrls.value.encourage && !audioUrls.value.criticize) {\n      throw new Error('未返回音频链接');\n    }\n  } catch (err) {\n    loading.value = false;\n    errorMsg.value = err?.message || '合成失败，请稍后重试';\n  }\n}\nfunction applyVoice() {\n  emit('apply-voice');\n  close();\n}\nwatch(() => mode.value, () => {\n  aiGenerated.value = false;\n  errorMsg.value = '';\n  encourageText.value = '';\n  criticizeText.value = '';\n  audioUrls.value = { encourage: '', criticize: '' };\n});\n</script>\n\n<style scoped>\n/* 设计色板与基础变量（局部作用域） */\n:root { --color-primary: #4F46E5; --color-bg: #F8F9FA; --color-surface: #FFFFFF; --color-text-primary: #111827; --color-text-secondary: #374151; --color-text-tertiary: #6B7280; --color-border: #E5E7EB; --radius-lg: 36px; --radius-md: 12px; --radius-full: 999px; }\n\n.modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 2000; padding: 16px; }\n.modal-container { background: #ffffff; border-radius: var(--radius-lg); box-shadow: 0 16px 40px rgba(17,24,39,0.18); width: 100%; display: flex; flex-direction: column; position: relative; overflow: hidden; animation: fadeIn 0.3s ease; max-height: 90vh; }\n@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }\n\n.modal-header { padding: 16px 24px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--color-border); }\n.modal-title { font-size: 18px; font-weight: 600; color: var(--color-text-primary); margin: 0; display: flex; align-items: center; gap: 8px; }\n.header-link { font-size: 14px; color: var(--color-primary); text-decoration: none; font-weight: 500; }\n.icon-button { background: none; border: none; font-size: 18px; color: var(--color-text-tertiary); cursor: pointer; padding: 6px; border-radius: var(--radius-full); width: 32px; height: 32px; display: inline-flex; align-items: center; justify-content: center; }\n.icon-button:hover { background-color: var(--color-bg); }\n\n.modal-body { padding: 24px; overflow-y: auto; background: #ffffff; }\n.modal-footer { padding: 16px 24px; display: flex; justify-content: flex-end; gap: 12px; border-top: 1px solid var(--color-border); }\n\n/* 按钮样式（按截图） */\n.btn { height: 46px; padding: 0 26px; border: none; border-radius: 14px; font-size: 16px; font-weight: 800; cursor: pointer; transition: transform .12s ease, box-shadow .12s ease, background .2s ease; display: inline-flex; align-items: center; justify-content: center; gap: 8px; }\n.btn:active { transform: translateY(0); }\n.btn-primary { background: linear-gradient(90deg,#6C4FE5,#8A8FF8); color: #fff; box-shadow: 0 12px 30px rgba(108,79,229,0.35); }\n.btn-primary:hover { background: linear-gradient(90deg,#5d45d1,#7f87ff); box-shadow: 0 14px 36px rgba(108,79,229,0.42); }\n.btn-primary:disabled { background: #C7C9FF; color: #fff; cursor: not-allowed; box-shadow: none; }\n.btn-secondary { background: #E9EEF5; color: var(--color-text-primary); box-shadow: inset 0 -1px 0 rgba(0,0,0,0.02); }\n.btn-secondary:hover { background: #E2E8F0; }\n.btn.fluid { width: 100%; }\n\n/* 分段控制 */\n.segmented-control { display: flex; background-color: var(--color-bg); border-radius: var(--radius-md); padding: 4px; margin-bottom: 24px; }\n.segmented-control button { flex: 1; padding: 10px 12px; border: none; background: transparent; border-radius: 12px; font-size: 15px; font-weight: 800; color: var(--color-text-secondary); cursor: pointer; transition: all 0.2s ease; }\n.segmented-control button.active { background: #fff; color: var(--color-text-primary); box-shadow: 0 6px 16px rgba(0,0,0,0.06); }\n\n/* 表单 */\n.form-group { margin-bottom: 20px; }\n.form-group label { display: block; font-size: 14px; font-weight: 800; margin-bottom: 8px; color: var(--color-text-primary); }\n.form-group input[type=\"text\"], .form-group textarea { width: 100%; padding: 12px 14px; border: 1px solid #D1D5DB; border-radius: 12px; font-size: 14px; box-sizing: border-box; }\n.form-group input[type=\"text\"]:focus, .form-group textarea:focus { outline: none; border-color: var(--color-primary); box-shadow: 0 0 0 2px rgba(79,70,229,0.18); }\n.ai-tag { font-size: 12px; color: var(--color-text-tertiary); margin-top: 6px; display: inline-block; }\n.form-error { color: #EF4444; font-size: 13px; margin-top: 8px; }\n\n/* 选项按钮 */\n.chip-group { display: flex; flex-wrap: wrap; gap: 12px; }\n.chip { padding: 8px 18px; border: 1px solid var(--color-border); border-radius: 999px; background: #fff; color: var(--color-text-secondary); font-size: 15px; font-weight: 800; cursor: pointer; transition: all 0.18s ease; }\n.chip.active { background: linear-gradient(90deg,#6C4FE5,#8A8FF8); color: #fff; border-color: transparent; box-shadow: 0 8px 22px rgba(108,79,229,0.18); transform: none; }\n\n/* 结果音频 */\n.result-section { margin-top: 24px; }\n.audio-card { background-color: #F5F7FB; border-radius: 16px; padding: 16px; margin-bottom: 12px; box-shadow: inset 0 1px 0 rgba(255,255,255,0.6); }\n.audio-label { font-weight: 800; color: var(--color-text-primary); font-size: 14px; margin-bottom: 12px; display: block; }\n.audio-player audio { width: 100%; height: 36px; border-radius: 10px; }\n/* 尝试将系统播放按钮改为紫白风格（Chromium/WebKit 有效） */\n.audio-player audio::-webkit-media-controls-play-button { background-color: #6C4FE5; border-radius: 50%; }\n.audio-player audio::-webkit-media-controls-play-button:hover { background-color: #5d45d1; }\n.audio-player audio::-webkit-media-controls-enclosure { border-radius: 10px; overflow: hidden; }\n\n/* 加载遮罩 */\n.loading-overlay { position: absolute; inset: 0; background: rgba(255,255,255,0.85); display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 10; }\n.spinner { width: 40px; height: 40px; border: 4px solid var(--color-border); border-top-color: var(--color-primary); border-radius: 50%; animation: spin 1s linear infinite; }\n.loading-overlay p { margin-top: 16px; font-weight: 500; }\n@keyframes spin { to { transform: rotate(360deg); } }\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}