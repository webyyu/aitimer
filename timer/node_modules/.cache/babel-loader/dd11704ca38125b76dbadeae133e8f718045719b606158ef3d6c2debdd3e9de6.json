{"ast":null,"code":"import \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nimport AIHeader from '../components/AIsecretary/Header.vue';\nimport MessageCard from '../components/AIsecretary/MessageCard.vue';\nimport MessageInput from '../components/AIsecretary/MessageInput.vue';\nimport AssistantSettingsModal from '../components/AIsecretary/AssistantSettingsModal.vue';\n\n// 导入AI服务\nimport messageService from '../AIsiri/services/messageService.js';\nimport aisiriService from '../AIsiri/services/aiApi.js';\nimport aiAssistantService from '../AIsiri/services/aiAssistantService.js';\nimport { QUICK_ACTIONS } from '../AIsiri/types/index.js';\nimport { log } from '../AIsiri/utils/logger.js';\nexport default {\n  name: 'AiSecretary',\n  components: {\n    AIHeader,\n    MessageCard,\n    MessageInput,\n    AssistantSettingsModal\n  },\n  data() {\n    return {\n      isTyping: false,\n      messages: [],\n      quickActions: QUICK_ACTIONS,\n      messageService: messageService,\n      // 添加连接状态\n      connectionStatus: 'connecting',\n      // connecting, connected, error\n      // 添加错误信息\n      errorMessage: null,\n      // AI助手相关\n      assistant: null,\n      showSettingsModal: false\n    };\n  },\n  methods: {\n    /**\n     * 发送消息\n     */\n    async sendMessage(text) {\n      if (!text || !text.trim()) {\n        log.warn('发送消息失败：消息内容为空');\n        return;\n      }\n      try {\n        log.user('发送消息', {\n          message: text\n        });\n\n        // 显示打字状态\n        this.isTyping = true;\n\n        // 处理用户输入 - 使用智能调度系统\n        await this.messageService.processUserInput(text.trim());\n\n        // 更新消息列表\n        this.updateMessages();\n\n        // 增加心动值\n        await this.increaseHeartValue();\n      } catch (error) {\n        log.error('发送消息失败', error);\n        this.handleError('发送消息时出现错误，请稍后重试');\n      } finally {\n        this.isTyping = false;\n        this.$nextTick(() => {\n          this.scrollToBottom();\n        });\n      }\n    },\n    /**\n     * 发送快速消息\n     */\n    async sendQuickMessage(text) {\n      log.user('使用快速操作', {\n        message: text\n      });\n      await this.sendMessage(text);\n    },\n    /**\n     * 更新消息列表\n     */\n    updateMessages() {\n      this.messages = this.messageService.getMessages();\n      log.debug('消息列表已更新', {\n        messageCount: this.messages.length\n      });\n    },\n    /**\n     * 处理错误\n     */\n    handleError(message) {\n      this.errorMessage = message;\n      this.connectionStatus = 'error';\n\n      // 3秒后自动清除错误信息\n      setTimeout(() => {\n        this.errorMessage = null;\n        this.connectionStatus = 'connected';\n      }, 3000);\n    },\n    /**\n     * 检查连接状态\n     */\n    async checkConnection() {\n      try {\n        log.api('检查AIsiri智能调度服务连接状态');\n        this.connectionStatus = 'connecting';\n        const response = await aisiriService.healthCheck();\n        if (response.success) {\n          this.connectionStatus = 'connected';\n          log.success('AIsiri智能调度服务连接正常');\n        } else {\n          throw new Error('健康检查失败');\n        }\n      } catch (error) {\n        log.error('连接检查失败', error);\n        this.connectionStatus = 'error';\n        this.errorMessage = '无法连接到AIsiri智能调度服务，请检查网络连接';\n      }\n    },\n    /**\n     * 重新连接\n     */\n    async reconnect() {\n      log.info('尝试重新连接AIsiri智能调度服务');\n      await this.checkConnection();\n    },\n    /**\n     * 清除所有消息\n     */\n    clearMessages() {\n      log.user('清除消息历史');\n      this.messageService.clearMessages();\n      this.updateMessages();\n    },\n    /**\n     * 滚动到底部\n     */\n    scrollToBottom() {\n      this.$nextTick(() => {\n        const chatContainer = document.querySelector('.chat-container');\n        if (chatContainer) {\n          chatContainer.scrollTop = chatContainer.scrollHeight;\n        }\n      });\n    },\n    /**\n     * 导出聊天记录（调试用）\n     */\n    exportChatHistory() {\n      const history = this.messageService.exportMessages();\n      log.table(history, '聊天记录导出');\n\n      // 下载为JSON文件\n      const blob = new Blob([JSON.stringify(history, null, 2)], {\n        type: 'application/json'\n      });\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = `aisiri_chat_history_${new Date().toISOString().slice(0, 10)}.json`;\n      a.click();\n      URL.revokeObjectURL(url);\n    }\n  },\n  async mounted() {\n    log.info('AIsiri智能调度助手页面初始化');\n    try {\n      // 1. 初始化消息列表\n      this.updateMessages();\n\n      // 2. 检查连接状态\n      await this.checkConnection();\n\n      // 3. 滚动到底部\n      this.scrollToBottom();\n      log.success('AIsiri智能调度助手页面初始化完成');\n    } catch (error) {\n      log.error('页面初始化失败', error);\n      this.handleError('初始化失败，请刷新页面重试');\n    }\n  },\n  beforeUnmount() {\n    log.info('AIsiri智能调度助手页面卸载');\n  },\n  watch: {\n    // 监听消息变化，自动滚动到底部\n    messages: {\n      handler() {\n        this.$nextTick(() => {\n          this.scrollToBottom();\n        });\n      },\n      deep: true\n    },\n    // 监听连接状态变化\n    connectionStatus(newStatus) {\n      log.info(`连接状态变更: ${newStatus}`);\n    }\n  },\n  computed: {\n    // 计算是否正在处理\n    isProcessing() {\n      return this.messageService.isCurrentlyProcessing() || this.isTyping;\n    },\n    // 计算连接状态显示\n    connectionStatusText() {\n      const statusMap = {\n        connecting: '连接中...',\n        connected: '已连接',\n        error: '连接失败'\n      };\n      return statusMap[this.connectionStatus] || '未知状态';\n    },\n    // 计算是否显示错误状态\n    showError() {\n      return this.connectionStatus === 'error' && this.errorMessage;\n    }\n  }\n};","map":{"version":3,"names":["AIHeader","MessageCard","MessageInput","AssistantSettingsModal","messageService","aisiriService","aiAssistantService","QUICK_ACTIONS","log","name","components","data","isTyping","messages","quickActions","connectionStatus","errorMessage","assistant","showSettingsModal","methods","sendMessage","text","trim","warn","user","message","processUserInput","updateMessages","increaseHeartValue","error","handleError","$nextTick","scrollToBottom","sendQuickMessage","getMessages","debug","messageCount","length","setTimeout","checkConnection","api","response","healthCheck","success","Error","reconnect","info","clearMessages","chatContainer","document","querySelector","scrollTop","scrollHeight","exportChatHistory","history","exportMessages","table","blob","Blob","JSON","stringify","type","url","URL","createObjectURL","a","createElement","href","download","Date","toISOString","slice","click","revokeObjectURL","mounted","beforeUnmount","watch","handler","deep","newStatus","computed","isProcessing","isCurrentlyProcessing","connectionStatusText","statusMap","connecting","connected","showError"],"sources":["C:\\Users\\wuby\\OneDrive\\Desktop\\backend(1) 3\\timer\\timer\\src\\views\\AiSecretary.vue"],"sourcesContent":["<template>\n  <div class=\"ai-secretary-container\">\n    <AIHeader \n      :assistant=\"assistant\" \n      @openSettings=\"openSettingsModal\" \n    />\n    \n    <!-- 连接状态显示 -->\n    <div v-if=\"connectionStatus === 'connecting'\" class=\"connection-status connecting\">\n      <font-awesome-icon icon=\"spinner\" spin />\n      <span>{{ connectionStatusText }}</span>\n    </div>\n    \n    <!-- 错误提示 -->\n    <div v-if=\"showError\" class=\"error-banner\" @click=\"reconnect\">\n      <font-awesome-icon icon=\"exclamation-circle\" />\n      <span>{{ errorMessage }}</span>\n      <small>点击重试</small>\n    </div>\n    \n    <div class=\"chat-container\">\n      <MessageCard \n        v-for=\"message in messages\" \n        :key=\"message.id\"\n        :message=\"message\"\n      />\n      \n      <!-- Typing indicator -->\n      <div v-if=\"isProcessing\" class=\"message ai-message\">\n        <div class=\"avatar\">\n          <font-awesome-icon icon=\"robot\" />\n        </div>\n        <div class=\"message-content\">\n          <div class=\"typing-indicator\">\n            <span></span>\n            <span></span>\n            <span></span>\n          </div>\n        </div>\n      </div>\n    </div>\n    \n    <!-- Quick Actions -->\n    <div class=\"quick-actions\">\n      <button \n        v-for=\"action in quickActions\"\n        :key=\"action.id\"\n        class=\"quick-action-btn\"\n        @click=\"sendQuickMessage(action.text)\"\n      >\n        <font-awesome-icon :icon=\"action.icon\" />\n        <span>{{ action.label }}</span>\n      </button>\n    </div>\n    \n    <MessageInput @sendMessage=\"sendMessage\" />\n    \n    <!-- AI助手设置模态框 -->\n    <AssistantSettingsModal\n      :visible=\"showSettingsModal\"\n      :assistant=\"assistant\"\n      @close=\"closeSettingsModal\"\n      @save=\"saveAssistantSettings\"\n    />\n\n  </div>\n</template>\n\n<script>\nimport AIHeader from '../components/AIsecretary/Header.vue'\nimport MessageCard from '../components/AIsecretary/MessageCard.vue'\nimport MessageInput from '../components/AIsecretary/MessageInput.vue'\nimport AssistantSettingsModal from '../components/AIsecretary/AssistantSettingsModal.vue'\n\n// 导入AI服务\nimport messageService from '../AIsiri/services/messageService.js'\nimport aisiriService from '../AIsiri/services/aiApi.js'\nimport aiAssistantService from '../AIsiri/services/aiAssistantService.js'\nimport { QUICK_ACTIONS } from '../AIsiri/types/index.js'\nimport { log } from '../AIsiri/utils/logger.js'\n\nexport default {\n  name: 'AiSecretary',\n  components: {\n    AIHeader,\n    MessageCard,\n    MessageInput,\n    AssistantSettingsModal\n  },\n  data() {\n    return {\n      isTyping: false,\n      messages: [],\n      quickActions: QUICK_ACTIONS,\n      messageService: messageService,\n      // 添加连接状态\n      connectionStatus: 'connecting', // connecting, connected, error\n      // 添加错误信息\n      errorMessage: null,\n      // AI助手相关\n      assistant: null,\n      showSettingsModal: false\n    }\n  },\n  methods: {\n    /**\n     * 发送消息\n     */\n    async sendMessage(text) {\n      if (!text || !text.trim()) {\n        log.warn('发送消息失败：消息内容为空')\n        return\n      }\n\n      try {\n        log.user('发送消息', { message: text })\n        \n        // 显示打字状态\n        this.isTyping = true\n        \n        // 处理用户输入 - 使用智能调度系统\n        await this.messageService.processUserInput(text.trim())\n        \n        // 更新消息列表\n        this.updateMessages()\n        \n        // 增加心动值\n        await this.increaseHeartValue()\n        \n      } catch (error) {\n        log.error('发送消息失败', error)\n        this.handleError('发送消息时出现错误，请稍后重试')\n      } finally {\n        this.isTyping = false\n        this.$nextTick(() => {\n          this.scrollToBottom()\n        })\n      }\n    },\n\n    /**\n     * 发送快速消息\n     */\n    async sendQuickMessage(text) {\n      log.user('使用快速操作', { message: text })\n      await this.sendMessage(text)\n    },\n\n    /**\n     * 更新消息列表\n     */\n    updateMessages() {\n      this.messages = this.messageService.getMessages()\n      log.debug('消息列表已更新', { messageCount: this.messages.length })\n    },\n\n    /**\n     * 处理错误\n     */\n    handleError(message) {\n      this.errorMessage = message\n      this.connectionStatus = 'error'\n      \n      // 3秒后自动清除错误信息\n      setTimeout(() => {\n        this.errorMessage = null\n        this.connectionStatus = 'connected'\n      }, 3000)\n    },\n\n    /**\n     * 检查连接状态\n     */\n    async checkConnection() {\n      try {\n        log.api('检查AIsiri智能调度服务连接状态')\n        this.connectionStatus = 'connecting'\n        \n        const response = await aisiriService.healthCheck()\n        \n        if (response.success) {\n          this.connectionStatus = 'connected'\n          log.success('AIsiri智能调度服务连接正常')\n        } else {\n          throw new Error('健康检查失败')\n        }\n        \n      } catch (error) {\n        log.error('连接检查失败', error)\n        this.connectionStatus = 'error'\n        this.errorMessage = '无法连接到AIsiri智能调度服务，请检查网络连接'\n      }\n    },\n\n    /**\n     * 重新连接\n     */\n    async reconnect() {\n      log.info('尝试重新连接AIsiri智能调度服务')\n      await this.checkConnection()\n    },\n\n    /**\n     * 清除所有消息\n     */\n    clearMessages() {\n      log.user('清除消息历史')\n      this.messageService.clearMessages()\n      this.updateMessages()\n    },\n\n    /**\n     * 滚动到底部\n     */\n    scrollToBottom() {\n      this.$nextTick(() => {\n        const chatContainer = document.querySelector('.chat-container')\n        if (chatContainer) {\n          chatContainer.scrollTop = chatContainer.scrollHeight\n        }\n      })\n    },\n\n    /**\n     * 导出聊天记录（调试用）\n     */\n    exportChatHistory() {\n      const history = this.messageService.exportMessages()\n      log.table(history, '聊天记录导出')\n      \n      // 下载为JSON文件\n      const blob = new Blob([JSON.stringify(history, null, 2)], { type: 'application/json' })\n      const url = URL.createObjectURL(blob)\n      const a = document.createElement('a')\n      a.href = url\n      a.download = `aisiri_chat_history_${new Date().toISOString().slice(0, 10)}.json`\n      a.click()\n      URL.revokeObjectURL(url)\n    }\n  },\n  async mounted() {\n    log.info('AIsiri智能调度助手页面初始化')\n    \n    try {\n      // 1. 初始化消息列表\n      this.updateMessages()\n      \n      // 2. 检查连接状态\n      await this.checkConnection()\n      \n      // 3. 滚动到底部\n      this.scrollToBottom()\n      \n      log.success('AIsiri智能调度助手页面初始化完成')\n      \n    } catch (error) {\n      log.error('页面初始化失败', error)\n      this.handleError('初始化失败，请刷新页面重试')\n    }\n  },\n  \n  beforeUnmount() {\n    log.info('AIsiri智能调度助手页面卸载')\n  },\n  \n  watch: {\n    // 监听消息变化，自动滚动到底部\n    messages: {\n      handler() {\n        this.$nextTick(() => {\n          this.scrollToBottom()\n        })\n      },\n      deep: true\n    },\n    \n    // 监听连接状态变化\n    connectionStatus(newStatus) {\n      log.info(`连接状态变更: ${newStatus}`)\n    }\n  },\n  \n  computed: {\n    // 计算是否正在处理\n    isProcessing() {\n      return this.messageService.isCurrentlyProcessing() || this.isTyping\n    },\n    \n    // 计算连接状态显示\n    connectionStatusText() {\n      const statusMap = {\n        connecting: '连接中...',\n        connected: '已连接',\n        error: '连接失败'\n      }\n      return statusMap[this.connectionStatus] || '未知状态'\n    },\n    \n    // 计算是否显示错误状态\n    showError() {\n      return this.connectionStatus === 'error' && this.errorMessage\n    }\n  }\n}\n</script>\n\n<style scoped>\n:root {\n    --primary-bg: #f7f7f7;\n    --chat-bg: #f7f7f7;\n    --white: #ffffff;\n    --text-primary: #000000;\n    --text-secondary: #666666;\n    --text-time: #999999;\n    --blue: #007aff;\n    --green: #07c160;\n    --border: #e5e5e5;\n    --shadow: 0 1px 3px rgba(0,0,0,0.1);\n    --shadow-up: 0 -1px 3px rgba(0,0,0,0.1);\n}\n\n.ai-secretary-container {\n  height: 100vh;\n  background: var(--primary-bg);\n  display: flex;\n  flex-direction: column;\n}\n\n.chat-container {\n  flex: 1;\n  overflow-y: auto;\n  padding: 16px;\n  padding-bottom: 160px; /* Adjust for input and quick actions */\n}\n\n.message {\n  display: flex;\n  margin-bottom: 16px;\n  animation: fadeIn 0.3s ease-in;\n}\n\n.ai-message {\n  justify-content: flex-start;\n}\n\n.user-message {\n  justify-content: flex-end;\n}\n\n.avatar {\n  width: 40px;\n  height: 40px;\n  border-radius: 20px;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n  margin-right: 12px;\n  flex-shrink: 0;\n}\n\n.user-avatar {\n  background: linear-gradient(135deg, #34c759 0%, #30d158 100%);\n  margin-right: 0;\n  margin-left: 12px;\n}\n\n.message-content {\n  max-width: 80%;\n  background: rgba(255, 255, 255, 0.95);\n  backdrop-filter: blur(10px);\n  border-radius: 16px;\n  padding: 12px 16px;\n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n}\n\n.user-message .message-content {\n  background: rgba(0, 122, 255, 0.9);\n  backdrop-filter: blur(10px);\n  border: 1px solid rgba(0, 122, 255, 0.3);\n  color: white;\n}\n\n.message-text {\n  font-size: 16px;\n  line-height: 1.4;\n  word-wrap: break-word;\n}\n\n.typing-indicator {\n  display: flex;\n  gap: 4px;\n}\n\n.typing-indicator span {\n  width: 8px;\n  height: 8px;\n  border-radius: 50%;\n  background: #8e8e93;\n  animation: typing 1.4s infinite ease-in-out;\n}\n\n.typing-indicator span:nth-child(1) { animation-delay: -0.32s; }\n.typing-indicator span:nth-child(2) { animation-delay: -0.16s; }\n\n.quick-actions {\n  position: fixed;\n  bottom: 85px;\n  left: 16px;\n  display: flex;\n  gap: 12px;\n  overflow-x: auto;\n  background: transparent;\n  max-width: calc(100% - 32px);\n  padding: 8px 0;\n  /* 隐藏滚动条 */\n  scrollbar-width: none; /* Firefox */\n  -ms-overflow-style: none; /* IE 10+ */\n  scroll-behavior: smooth;\n}\n\n.quick-actions::-webkit-scrollbar {\n  display: none; /* Chrome, Safari, Edge */\n}\n\n.quick-action-btn {\n  pointer-events: all;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  gap: 4px;\n  padding: 12px 16px;\n  background: rgba(255, 255, 255, 0.95);\n  backdrop-filter: blur(10px);\n  border: none;\n  border-radius: 20px;\n  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  min-width: 88px;\n  height: 76px;\n  flex-shrink: 0;\n  border: 1px solid rgba(255, 255, 255, 0.2);\n}\n\n.quick-action-btn:hover {\n  transform: translateY(-4px) scale(1.02);\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);\n  background: rgba(255, 255, 255, 1);\n}\n\n.quick-action-btn:active {\n  transform: translateY(-1px) scale(0.98);\n}\n\n.quick-action-btn > svg {\n  font-size: 22px;\n  color: #4a90e2;\n  margin-bottom: 2px;\n  transition: color 0.2s ease;\n}\n\n.quick-action-btn:hover > svg {\n  color: #007aff;\n}\n\n.quick-action-btn span {\n  font-size: 12px;\n  font-weight: 600;\n  color: #1d1d1f;\n  text-align: center;\n  line-height: 1.2;\n  white-space: nowrap;\n}\n\n\n\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n    transform: translateY(10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes typing {\n  0%, 80%, 100% {\n    transform: scale(0);\n  }\n  40% {\n    transform: scale(1);\n  }\n}\n\n/* 连接状态样式 */\n.connection-status {\n  padding: 8px 16px;\n  background: #f8f9fa;\n  border-bottom: 1px solid #e9ecef;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-size: 14px;\n  color: #6c757d;\n}\n\n.connection-status.connecting {\n  background: #e3f2fd;\n  color: #1976d2;\n}\n\n.connection-status svg {\n  font-size: 16px;\n}\n\n/* 错误横幅样式 */\n.error-banner {\n  padding: 12px 16px;\n  background: #ffebee;\n  border-bottom: 1px solid #ffcdd2;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  cursor: pointer;\n  transition: background 0.2s;\n}\n\n.error-banner:hover {\n  background: #ffcdd2;\n}\n\n.error-banner svg {\n  color: #d32f2f;\n  font-size: 16px;\n}\n\n.error-banner span {\n  flex: 1;\n  color: #d32f2f;\n  font-weight: 500;\n}\n\n.error-banner small {\n  color: #757575;\n  font-size: 12px;\n}\n\n@media (max-width: 430px) {\n  .chat-container {\n    padding: 16px;\n    padding-bottom: 160px;\n  }\n  \n  .message-content {\n    max-width: 85%;\n  }\n  \n  .quick-actions {\n    bottom: 80px; /* Adjust for smaller screens */\n    left: 12px;\n    max-width: calc(100% - 24px);\n    gap: 10px;\n  }\n  \n\n  \n  .quick-action-btn {\n    min-width: 80px;\n    height: 72px;\n    padding: 10px 12px;\n    border-radius: 16px;\n  }\n  \n  .quick-action-btn > svg {\n    font-size: 20px;\n  }\n  \n  .quick-action-btn span {\n    font-size: 11px;\n    font-weight: 500;\n  }\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}