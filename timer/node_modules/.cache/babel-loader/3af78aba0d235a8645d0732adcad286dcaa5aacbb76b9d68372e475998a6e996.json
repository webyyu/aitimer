{"ast":null,"code":"import axios from 'axios';\nimport { API_CONFIG } from '../config/api.js';\n\n// ÂàõÂª∫axiosÂÆû‰æã\nconst http = axios.create({\n  baseURL: API_CONFIG.baseURL,\n  timeout: API_CONFIG.timeout,\n  headers: API_CONFIG.headers\n});\n\n// ËØ∑Ê±ÇÊã¶Êà™Âô®\nhttp.interceptors.request.use(config => {\n  // Ëá™Âä®Ê∑ªÂä†ËÆ§ËØÅtoken\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  console.log('üì° API Request:', config.method?.toUpperCase(), config.url);\n  if (config.data) {\n    // ÈöêËóèÊïèÊÑü‰ø°ÊÅØ\n    const logData = {\n      ...config.data\n    };\n    if (logData.password) logData.password = '***';\n    console.log('üì§ Request Data:', logData);\n  }\n  return config;\n}, error => {\n  console.error('‚ùå Request Error:', error);\n  return Promise.reject(error);\n});\n\n// ÂìçÂ∫îÊã¶Êà™Âô®\nhttp.interceptors.response.use(response => {\n  console.log('üì® API Response:', response.status, response.config.url);\n  console.log('üì• Response Data:', response.data);\n  return response.data;\n}, error => {\n  console.error('‚ùå Response Error:', error.response?.status, error.response?.data || error.message);\n\n  // Â§ÑÁêÜËÆ§ËØÅÂ§±Ë¥•\n  if (error.response?.status === 401) {\n    console.log('üîí TokenËøáÊúüÊàñÊó†ÊïàÔºåÊ∏ÖÈô§Êú¨Âú∞Â≠òÂÇ®');\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n\n    // Â¶ÇÊûú‰∏çÊòØÁôªÂΩïÊàñÊ≥®ÂÜåÈ°µÈù¢ÔºåË∑≥ËΩ¨Âà∞ÁôªÂΩïÈ°µ\n    if (!window.location.pathname.includes('/auth')) {\n      console.log('üîÑ Ë∑≥ËΩ¨Âà∞ÁôªÂΩïÈ°µÈù¢');\n      window.location.href = '/auth/login';\n    }\n  }\n  return Promise.reject(error);\n});\nexport default http;","map":{"version":3,"names":["axios","API_CONFIG","http","create","baseURL","timeout","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","console","log","method","toUpperCase","url","data","logData","password","error","Promise","reject","response","status","message","removeItem","window","location","pathname","includes","href"],"sources":["C:/Users/wuby/OneDrive/Desktop/backend(1) 3/timer/timer/src/api/http.js"],"sourcesContent":["import axios from 'axios'\nimport { API_CONFIG } from '../config/api.js'\n\n// ÂàõÂª∫axiosÂÆû‰æã\nconst http = axios.create({\n  baseURL: API_CONFIG.baseURL,\n  timeout: API_CONFIG.timeout,\n  headers: API_CONFIG.headers\n})\n\n// ËØ∑Ê±ÇÊã¶Êà™Âô®\nhttp.interceptors.request.use(\n  config => {\n    // Ëá™Âä®Ê∑ªÂä†ËÆ§ËØÅtoken\n    const token = localStorage.getItem('token')\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`\n    }\n    \n    console.log('üì° API Request:', config.method?.toUpperCase(), config.url)\n    if (config.data) {\n      // ÈöêËóèÊïèÊÑü‰ø°ÊÅØ\n      const logData = { ...config.data }\n      if (logData.password) logData.password = '***'\n      console.log('üì§ Request Data:', logData)\n    }\n    return config\n  },\n  error => {\n    console.error('‚ùå Request Error:', error)\n    return Promise.reject(error)\n  }\n)\n\n// ÂìçÂ∫îÊã¶Êà™Âô®\nhttp.interceptors.response.use(\n  response => {\n    console.log('üì® API Response:', response.status, response.config.url)\n    console.log('üì• Response Data:', response.data)\n    return response.data\n  },\n  error => {\n    console.error('‚ùå Response Error:', error.response?.status, error.response?.data || error.message)\n    \n    // Â§ÑÁêÜËÆ§ËØÅÂ§±Ë¥•\n    if (error.response?.status === 401) {\n      console.log('üîí TokenËøáÊúüÊàñÊó†ÊïàÔºåÊ∏ÖÈô§Êú¨Âú∞Â≠òÂÇ®')\n      localStorage.removeItem('token')\n      localStorage.removeItem('user')\n      \n      // Â¶ÇÊûú‰∏çÊòØÁôªÂΩïÊàñÊ≥®ÂÜåÈ°µÈù¢ÔºåË∑≥ËΩ¨Âà∞ÁôªÂΩïÈ°µ\n      if (!window.location.pathname.includes('/auth')) {\n        console.log('üîÑ Ë∑≥ËΩ¨Âà∞ÁôªÂΩïÈ°µÈù¢')\n        window.location.href = '/auth/login'\n      }\n    }\n    \n    return Promise.reject(error)\n  }\n)\n\nexport default http"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,UAAU,QAAQ,kBAAkB;;AAE7C;AACA,MAAMC,IAAI,GAAGF,KAAK,CAACG,MAAM,CAAC;EACxBC,OAAO,EAAEH,UAAU,CAACG,OAAO;EAC3BC,OAAO,EAAEJ,UAAU,CAACI,OAAO;EAC3BC,OAAO,EAAEL,UAAU,CAACK;AACtB,CAAC,CAAC;;AAEF;AACAJ,IAAI,CAACK,YAAY,CAACC,OAAO,CAACC,GAAG,CAC3BC,MAAM,IAAI;EACR;EACA,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,IAAIF,KAAK,EAAE;IACTD,MAAM,CAACJ,OAAO,CAACQ,aAAa,GAAG,UAAUH,KAAK,EAAE;EAClD;EAEAI,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAEN,MAAM,CAACO,MAAM,EAAEC,WAAW,CAAC,CAAC,EAAER,MAAM,CAACS,GAAG,CAAC;EACxE,IAAIT,MAAM,CAACU,IAAI,EAAE;IACf;IACA,MAAMC,OAAO,GAAG;MAAE,GAAGX,MAAM,CAACU;IAAK,CAAC;IAClC,IAAIC,OAAO,CAACC,QAAQ,EAAED,OAAO,CAACC,QAAQ,GAAG,KAAK;IAC9CP,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAAEK,OAAO,CAAC;EAC1C;EACA,OAAOX,MAAM;AACf,CAAC,EACDa,KAAK,IAAI;EACPR,OAAO,CAACQ,KAAK,CAAC,kBAAkB,EAAEA,KAAK,CAAC;EACxC,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CACF,CAAC;;AAED;AACArB,IAAI,CAACK,YAAY,CAACmB,QAAQ,CAACjB,GAAG,CAC5BiB,QAAQ,IAAI;EACVX,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAAEU,QAAQ,CAACC,MAAM,EAAED,QAAQ,CAAChB,MAAM,CAACS,GAAG,CAAC;EACrEJ,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAEU,QAAQ,CAACN,IAAI,CAAC;EAC/C,OAAOM,QAAQ,CAACN,IAAI;AACtB,CAAC,EACDG,KAAK,IAAI;EACPR,OAAO,CAACQ,KAAK,CAAC,mBAAmB,EAAEA,KAAK,CAACG,QAAQ,EAAEC,MAAM,EAAEJ,KAAK,CAACG,QAAQ,EAAEN,IAAI,IAAIG,KAAK,CAACK,OAAO,CAAC;;EAEjG;EACA,IAAIL,KAAK,CAACG,QAAQ,EAAEC,MAAM,KAAK,GAAG,EAAE;IAClCZ,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAC;IACnCJ,YAAY,CAACiB,UAAU,CAAC,OAAO,CAAC;IAChCjB,YAAY,CAACiB,UAAU,CAAC,MAAM,CAAC;;IAE/B;IACA,IAAI,CAACC,MAAM,CAACC,QAAQ,CAACC,QAAQ,CAACC,QAAQ,CAAC,OAAO,CAAC,EAAE;MAC/ClB,OAAO,CAACC,GAAG,CAAC,YAAY,CAAC;MACzBc,MAAM,CAACC,QAAQ,CAACG,IAAI,GAAG,aAAa;IACtC;EACF;EAEA,OAAOV,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CACF,CAAC;AAED,eAAerB,IAAI","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}