{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, normalizeClass as _normalizeClass, createVNode as _createVNode, createElementVNode as _createElementVNode, vModelText as _vModelText, withKeys as _withKeys, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, Fragment as _Fragment, createTextVNode as _createTextVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"input-area\"\n};\nconst _hoisted_2 = {\n  class: \"input-container\"\n};\nconst _hoisted_3 = [\"disabled\", \"title\"];\nconst _hoisted_4 = {\n  class: \"dynamic-input-area\"\n};\nconst _hoisted_5 = [\"disabled\"];\nconst _hoisted_6 = {\n  class: \"voice-placeholder\"\n};\nconst _hoisted_7 = [\"disabled\"];\nconst _hoisted_8 = [\"disabled\"];\nconst _hoisted_9 = {\n  key: 0,\n  class: \"recognition-status\"\n};\nconst _hoisted_10 = {\n  class: \"status-content\"\n};\nconst _hoisted_11 = {\n  key: 1,\n  class: \"recognition-preview\"\n};\nconst _hoisted_12 = {\n  class: \"preview-header\"\n};\nconst _hoisted_13 = {\n  class: \"preview-content\"\n};\nconst _hoisted_14 = {\n  class: \"preview-text\"\n};\nconst _hoisted_15 = {\n  class: \"preview-actions\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_font_awesome_icon = _resolveComponent(\"font-awesome-icon\");\n  const _component_ImageAnalysisModal = _resolveComponent(\"ImageAnalysisModal\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createCommentVNode(\" ËØ≠Èü≥ËæìÂÖ•ÊåâÈíÆ \"), _createElementVNode(\"button\", {\n    class: _normalizeClass([\"voice-btn\", {\n      'active': $data.isVoiceMode,\n      'processing': $data.isProcessing\n    }]),\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.toggleVoiceMode && $options.toggleVoiceMode(...args)),\n    disabled: $data.isProcessing,\n    title: $data.isVoiceMode ? 'ÂàáÊç¢Âà∞ÊñáÂ≠óËæìÂÖ•' : 'ÂàáÊç¢Âà∞ËØ≠Èü≥ËæìÂÖ•'\n  }, [_createVNode(_component_font_awesome_icon, {\n    icon: $data.isVoiceMode ? 'keyboard' : 'microphone',\n    class: _normalizeClass({\n      'pulse': $data.isProcessing\n    })\n  }, null, 8 /* PROPS */, [\"icon\", \"class\"])], 10 /* CLASS, PROPS */, _hoisted_3), _createCommentVNode(\" ÈöêËóèÁöÑÊñá‰ª∂ËæìÂÖ•Ôºà‰øùÁïô‰Ωú‰∏∫Â§áÁî®Ôºâ \"), _createElementVNode(\"input\", {\n    ref: \"fileInput\",\n    type: \"file\",\n    accept: \"audio/*\",\n    style: {\n      \"display\": \"none\"\n    },\n    onChange: _cache[1] || (_cache[1] = (...args) => $options.handleFileSelect && $options.handleFileSelect(...args))\n  }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), _createCommentVNode(\" Âä®ÊÄÅËæìÂÖ•Âå∫Âüü \"), _createElementVNode(\"div\", _hoisted_4, [_createCommentVNode(\" ÊñáÂ≠óËæìÂÖ•Ê®°Âºè \"), !$data.isVoiceMode ? _withDirectives((_openBlock(), _createElementBlock(\"input\", {\n    key: 0,\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.inputText = $event),\n    type: \"text\",\n    placeholder: \"ËæìÂÖ•‰Ω†ÁöÑÂ≠¶‰π†ÁõÆÊ†áÊàñÈóÆÈ¢ò...\",\n    class: \"message-input\",\n    onKeypress: _cache[3] || (_cache[3] = _withKeys((...args) => $options.sendMessage && $options.sendMessage(...args), [\"enter\"])),\n    disabled: $data.isProcessing\n  }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_5)), [[_vModelText, $data.inputText]]) : (_openBlock(), _createElementBlock(_Fragment, {\n    key: 1\n  }, [_createCommentVNode(\" ËØ≠Èü≥ËæìÂÖ•Ê®°Âºè \"), _createElementVNode(\"div\", {\n    class: _normalizeClass([\"voice-input-area\", {\n      'listening': $data.isListening\n    }]),\n    onTouchstart: _cache[4] || (_cache[4] = (...args) => $options.startVoiceInput && $options.startVoiceInput(...args)),\n    onTouchend: _cache[5] || (_cache[5] = (...args) => $options.endVoiceInput && $options.endVoiceInput(...args)),\n    onTouchmove: _cache[6] || (_cache[6] = (...args) => $options.handleTouchMove && $options.handleTouchMove(...args)),\n    onMousedown: _cache[7] || (_cache[7] = (...args) => $options.startVoiceInput && $options.startVoiceInput(...args)),\n    onMouseup: _cache[8] || (_cache[8] = (...args) => $options.endVoiceInput && $options.endVoiceInput(...args)),\n    onMouseleave: _cache[9] || (_cache[9] = (...args) => $options.cancelVoiceInput && $options.cancelVoiceInput(...args))\n  }, [_createVNode(_component_font_awesome_icon, {\n    icon: \"microphone\",\n    class: \"voice-area-icon\"\n  }), _createElementVNode(\"span\", _hoisted_6, _toDisplayString($options.getVoicePlaceholderText()), 1 /* TEXT */)], 34 /* CLASS, NEED_HYDRATION */)], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))]), _createCommentVNode(\" ÂèëÈÄÅÊåâÈíÆ \"), _createElementVNode(\"button\", {\n    class: \"send-btn\",\n    onClick: _cache[10] || (_cache[10] = (...args) => $options.sendMessage && $options.sendMessage(...args)),\n    disabled: !$data.inputText.trim() || $data.isProcessing\n  }, [_createVNode(_component_font_awesome_icon, {\n    icon: \"paper-plane\"\n  })], 8 /* PROPS */, _hoisted_7), _createCommentVNode(\" ÂõæÁâáÂàÜÊûêÊåâÈíÆ \"), _createElementVNode(\"button\", {\n    class: \"image-analysis-btn\",\n    onClick: _cache[11] || (_cache[11] = (...args) => $options.openImageAnalysis && $options.openImageAnalysis(...args)),\n    disabled: $data.isProcessing,\n    title: \"ÂõæÁâáÂàÜÊûê\"\n  }, [_createVNode(_component_font_awesome_icon, {\n    icon: \"image\"\n  })], 8 /* PROPS */, _hoisted_8)]), _createCommentVNode(\" ÂΩïÈü≥Áä∂ÊÄÅÊèêÁ§∫Â∑≤Âà†Èô§ \"), _createCommentVNode(\" ËØ≠Èü≥ËØÜÂà´Áä∂ÊÄÅÊèêÁ§∫ \"), $data.isProcessing ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [_createElementVNode(\"div\", _hoisted_10, [_createVNode(_component_font_awesome_icon, {\n    icon: \"spinner\",\n    spin: \"\"\n  }), _createElementVNode(\"span\", null, _toDisplayString($data.recognitionStatusText), 1 /* TEXT */)])])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" ËØ≠Èü≥ËØÜÂà´ÁªìÊûúÈ¢ÑËßà \"), $data.recognitionResult && !$data.isProcessing ? (_openBlock(), _createElementBlock(\"div\", _hoisted_11, [_createElementVNode(\"div\", _hoisted_12, [_createVNode(_component_font_awesome_icon, {\n    icon: \"microphone\"\n  }), _cache[15] || (_cache[15] = _createElementVNode(\"span\", null, \"ËØ≠Èü≥ËØÜÂà´ÁªìÊûú\", -1 /* CACHED */)), _createElementVNode(\"button\", {\n    class: \"preview-close\",\n    onClick: _cache[12] || (_cache[12] = (...args) => $options.clearRecognitionResult && $options.clearRecognitionResult(...args))\n  }, [_createVNode(_component_font_awesome_icon, {\n    icon: \"times\"\n  })])]), _createElementVNode(\"div\", _hoisted_13, [_createElementVNode(\"p\", _hoisted_14, _toDisplayString($data.recognitionResult.transcription), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_15, [_createElementVNode(\"button\", {\n    class: \"preview-btn preview-btn-edit\",\n    onClick: _cache[13] || (_cache[13] = (...args) => $options.editRecognitionResult && $options.editRecognitionResult(...args))\n  }, [_createVNode(_component_font_awesome_icon, {\n    icon: \"edit\"\n  }), _cache[16] || (_cache[16] = _createTextVNode(\" ÁºñËæë \", -1 /* CACHED */))]), _createElementVNode(\"button\", {\n    class: \"preview-btn preview-btn-send\",\n    onClick: _cache[14] || (_cache[14] = (...args) => $options.sendRecognitionResult && $options.sendRecognitionResult(...args))\n  }, [_createVNode(_component_font_awesome_icon, {\n    icon: \"paper-plane\"\n  }), _cache[17] || (_cache[17] = _createTextVNode(\" ÂèëÈÄÅ \", -1 /* CACHED */))])])])])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" ÂõæÁâáÂàÜÊûêÊ®°ÊÄÅÊ°Ü \"), _createVNode(_component_ImageAnalysisModal, {\n    visible: $data.showImageAnalysisModal,\n    onClose: $options.closeImageAnalysisModal,\n    onAnalysisComplete: $options.handleImageAnalysisComplete,\n    onShowToast: $options.showToast\n  }, null, 8 /* PROPS */, [\"visible\", \"onClose\", \"onAnalysisComplete\", \"onShowToast\"])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createCommentVNode","_normalizeClass","$data","isVoiceMode","isProcessing","onClick","_cache","args","$options","toggleVoiceMode","disabled","title","_createVNode","_component_font_awesome_icon","icon","ref","type","accept","style","onChange","handleFileSelect","_hoisted_4","inputText","$event","placeholder","onKeypress","_withKeys","sendMessage","_Fragment","key","isListening","onTouchstart","startVoiceInput","onTouchend","endVoiceInput","onTouchmove","handleTouchMove","onMousedown","onMouseup","onMouseleave","cancelVoiceInput","_hoisted_6","_toDisplayString","getVoicePlaceholderText","trim","openImageAnalysis","_hoisted_9","_hoisted_10","spin","recognitionStatusText","recognitionResult","_hoisted_11","_hoisted_12","clearRecognitionResult","_hoisted_13","_hoisted_14","transcription","_hoisted_15","editRecognitionResult","sendRecognitionResult","_component_ImageAnalysisModal","visible","showImageAnalysisModal","onClose","closeImageAnalysisModal","onAnalysisComplete","handleImageAnalysisComplete","onShowToast","showToast"],"sources":["C:\\Users\\wuby\\OneDrive\\Desktop\\backend(1) 3\\timer\\src\\components\\AIsecretary\\MessageInput.vue"],"sourcesContent":["<template>\n  <div class=\"input-area\">\n    <div class=\"input-container\">\n      <!-- ËØ≠Èü≥ËæìÂÖ•ÊåâÈíÆ -->\n      <button \n        class=\"voice-btn\" \n        @click=\"toggleVoiceMode\"\n        :class=\"{ 'active': isVoiceMode, 'processing': isProcessing }\"\n        :disabled=\"isProcessing\"\n        :title=\"isVoiceMode ? 'ÂàáÊç¢Âà∞ÊñáÂ≠óËæìÂÖ•' : 'ÂàáÊç¢Âà∞ËØ≠Èü≥ËæìÂÖ•'\"\n      >\n        <font-awesome-icon \n          :icon=\"isVoiceMode ? 'keyboard' : 'microphone'\" \n          :class=\"{ 'pulse': isProcessing }\"\n        />\n      </button>\n\n      <!-- ÈöêËóèÁöÑÊñá‰ª∂ËæìÂÖ•Ôºà‰øùÁïô‰Ωú‰∏∫Â§áÁî®Ôºâ -->\n      <input \n        ref=\"fileInput\"\n        type=\"file\" \n        accept=\"audio/*\"\n        style=\"display: none\"\n        @change=\"handleFileSelect\"\n      >\n\n      <!-- Âä®ÊÄÅËæìÂÖ•Âå∫Âüü -->\n      <div class=\"dynamic-input-area\">\n        <!-- ÊñáÂ≠óËæìÂÖ•Ê®°Âºè -->\n        <input \n          v-if=\"!isVoiceMode\"\n          v-model=\"inputText\"\n          type=\"text\" \n          placeholder=\"ËæìÂÖ•‰Ω†ÁöÑÂ≠¶‰π†ÁõÆÊ†áÊàñÈóÆÈ¢ò...\"\n          class=\"message-input\"\n          @keypress.enter=\"sendMessage\"\n          :disabled=\"isProcessing\"\n        />\n        \n        <!-- ËØ≠Èü≥ËæìÂÖ•Ê®°Âºè -->\n        <div \n          v-else\n          class=\"voice-input-area\"\n          @touchstart=\"startVoiceInput\"\n          @touchend=\"endVoiceInput\"\n          @touchmove=\"handleTouchMove\"\n          @mousedown=\"startVoiceInput\"\n          @mouseup=\"endVoiceInput\"\n          @mouseleave=\"cancelVoiceInput\"\n          :class=\"{ 'listening': isListening }\"\n        >\n          <font-awesome-icon icon=\"microphone\" class=\"voice-area-icon\" />\n          <span class=\"voice-placeholder\">{{ getVoicePlaceholderText() }}</span>\n        </div>\n      </div>\n\n      <!-- ÂèëÈÄÅÊåâÈíÆ -->\n      <button \n        class=\"send-btn\"\n        @click=\"sendMessage\"\n        :disabled=\"!inputText.trim() || isProcessing\"\n      >\n        <font-awesome-icon icon=\"paper-plane\" />\n      </button>\n\n      <!-- ÂõæÁâáÂàÜÊûêÊåâÈíÆ -->\n      <button \n        class=\"image-analysis-btn\"\n        @click=\"openImageAnalysis\"\n        :disabled=\"isProcessing\"\n        title=\"ÂõæÁâáÂàÜÊûê\"\n      >\n        <font-awesome-icon icon=\"image\" />\n      </button>\n    </div>\n\n    <!-- ÂΩïÈü≥Áä∂ÊÄÅÊèêÁ§∫Â∑≤Âà†Èô§ -->\n\n    <!-- ËØ≠Èü≥ËØÜÂà´Áä∂ÊÄÅÊèêÁ§∫ -->\n    <div v-if=\"isProcessing\" class=\"recognition-status\">\n      <div class=\"status-content\">\n        <font-awesome-icon icon=\"spinner\" spin />\n        <span>{{ recognitionStatusText }}</span>\n      </div>\n    </div>\n\n    <!-- ËØ≠Èü≥ËØÜÂà´ÁªìÊûúÈ¢ÑËßà -->\n    <div v-if=\"recognitionResult && !isProcessing\" class=\"recognition-preview\">\n      <div class=\"preview-header\">\n        <font-awesome-icon icon=\"microphone\" />\n        <span>ËØ≠Èü≥ËØÜÂà´ÁªìÊûú</span>\n        <button class=\"preview-close\" @click=\"clearRecognitionResult\">\n          <font-awesome-icon icon=\"times\" />\n        </button>\n      </div>\n      <div class=\"preview-content\">\n        <p class=\"preview-text\">{{ recognitionResult.transcription }}</p>\n        <div class=\"preview-actions\">\n          <button class=\"preview-btn preview-btn-edit\" @click=\"editRecognitionResult\">\n            <font-awesome-icon icon=\"edit\" />\n            ÁºñËæë\n          </button>\n          <button class=\"preview-btn preview-btn-send\" @click=\"sendRecognitionResult\">\n            <font-awesome-icon icon=\"paper-plane\" />\n            ÂèëÈÄÅ\n          </button>\n        </div>\n      </div>\n    </div>\n\n    <!-- ÂõæÁâáÂàÜÊûêÊ®°ÊÄÅÊ°Ü -->\n    <ImageAnalysisModal\n      :visible=\"showImageAnalysisModal\"\n      @close=\"closeImageAnalysisModal\"\n      @analysisComplete=\"handleImageAnalysisComplete\"\n      @showToast=\"showToast\"\n    />\n  </div>\n</template>\n\n<script>\nimport speechRecognitionService from '../../AIsiri/services/speechRecognitionService.js'\nimport { log } from '../../AIsiri/utils/logger.js'\nimport ImageAnalysisModal from './ImageAnalysisModal.vue'\n\nexport default {\n  name: 'MessageInput',\n  components: {\n    ImageAnalysisModal\n  },\n  data() {\n    return {\n      inputText: '',\n      isListening: false,\n      isProcessing: false,\n      recognitionResult: null,\n      recognitionStatusText: 'Ê≠£Âú®ËØÜÂà´‰∏≠...',\n      selectedFile: null,\n      showImageAnalysisModal: false,\n      // Êñ∞Â¢ûÂΩïÈü≥Áõ∏ÂÖ≥Áä∂ÊÄÅ\n      mediaRecorder: null,\n      audioChunks: [],\n      recordingTime: 0,\n      recordingTimer: null,\n      stream: null,\n      // Ëß¶Êë∏Áõ∏ÂÖ≥Áä∂ÊÄÅ\n      touchStartY: 0,\n      touchStartTime: 0,\n      showCancelTip: false,\n      shouldCancel: false,\n      recordingTipText: 'Ê≠£Âú®ÂΩïÈü≥‰∏≠... ÊîæÊâãÂèëÈÄÅ',\n      // ËØ≠Èü≥Ê®°ÂºèÁä∂ÊÄÅ\n      isVoiceMode: false\n    }\n  },\n  methods: {\n    /**\n     * ÂèëÈÄÅÊñáÊú¨Ê∂àÊÅØ\n     */\n    sendMessage() {\n      if (!this.inputText.trim() || this.isProcessing) return;\n      \n      log.user('ÂèëÈÄÅÊñáÊú¨Ê∂àÊÅØ', { message: this.inputText })\n      this.$emit('sendMessage', this.inputText);\n      this.inputText = '';\n    },\n\n    /**\n     * ÂàáÊç¢ËØ≠Èü≥/ÊñáÂ≠óËæìÂÖ•Ê®°Âºè\n     */\n    toggleVoiceMode() {\n      if (this.isProcessing) return;\n      \n      this.isVoiceMode = !this.isVoiceMode;\n      \n      if (this.isVoiceMode) {\n        // ÂàáÊç¢Âà∞ËØ≠Èü≥Ê®°Âºè\n        this.showToast('Â∑≤ÂàáÊç¢Âà∞ËØ≠Èü≥ËæìÂÖ•Ê®°Âºè', 'info');\n        // ËÅöÁÑ¶Âà∞ËØ≠Èü≥ËæìÂÖ•Âå∫Âüü\n        this.$nextTick(() => {\n          const voiceArea = this.$el.querySelector('.voice-input-area');\n          if (voiceArea) voiceArea.focus();\n        });\n      } else {\n        // ÂàáÊç¢Âà∞ÊñáÂ≠óÊ®°Âºè\n        this.showToast('Â∑≤ÂàáÊç¢Âà∞ÊñáÂ≠óËæìÂÖ•Ê®°Âºè', 'info');\n        // ËÅöÁÑ¶Âà∞ÊñáÂ≠óËæìÂÖ•Ê°Ü\n        this.$nextTick(() => {\n          const textInput = this.$el.querySelector('.message-input');\n          if (textInput) textInput.focus();\n        });\n      }\n    },\n\n    /**\n     * ÂºÄÂßãËØ≠Èü≥ËæìÂÖ•ÔºàËß¶Êë∏ÂºÄÂßãÔºâ\n     */\n    async startVoiceInput(event) {\n      if (this.isProcessing || !this.isVoiceMode) return;\n      \n      // ËÆ∞ÂΩïËß¶Êë∏ÂºÄÂßã‰ΩçÁΩÆÂíåÊó∂Èó¥\n      if (event.type === 'touchstart') {\n        this.touchStartY = event.touches[0].clientY;\n        this.touchStartTime = Date.now();\n      } else {\n        this.touchStartY = event.clientY;\n        this.touchStartTime = Date.now();\n      }\n      \n      this.shouldCancel = false;\n      this.showCancelTip = false;\n      \n      await this.startRecording();\n    },\n\n    /**\n     * ÁªìÊùüËØ≠Èü≥ËæìÂÖ•ÔºàËß¶Êë∏ÁªìÊùüÔºâ\n     */\n    endVoiceInput() {\n      if (!this.isListening) return;\n      \n      // Ê£ÄÊü•ÊòØÂê¶Â∫îËØ•ÂèñÊ∂à\n      if (this.shouldCancel) {\n        this.cancelRecording();\n      } else {\n        this.stopVoiceInput();\n      }\n    },\n\n    /**\n     * Â§ÑÁêÜËß¶Êë∏ÁßªÂä®Ôºà‰∏äÊªëÂèñÊ∂àÔºâ\n     */\n    handleTouchMove(event) {\n      if (!this.isListening) return;\n      \n      const currentY = event.touches[0].clientY;\n      const deltaY = this.touchStartY - currentY;\n      \n      // ‰∏äÊªëË∂ÖËøá50pxÊòæÁ§∫ÂèñÊ∂àÊèêÁ§∫\n      if (deltaY > 50) {\n        this.showCancelTip = true;\n        this.shouldCancel = true;\n        this.recordingTipText = 'ÊùæÊâãÂèñÊ∂àÂΩïÈü≥';\n      } else {\n        this.showCancelTip = false;\n        this.shouldCancel = false;\n        this.recordingTipText = 'Ê≠£Âú®ÂΩïÈü≥‰∏≠... ÊîæÊâãÂèëÈÄÅ';\n      }\n    },\n\n    /**\n     * ÂèñÊ∂àËØ≠Èü≥ËæìÂÖ•ÔºàÈº†Ê†áÁ¶ªÂºÄÔºâ\n     */\n    cancelVoiceInput() {\n      if (this.isListening) {\n        this.cancelRecording();\n      }\n    },\n\n    /**\n     * ÂºÄÂßãËØ≠Èü≥ËæìÂÖ•ÔºàÂÆûÊó∂ÂΩïÈü≥Ôºâ\n     */\n    async startRecording() {\n      try {\n        log.info('ÂºÄÂßãÂÆûÊó∂ÂΩïÈü≥')\n        \n        // ËØ∑Ê±ÇÈ∫¶ÂÖãÈ£éÊùÉÈôê\n        this.stream = await navigator.mediaDevices.getUserMedia({ \n          audio: {\n            echoCancellation: true,\n            noiseSuppression: true,\n            sampleRate: 44100\n          } \n        });\n        \n        // ÂàõÂª∫MediaRecorder - ‰ΩøÁî®ÂêéÁ´ØÊîØÊåÅÁöÑÊ†ºÂºè\n        let mimeType = 'audio/wav';\n        \n        // Ê£ÄÊü•ÊµèËßàÂô®ÊîØÊåÅÁöÑÊ†ºÂºèÔºå‰ºòÂÖà‰ΩøÁî®ÂêéÁ´ØÊîØÊåÅÁöÑÊ†ºÂºè\n        if (MediaRecorder.isTypeSupported('audio/wav')) {\n          mimeType = 'audio/wav';\n        } else if (MediaRecorder.isTypeSupported('audio/mp4')) {\n          mimeType = 'audio/mp4';\n        } else if (MediaRecorder.isTypeSupported('audio/webm;codecs=opus')) {\n          mimeType = 'audio/webm;codecs=opus';\n        } else if (MediaRecorder.isTypeSupported('audio/webm')) {\n          mimeType = 'audio/webm';\n        }\n        \n        this.mediaRecorder = new MediaRecorder(this.stream, {\n          mimeType: mimeType\n        });\n        \n        // ÈáçÁΩÆÂΩïÈü≥Áä∂ÊÄÅ\n        this.audioChunks = [];\n        this.recordingTime = 0;\n        \n        // ÂºÄÂßãÂΩïÈü≥\n        this.mediaRecorder.start();\n        this.isListening = true;\n        \n        // ÂºÄÂßãËÆ°Êó∂\n        this.startRecordingTimer();\n        \n        // ÁõëÂê¨ÂΩïÈü≥Êï∞ÊçÆ\n        this.mediaRecorder.ondataavailable = (event) => {\n          if (event.data.size > 0) {\n            this.audioChunks.push(event.data);\n          }\n        };\n        \n        // ÂΩïÈü≥ÁªìÊùüÂ§ÑÁêÜ\n        this.mediaRecorder.onstop = () => {\n          this.handleRecordingComplete();\n        };\n        \n        log.success('ÂÆûÊó∂ÂΩïÈü≥ÂºÄÂßã')\n        \n      } catch (error) {\n        log.error('ÂêØÂä®ÂΩïÈü≥Â§±Ë¥•', error);\n        this.showToast('Êó†Ê≥ïËÆøÈóÆÈ∫¶ÂÖãÈ£éÔºåËØ∑Ê£ÄÊü•ÊùÉÈôêËÆæÁΩÆ', 'error');\n        \n        // Â¶ÇÊûúÂÆûÊó∂ÂΩïÈü≥Â§±Ë¥•ÔºåÂõûÈÄÄÂà∞Êñá‰ª∂ÈÄâÊã©Ê®°Âºè\n        this.fallbackToFileInput();\n      }\n    },\n\n    /**\n     * ÂÅúÊ≠¢ËØ≠Èü≥ËæìÂÖ•\n     */\n    stopVoiceInput() {\n      if (this.mediaRecorder && this.isListening) {\n        log.info('ÂÅúÊ≠¢ÂÆûÊó∂ÂΩïÈü≥')\n        this.mediaRecorder.stop();\n        this.isListening = false;\n        this.stopRecordingTimer();\n        \n        // ÂÅúÊ≠¢È∫¶ÂÖãÈ£éÊµÅ\n        if (this.stream) {\n          this.stream.getTracks().forEach(track => track.stop());\n          this.stream = null;\n        }\n      }\n    },\n\n    /**\n     * ÂèñÊ∂àÂΩïÈü≥\n     */\n    cancelRecording() {\n      if (this.mediaRecorder && this.isListening) {\n        log.info('ÂèñÊ∂àÂΩïÈü≥')\n        this.mediaRecorder.stop();\n        this.isListening = false;\n        this.stopRecordingTimer();\n        \n        // ÂÅúÊ≠¢È∫¶ÂÖãÈ£éÊµÅ\n        if (this.stream) {\n          this.stream.getTracks().forEach(track => track.stop());\n          this.stream = null;\n        }\n        \n        // Ê∏ÖÁêÜÂΩïÈü≥Êï∞ÊçÆ\n        this.audioChunks = [];\n        this.recordingTime = 0;\n        \n        // ÈáçÁΩÆÁä∂ÊÄÅ\n        this.showCancelTip = false;\n        this.shouldCancel = false;\n        this.recordingTipText = 'Ê≠£Âú®ÂΩïÈü≥‰∏≠... ÊîæÊâãÂèëÈÄÅ';\n        \n        this.showToast('ÂΩïÈü≥Â∑≤ÂèñÊ∂à', 'info');\n      }\n    },\n\n    /**\n     * ÂºÄÂßãÂΩïÈü≥ËÆ°Êó∂Âô®\n     */\n    startRecordingTimer() {\n      this.recordingTimer = setInterval(() => {\n        this.recordingTime++;\n      }, 1000);\n    },\n\n    /**\n     * ÂÅúÊ≠¢ÂΩïÈü≥ËÆ°Êó∂Âô®\n     */\n    stopRecordingTimer() {\n      if (this.recordingTimer) {\n        clearInterval(this.recordingTimer);\n        this.recordingTimer = null;\n      }\n    },\n\n    /**\n     * Ê†ºÂºèÂåñÂΩïÈü≥Êó∂Èó¥\n     */\n    formatRecordingTime(seconds) {\n      const mins = Math.floor(seconds / 60);\n      const secs = seconds % 60;\n      return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\n    },\n\n    /**\n     * Â§ÑÁêÜÂΩïÈü≥ÂÆåÊàê\n     */\n    async handleRecordingComplete() {\n      try {\n        if (this.audioChunks.length === 0) {\n          this.showToast('ÂΩïÈü≥Â§±Ë¥•ÔºåÊ≤°ÊúâÂΩïÂà∂Âà∞Èü≥È¢ë', 'error');\n          return;\n        }\n\n        // ÂàõÂª∫Èü≥È¢ëBlob\n        const audioBlob = new Blob(this.audioChunks, { type: this.mediaRecorder.mimeType });\n        \n        // ËΩ¨Êç¢‰∏∫ÂêéÁ´ØÊîØÊåÅÁöÑÊ†ºÂºè\n        const convertedAudioFile = await this.convertAudioFormat(audioBlob);\n        \n        log.info('ÂΩïÈü≥ÂÆåÊàêÔºåÂºÄÂßãÂ§ÑÁêÜ', { \n          fileName: convertedAudioFile.name, \n          fileSize: convertedAudioFile.size,\n          duration: this.recordingTime,\n          originalType: this.mediaRecorder.mimeType,\n          convertedType: convertedAudioFile.type\n        });\n\n        // Âú®ËØ≠Èü≥Ê®°Âºè‰∏ãÁõ¥Êé•ÂèëÈÄÅËØ≠Èü≥Ê∂àÊÅØÔºåÂê¶ÂàôÊòæÁ§∫È¢ÑËßà\n        if (this.isVoiceMode) {\n          await this.sendVoiceMessage(convertedAudioFile);\n        } else {\n          await this.processAudioFile(convertedAudioFile);\n        }\n        \n      } catch (error) {\n        log.error('Â§ÑÁêÜÂΩïÈü≥Â§±Ë¥•', error);\n        this.showToast(`Â§ÑÁêÜÂΩïÈü≥Â§±Ë¥•: ${error.message}`, 'error');\n      } finally {\n        // Ê∏ÖÁêÜÁä∂ÊÄÅ\n        this.audioChunks = [];\n        this.recordingTime = 0;\n        this.mediaRecorder = null;\n      }\n    },\n\n    /**\n     * ËΩ¨Êç¢Èü≥È¢ëÊ†ºÂºè‰∏∫ÂêéÁ´ØÊîØÊåÅÁöÑÊ†ºÂºè\n     */\n    async convertAudioFormat(audioBlob) {\n      try {\n        // Â¶ÇÊûúÂ∑≤ÁªèÊòØÊîØÊåÅÁöÑÊ†ºÂºèÔºåÁõ¥Êé•ËøîÂõû\n        const supportedTypes = ['audio/wav', 'audio/mpeg', 'audio/mp4', 'audio/aac', 'audio/flac'];\n        if (supportedTypes.includes(audioBlob.type)) {\n          return new File([audioBlob], `recording_${Date.now()}.wav`, { type: audioBlob.type });\n        }\n\n        // ÂàõÂª∫Èü≥È¢ë‰∏ä‰∏ãÊñáËøõË°åÊ†ºÂºèËΩ¨Êç¢\n        const audioContext = new (window.AudioContext || window.webkitAudioContext)();\n        const arrayBuffer = await audioBlob.arrayBuffer();\n        const audioBuffer = await audioContext.decodeAudioData(arrayBuffer);\n        \n        // ËΩ¨Êç¢‰∏∫WAVÊ†ºÂºè\n        const wavBlob = this.audioBufferToWav(audioBuffer);\n        \n        // ÂàõÂª∫Êñ∞ÁöÑFileÂØπË±°\n        const wavFile = new File([wavBlob], `recording_${Date.now()}.wav`, { \n          type: 'audio/wav' \n        });\n        \n        log.info('Èü≥È¢ëÊ†ºÂºèËΩ¨Êç¢ÂÆåÊàê', { \n          originalType: audioBlob.type, \n          convertedType: 'audio/wav',\n          originalSize: audioBlob.size,\n          convertedSize: wavFile.size\n        });\n        \n        return wavFile;\n        \n      } catch (error) {\n        log.error('Èü≥È¢ëÊ†ºÂºèËΩ¨Êç¢Â§±Ë¥•', error);\n        // Â¶ÇÊûúËΩ¨Êç¢Â§±Ë¥•ÔºåÂ∞ùËØï‰ΩøÁî®ÂéüÂßãÊ†ºÂºè\n        this.showToast('Èü≥È¢ëÊ†ºÂºèËΩ¨Êç¢Â§±Ë¥•Ôºå‰ΩøÁî®ÂéüÂßãÊ†ºÂºè', 'warning');\n        return new File([audioBlob], `recording_${Date.now()}.wav`, { type: 'audio/wav' });\n      }\n    },\n\n    /**\n     * Â∞ÜAudioBufferËΩ¨Êç¢‰∏∫WAVÊ†ºÂºè\n     */\n    audioBufferToWav(buffer) {\n      const length = buffer.length;\n      const numberOfChannels = buffer.numberOfChannels;\n      const sampleRate = buffer.sampleRate;\n      const arrayBuffer = new ArrayBuffer(44 + length * numberOfChannels * 2);\n      const view = new DataView(arrayBuffer);\n      \n      // WAVÊñá‰ª∂Â§¥\n      const writeString = (offset, string) => {\n        for (let i = 0; i < string.length; i++) {\n          view.setUint8(offset + i, string.charCodeAt(i));\n        }\n      };\n      \n      writeString(0, 'RIFF');\n      view.setUint32(4, 36 + length * numberOfChannels * 2, true);\n      writeString(8, 'WAVE');\n      writeString(12, 'fmt ');\n      view.setUint32(16, 16, true);\n      view.setUint16(20, 1, true);\n      view.setUint16(22, numberOfChannels, true);\n      view.setUint32(24, sampleRate, true);\n      view.setUint32(28, sampleRate * numberOfChannels * 2, true);\n      view.setUint16(32, numberOfChannels * 2, true);\n      view.setUint16(34, 16, true);\n      writeString(36, 'data');\n      view.setUint32(40, length * numberOfChannels * 2, true);\n      \n      // ÂÜôÂÖ•Èü≥È¢ëÊï∞ÊçÆ\n      let offset = 44;\n      for (let i = 0; i < length; i++) {\n        for (let channel = 0; channel < numberOfChannels; channel++) {\n          const sample = Math.max(-1, Math.min(1, buffer.getChannelData(channel)[i]));\n          view.setInt16(offset, sample < 0 ? sample * 0x8000 : sample * 0x7FFF, true);\n          offset += 2;\n        }\n      }\n      \n      return new Blob([arrayBuffer], { type: 'audio/wav' });\n    },\n\n    /**\n     * ÂèëÈÄÅËØ≠Èü≥Ê∂àÊÅØ\n     */\n    async sendVoiceMessage(audioFile) {\n      try {\n        this.isProcessing = true;\n        this.recognitionStatusText = 'Ê≠£Âú®Â§ÑÁêÜËØ≠Èü≥Ê∂àÊÅØ...';\n        \n        log.info('ÂºÄÂßãÂ§ÑÁêÜËØ≠Èü≥Ê∂àÊÅØ', { fileName: audioFile.name, fileSize: audioFile.size });\n\n        // È™åËØÅÊñá‰ª∂\n        const validation = speechRecognitionService.validateAudioFile(audioFile);\n        if (!validation.isValid) {\n          throw new Error(validation.errors.join(', '));\n        }\n\n        // ÂºÄÂßãËØ≠Èü≥ËØÜÂà´\n        this.recognitionStatusText = 'Ê≠£Âú®ËØÜÂà´‰∏≠ÔºåËØ∑Á®çÂÄô...';\n        const result = await speechRecognitionService.recognizeVoice(audioFile);\n        \n        if (result.success) {\n          // ÂèëÈÄÅËØ≠Èü≥Ê∂àÊÅØ\n          this.$emit('sendVoiceMessage', {\n            type: 'voice',\n            audioFile: audioFile,\n            transcription: result.transcription,\n            audioUrl: result.audioUrl,\n            duration: this.recordingTime\n          });\n          \n          log.success('ËØ≠Èü≥Ê∂àÊÅØÂèëÈÄÅÊàêÂäü', { transcription: result.transcription });\n          this.showToast('ËØ≠Èü≥Ê∂àÊÅØÂèëÈÄÅÊàêÂäüÔºÅ', 'success');\n        } else {\n          throw new Error('ËØÜÂà´Â§±Ë¥•');\n        }\n      } catch (error) {\n        log.error('ËØ≠Èü≥Ê∂àÊÅØÂèëÈÄÅÂ§±Ë¥•', error);\n        this.recognitionStatusText = 'ÂèëÈÄÅÂ§±Ë¥•';\n        this.showToast(`ËØ≠Èü≥Ê∂àÊÅØÂèëÈÄÅÂ§±Ë¥•: ${error.message}`, 'error');\n      } finally {\n        this.isProcessing = false;\n        this.isListening = false;\n        this.selectedFile = null;\n        \n        // Ê∏ÖÁ©∫Êñá‰ª∂ËæìÂÖ•\n        if (this.$refs.fileInput) {\n          this.$refs.fileInput.value = '';\n        }\n      }\n    },\n\n    /**\n     * Â§ÑÁêÜÈü≥È¢ëÊñá‰ª∂ÔºàÂΩïÈü≥Êàñ‰∏ä‰º†Ôºâ\n     */\n    async processAudioFile(audioFile) {\n      try {\n        this.isProcessing = true;\n        this.recognitionStatusText = 'Ê≠£Âú®‰∏ä‰º†Èü≥È¢ëÊñá‰ª∂...';\n        \n        log.info('ÂºÄÂßãËØ≠Èü≥ËØÜÂà´', { fileName: audioFile.name, fileSize: audioFile.size });\n\n        // È™åËØÅÊñá‰ª∂\n        const validation = speechRecognitionService.validateAudioFile(audioFile);\n        if (!validation.isValid) {\n          throw new Error(validation.errors.join(', '));\n        }\n\n        // ÂºÄÂßãËØ≠Èü≥ËØÜÂà´\n        this.recognitionStatusText = 'Ê≠£Âú®ËØÜÂà´‰∏≠ÔºåËØ∑Á®çÂÄô...';\n        const result = await speechRecognitionService.recognizeVoice(audioFile);\n        \n        if (result.success) {\n          this.recognitionResult = result;\n          this.recognitionStatusText = 'ËØÜÂà´ÂÆåÊàê';\n          log.success('ËØ≠Èü≥ËØÜÂà´ÊàêÂäü', { transcription: result.transcription });\n          \n          // Ëá™Âä®Â°´ÂÖÖÂà∞ËæìÂÖ•Ê°Ü\n          this.inputText = result.transcription;\n          \n          // ÊòæÁ§∫ÊàêÂäüÊèêÁ§∫\n          this.showToast('ËØ≠Èü≥ËØÜÂà´ÊàêÂäüÔºÅ', 'success');\n        } else {\n          throw new Error('ËØÜÂà´Â§±Ë¥•');\n        }\n      } catch (error) {\n        log.error('ËØ≠Èü≥ËØÜÂà´Â§±Ë¥•', error);\n        this.recognitionStatusText = 'ËØÜÂà´Â§±Ë¥•';\n        this.showToast(`ËØ≠Èü≥ËØÜÂà´Â§±Ë¥•: ${error.message}`, 'error');\n      } finally {\n        this.isProcessing = false;\n        this.isListening = false;\n        this.selectedFile = null;\n        \n        // Ê∏ÖÁ©∫Êñá‰ª∂ËæìÂÖ•\n        if (this.$refs.fileInput) {\n          this.$refs.fileInput.value = '';\n        }\n      }\n    },\n\n    /**\n     * ÂõûÈÄÄÂà∞Êñá‰ª∂ÈÄâÊã©Ê®°Âºè\n     */\n    fallbackToFileInput() {\n      log.info('ÂõûÈÄÄÂà∞Êñá‰ª∂ÈÄâÊã©Ê®°Âºè')\n      this.$refs.fileInput.click();\n    },\n\n    /**\n     * Â§ÑÁêÜÊñá‰ª∂ÈÄâÊã©ÔºàÂ§áÁî®ÊñπÊ°àÔºâ\n     */\n    async handleFileSelect(event) {\n      const file = event.target.files[0];\n      if (!file) {\n        this.stopVoiceInput();\n        return;\n      }\n\n      try {\n        this.selectedFile = file;\n        await this.processAudioFile(file);\n      } catch (error) {\n        log.error('Êñá‰ª∂Â§ÑÁêÜÂ§±Ë¥•', error);\n        this.showToast(`Êñá‰ª∂Â§ÑÁêÜÂ§±Ë¥•: ${error.message}`, 'error');\n      }\n    },\n\n    /**\n     * ÁºñËæëËØÜÂà´ÁªìÊûú\n     */\n    editRecognitionResult() {\n      if (this.recognitionResult) {\n        this.inputText = this.recognitionResult.transcription;\n        this.clearRecognitionResult();\n        // ËÅöÁÑ¶Âà∞ËæìÂÖ•Ê°Ü\n        this.$nextTick(() => {\n          const input = this.$el.querySelector('.message-input');\n          if (input) input.focus();\n        });\n      }\n    },\n\n    /**\n     * ÂèëÈÄÅËØÜÂà´ÁªìÊûú\n     */\n    sendRecognitionResult() {\n      if (this.recognitionResult) {\n        this.inputText = this.recognitionResult.transcription;\n        this.sendMessage();\n        this.clearRecognitionResult();\n      }\n    },\n\n    /**\n     * Ê∏ÖÈô§ËØÜÂà´ÁªìÊûú\n     */\n    clearRecognitionResult() {\n      this.recognitionResult = null;\n    },\n\n    /**\n     * Ëé∑ÂèñËØ≠Èü≥ÊåâÈíÆÂõæÊ†á\n     */\n    getVoiceButtonIcon() {\n      if (this.isProcessing) {\n        return 'spinner';\n      } else if (this.isListening) {\n        return 'microphone-slash';\n      } else {\n        return 'microphone';\n      }\n    },\n\n    /**\n     * Ëé∑ÂèñËØ≠Èü≥ÊåâÈíÆÊ†áÈ¢ò\n     */\n    getVoiceButtonTitle() {\n      if (this.isProcessing) {\n        return 'Ê≠£Âú®ËØÜÂà´‰∏≠...';\n      } else if (this.isListening) {\n        return 'Êåâ‰ΩèËØ¥ËØù';\n      } else {\n        return 'Êåâ‰ΩèËØ¥ËØù';\n      }\n    },\n\n    /**\n     * Ëé∑ÂèñËØ≠Èü≥ËæìÂÖ•Âå∫ÂüüÂç†‰ΩçÁ¨¶ÊñáÊú¨\n     */\n    getVoicePlaceholderText() {\n      if (this.isListening) {\n        return 'Ê≠£Âú®ÂΩïÈü≥‰∏≠... ÊîæÊâãÂèëÈÄÅ';\n      } else {\n        return 'Êåâ‰ΩèËØ¥ËØù';\n      }\n    },\n\n    /**\n     * ÊòæÁ§∫ÊèêÁ§∫‰ø°ÊÅØ\n     */\n    showToast(message, type = 'info') {\n      // ‰ΩøÁî®ÂÖ®Â±ÄtoastÊàñconsole\n      if (this.$toast) {\n        this.$toast[type]?.(message) || this.$toast(message);\n      } else {\n        console.log(`[${type.toUpperCase()}] ${message}`);\n      }\n    },\n\n    /**\n     * ÊâìÂºÄÂõæÁâáÂàÜÊûêÊ®°ÊÄÅÊ°Ü\n     */\n    openImageAnalysis() {\n      this.showImageAnalysisModal = true;\n      log.info('ÊâìÂºÄÂõæÁâáÂàÜÊûêÊ®°ÊÄÅÊ°Ü');\n    },\n\n    /**\n     * ÂÖ≥Èó≠ÂõæÁâáÂàÜÊûêÊ®°ÊÄÅÊ°Ü\n     */\n    closeImageAnalysisModal() {\n      this.showImageAnalysisModal = false;\n      log.info('ÂÖ≥Èó≠ÂõæÁâáÂàÜÊûêÊ®°ÊÄÅÊ°Ü');\n    },\n\n    /**\n     * Â§ÑÁêÜÂõæÁâáÂàÜÊûêÂÆåÊàê\n     */\n    handleImageAnalysisComplete(result) {\n      log.info('ÂõæÁâáÂàÜÊûêÂÆåÊàê', result);\n      \n      // Â∞ÜÂàÜÊûêÁªìÊûú‰Ωú‰∏∫Ê∂àÊÅØÂèëÈÄÅ\n      const analysisMessage = `üñºÔ∏è ÂõæÁâáÂàÜÊûêÁªìÊûúÔºö\\n\\n${result.analysis.content}`;\n      this.$emit('sendMessage', analysisMessage);\n      \n      // ÂÖ≥Èó≠Ê®°ÊÄÅÊ°Ü\n      this.closeImageAnalysisModal();\n      \n      // ÊòæÁ§∫ÊàêÂäüÊèêÁ§∫\n      this.showToast('ÂõæÁâáÂàÜÊûêÂÆåÊàêÔºåÂ∑≤ÂèëÈÄÅÁªìÊûúÔºÅ', 'success');\n    }\n  },\n\n  beforeUnmount() {\n    // Ê∏ÖÁêÜËµÑÊ∫ê\n    if (this.isProcessing) {\n      speechRecognitionService.resetProcessingStatus();\n    }\n    // ÂÅúÊ≠¢ÂΩïÈü≥ÊµÅ\n    if (this.stream) {\n      this.stream.getTracks().forEach(track => track.stop());\n    }\n    // ÂÅúÊ≠¢ËÆ°Êó∂Âô®\n    this.stopRecordingTimer();\n  }\n}\n</script>\n\n<style scoped>\n.input-area {\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background: rgba(255, 255, 255, 0.95);\n  backdrop-filter: blur(20px);\n  border-top: 1px solid rgba(255, 255, 255, 0.3);\n  padding: 8px 16px 8px;\n  z-index: 1000;\n}\n\n.input-container {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.voice-btn {\n  width: 40px;\n  height: 40px;\n  border-radius: 20px;\n  border: none;\n  background: #f2f2f7;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.2s;\n  color: #667eea;\n  position: relative;\n}\n\n.voice-btn.active {\n  background: #ff9500;\n  color: white;\n}\n\n.voice-btn:hover:not(:disabled) {\n  background: #e5e5ea;\n  transform: scale(1.05);\n}\n\n.voice-btn.listening {\n  background: #ff3b30;\n  color: white;\n  animation: pulse 1.5s infinite;\n}\n\n.voice-btn.processing {\n  background: #007aff;\n  color: white;\n  cursor: not-allowed;\n}\n\n.voice-btn:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n}\n\n.voice-btn .pulse {\n  animation: spin 1s linear infinite;\n}\n\n.message-input {\n  width: 100%;\n  border: none;\n  outline: none;\n  font-size: 16px;\n  padding: 12px;\n  background: transparent;\n  border-radius: 20px;\n  background: #f2f2f7;\n  transition: all 0.2s;\n  box-sizing: border-box;\n}\n\n.message-input:focus {\n  background: #ffffff;\n  box-shadow: 0 0 0 2px rgba(0, 122, 255, 0.2);\n}\n\n.message-input:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n}\n\n.message-input::placeholder {\n  color: #8e8e93;\n}\n\n/* Âä®ÊÄÅËæìÂÖ•Âå∫Âüü */\n.dynamic-input-area {\n  flex: 1;\n  position: relative;\n  min-width: 0; /* Á°Æ‰øùflexÂ≠êÂÖÉÁ¥†ÂèØ‰ª•Êî∂Áº© */\n}\n\n/* ËØ≠Èü≥ËæìÂÖ•Âå∫Âüü */\n.voice-input-area {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 12px;\n  padding: 12px;\n  background: #f2f2f7;\n  border-radius: 20px;\n  cursor: pointer;\n  transition: all 0.2s;\n  min-height: 44px;\n  user-select: none;\n  width: 100%;\n  box-sizing: border-box;\n}\n\n.voice-input-area:hover {\n  background: #e5e5ea;\n}\n\n.voice-input-area.listening {\n  background: #ff8e8e;\n  color: white;\n  /* ÁßªÈô§ÊòéÊòæÁöÑÂä®ÁîªÊïàÊûú */\n}\n\n.voice-input-area .voice-area-icon {\n  font-size: 18px;\n  color: #667eea;\n}\n\n.voice-input-area.listening .voice-area-icon {\n  color: white;\n}\n\n.voice-input-area .voice-placeholder {\n  font-size: 16px;\n  color: #8e8e93;\n  font-weight: 500;\n}\n\n.voice-input-area.listening .voice-placeholder {\n  color: white;\n}\n\n.send-btn {\n  width: 40px;\n  height: 40px;\n  border-radius: 20px;\n  border: none;\n  background: #007aff;\n  color: white;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.send-btn:disabled {\n  background: #e5e5ea;\n  color: #8e8e93;\n  cursor: not-allowed;\n}\n\n.send-btn:not(:disabled):hover {\n  background: #0056d3;\n  transform: scale(1.05);\n}\n\n/* ÂõæÁâáÂàÜÊûêÊåâÈíÆÊ†∑Âºè - Ê®°‰ªøÂæÆ‰ø°È£éÊ†º */\n.image-analysis-btn {\n  width: 40px;\n  height: 40px;\n  border-radius: 20px;\n  border: none;\n  background: #f2f2f7;\n  color: #8e8e93;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.image-analysis-btn:hover:not(:disabled) {\n  background: #e5e5ea;\n  color: #007aff;\n  transform: scale(1.05);\n}\n\n.image-analysis-btn:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n}\n\n.image-analysis-btn svg {\n  font-size: 16px;\n}\n\n/* ÂΩïÈü≥Áä∂ÊÄÅÊèêÁ§∫ */\n.recording-status {\n  position: absolute;\n  bottom: 100%;\n  left: 0;\n  right: 0;\n  background: rgba(255, 107, 107, 0.08);\n  border-top: 1px solid rgba(255, 107, 107, 0.15);\n  padding: 12px 16px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  backdrop-filter: blur(10px);\n  z-index: 1000;\n}\n\n.recording-status .status-content {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  color: #ff6b6b;\n  font-size: 14px;\n  font-weight: 500;\n}\n\n.recording-status .recording-icon {\n  font-size: 18px;\n  color: #ff6b6b;\n  /* ÁßªÈô§ÊòéÊòæÁöÑÂä®ÁîªÊïàÊûú */\n}\n\n.recording-status .recording-time {\n  font-size: 14px;\n  color: #ff6b6b;\n  font-weight: 600;\n  background: rgba(255, 107, 107, 0.1);\n  padding: 4px 8px;\n  border-radius: 12px;\n  min-width: 45px;\n  text-align: center;\n}\n\n/* ‰∏äÊªëÂèñÊ∂àÊèêÁ§∫ */\n.cancel-tip {\n  position: absolute;\n  top: -40px;\n  left: 50%;\n  transform: translateX(-50%);\n  background: rgba(255, 107, 107, 0.85);\n  color: white;\n  padding: 8px 16px;\n  border-radius: 20px;\n  font-size: 14px;\n  font-weight: 500;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  animation: slideIn 0.3s ease;\n}\n\n.cancel-tip svg {\n  font-size: 16px;\n  animation: bounce 1s infinite;\n}\n\n@keyframes slideIn {\n  from {\n    opacity: 0;\n    transform: translateX(-50%) translateY(10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateX(-50%) translateY(0);\n  }\n}\n\n@keyframes bounce {\n  0%, 20%, 50%, 80%, 100% {\n    transform: translateY(0);\n  }\n  40% {\n    transform: translateY(-5px);\n  }\n  60% {\n    transform: translateY(-3px);\n  }\n}\n\n/* ËØ≠Èü≥ËØÜÂà´Áä∂ÊÄÅÊèêÁ§∫ */\n.recognition-status {\n  position: absolute;\n  bottom: 100%;\n  left: 0;\n  right: 0;\n  background: rgba(0, 122, 255, 0.1);\n  border-top: 1px solid rgba(0, 122, 255, 0.2);\n  padding: 8px 16px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.status-content {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  color: #007aff;\n  font-size: 14px;\n}\n\n.status-content svg {\n  font-size: 16px;\n}\n\n/* ËØ≠Èü≥ËØÜÂà´ÁªìÊûúÈ¢ÑËßà */\n.recognition-preview {\n  position: absolute;\n  bottom: 100%;\n  left: 0;\n  right: 0;\n  background: rgba(255, 255, 255, 0.98);\n  backdrop-filter: blur(20px);\n  border-top: 1px solid rgba(0, 122, 255, 0.2);\n  border-radius: 16px 16px 0 0;\n  margin: 0 8px;\n  box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.1);\n  overflow: hidden;\n}\n\n.preview-header {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 12px 16px;\n  background: rgba(0, 122, 255, 0.1);\n  border-bottom: 1px solid rgba(0, 122, 255, 0.1);\n  color: #007aff;\n  font-weight: 600;\n  font-size: 14px;\n}\n\n.preview-header svg {\n  font-size: 16px;\n}\n\n.preview-close {\n  margin-left: auto;\n  background: none;\n  border: none;\n  color: #007aff;\n  cursor: pointer;\n  padding: 4px;\n  border-radius: 4px;\n  transition: all 0.2s;\n}\n\n.preview-close:hover {\n  background: rgba(0, 122, 255, 0.1);\n}\n\n.preview-content {\n  padding: 16px;\n}\n\n.preview-text {\n  margin: 0 0 16px 0;\n  font-size: 16px;\n  line-height: 1.5;\n  color: #333;\n  background: #f8f9fa;\n  padding: 12px;\n  border-radius: 8px;\n  border-left: 4px solid #007aff;\n}\n\n.preview-actions {\n  display: flex;\n  gap: 8px;\n}\n\n.preview-btn {\n  flex: 1;\n  padding: 10px 16px;\n  border: none;\n  border-radius: 8px;\n  font-size: 14px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 6px;\n}\n\n.preview-btn-edit {\n  background: #f2f2f7;\n  color: #666;\n}\n\n.preview-btn-edit:hover {\n  background: #e5e5ea;\n}\n\n.preview-btn-send {\n  background: #007aff;\n  color: white;\n}\n\n.preview-btn-send:hover {\n  background: #0056d3;\n}\n\n/* Âä®Áîª */\n@keyframes pulse {\n  0%, 100% {\n    transform: scale(1);\n  }\n  50% {\n    transform: scale(1.1);\n  }\n}\n\n@keyframes spin {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n/* ÂìçÂ∫îÂºèËÆæËÆ° */\n@media (max-width: 430px) {\n  .input-area {\n    padding: 8px 12px 8px;\n  }\n  \n  .voice-btn,\n  .send-btn {\n    width: 36px;\n    height: 36px;\n  }\n  \n  .message-input {\n    font-size: 15px;\n    padding: 10px;\n  }\n  \n  .preview-content {\n    padding: 12px;\n  }\n  \n  .preview-text {\n    font-size: 15px;\n    padding: 10px;\n  }\n  \n  .preview-btn {\n    padding: 8px 12px;\n    font-size: 13px;\n  }\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}