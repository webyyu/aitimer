{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport CollectionCard from '../components/task-collections/CollectionCard.vue';\nimport CollectionModal from '../components/task-collections/CollectionModal.vue';\nimport SubtaskModal from '../components/task-collections/SubtaskModal.vue';\nimport TabBar from '../components/common/TabBar.vue';\nimport LoadingSpinner from '../components/common/LoadingSpinner.vue';\nimport api from '@/api';\nimport collectionApi from '@/api/collections';\nexport default {\n  name: 'TaskCollections',\n  components: {\n    CollectionCard,\n    CollectionModal,\n    SubtaskModal,\n    TabBar,\n    LoadingSpinner\n  },\n  data() {\n    return {\n      collections: [],\n      loading: true,\n      // Modal states\n      showCollectionModal: false,\n      showSubtaskModal: false,\n      editingCollection: null,\n      editingSubtask: null,\n      currentCollectionId: ''\n    };\n  },\n  computed: {\n    currentUserId() {\n      const user = JSON.parse(localStorage.getItem('user') || 'null');\n      return user?._id || user?.id || null;\n    }\n  },\n  async mounted() {\n    await this.loadCollections();\n  },\n  methods: {\n    // Âä†ËΩΩ‰ªªÂä°ÈõÜÂàóË°®\n    async loadCollections() {\n      try {\n        this.loading = true;\n        console.log('üîÑ [TaskCollections] ÂºÄÂßãÂä†ËΩΩ‰ªªÂä°ÈõÜÂàóË°®...');\n        const userId = this.currentUserId;\n        if (!userId) {\n          console.warn('‚ö†Ô∏è [TaskCollections] Êú™ÁôªÂΩïÔºåË∑≥ËΩ¨Âà∞ÁôªÂΩïÈ°µ');\n          this.$router.replace({\n            path: '/auth/login',\n            query: {\n              redirect: this.$route.fullPath\n            }\n          });\n          return;\n        }\n\n        // Âä†ËΩΩÊôÆÈÄö‰ªªÂä°ÈõÜ  \n        const response = await collectionApi.getCollections({\n          userId\n        });\n        console.log('üìã [TaskCollections] APIÂìçÂ∫î:', response);\n        if (response && response.data && response.data.success) {\n          this.collections = response.data.data || [];\n          console.log('‚úÖ [TaskCollections] ÊàêÂäüÂä†ËΩΩ‰ªªÂä°ÈõÜÂàóË°®:', this.collections.length);\n        } else {\n          const message = response?.data?.message || 'ÂìçÂ∫îÊ†ºÂºèÈîôËØØ';\n          console.error('‚ùå [TaskCollections] Âä†ËΩΩ‰ªªÂä°ÈõÜÂ§±Ë¥•:', message);\n          this.$toast?.error(message || 'Âä†ËΩΩ‰ªªÂä°ÈõÜÂ§±Ë¥•');\n        }\n      } catch (error) {\n        console.error('üí• [TaskCollections] Âä†ËΩΩ‰ªªÂä°ÈõÜÂºÇÂ∏∏:', error);\n        this.$toast?.error('Âä†ËΩΩ‰ªªÂä°ÈõÜÂ§±Ë¥•');\n      } finally {\n        this.loading = false;\n      }\n    },\n    // ‰ªªÂä°ÈõÜÁõ∏ÂÖ≥Êìç‰Ωú\n    openCreateCollectionModal() {\n      this.editingCollection = null;\n      this.showCollectionModal = true;\n    },\n    closeCollectionModal() {\n      this.showCollectionModal = false;\n      this.editingCollection = null;\n    },\n    async handleCollectionSubmit(collectionData) {\n      try {\n        const userId = this.currentUserId;\n        if (!userId) {\n          console.warn('‚ö†Ô∏è [TaskCollections] Êú™ÁôªÂΩïÔºåË∑≥ËΩ¨Âà∞ÁôªÂΩïÈ°µ');\n          this.$router.replace({\n            path: '/auth/login',\n            query: {\n              redirect: this.$route.fullPath\n            }\n          });\n          return;\n        }\n        let response;\n        // Áªü‰∏ÄÂ∏¶‰∏ä userId\n        const payload = {\n          ...collectionData,\n          userId\n        };\n        if (collectionData._id) {\n          // ÁºñËæëÁé∞Êúâ‰ªªÂä°ÈõÜ\n          response = await collectionApi.updateCollection(collectionData._id, payload);\n        } else {\n          // ÂàõÂª∫Êñ∞‰ªªÂä°ÈõÜ\n          response = await collectionApi.createCollection(payload);\n        }\n        if (response.data.success) {\n          this.$toast?.success(collectionData._id ? '‰ªªÂä°ÈõÜÊõ¥Êñ∞ÊàêÂäü' : '‰ªªÂä°ÈõÜÂàõÂª∫ÊàêÂäü');\n          this.closeCollectionModal();\n          await this.loadCollections(); // ÈáçÊñ∞Âä†ËΩΩÂàóË°®\n        } else {\n          this.$toast?.error(response.data.message || 'Êìç‰ΩúÂ§±Ë¥•');\n        }\n      } catch (error) {\n        console.error('‰ªªÂä°ÈõÜÊìç‰ΩúÂ§±Ë¥•:', error);\n        this.$toast?.error('Êìç‰ΩúÂ§±Ë¥•');\n      }\n    },\n    // Â≠ê‰ªªÂä°Áõ∏ÂÖ≥Êìç‰Ωú\n    openAddSubtaskModal(collectionId) {\n      this.currentCollectionId = collectionId;\n      // È¢ÑÁΩÆ‰∏Ä‰∏™ËçâÁ®øÂØπË±°ÔºåÁ°Æ‰øùÂ≠ê‰ªªÂä°ÂàõÂª∫Êó∂Êê∫Â∏¶collectionId\n      this.editingSubtask = {\n        title: '',\n        collectionId: collectionId,\n        priority: 'medium',\n        completed: false\n      };\n      this.showSubtaskModal = true;\n    },\n    openEditSubtaskModal(subtask) {\n      this.currentCollectionId = subtask.collectionId;\n      this.editingSubtask = subtask;\n      this.showSubtaskModal = true;\n    },\n    closeSubtaskModal() {\n      this.showSubtaskModal = false;\n      this.editingSubtask = null;\n      this.currentCollectionId = '';\n    },\n    async handleSubtaskSubmit(subtaskData) {\n      try {\n        console.log('üîÑ [TaskCollections] ÂºÄÂßãÂ§ÑÁêÜÂ≠ê‰ªªÂä°Êèê‰∫§:', subtaskData);\n        const userId = this.currentUserId;\n        if (!userId) {\n          console.warn('‚ö†Ô∏è [TaskCollections] Êú™ÁôªÂΩïÔºåË∑≥ËΩ¨Âà∞ÁôªÂΩïÈ°µ');\n          this.$router.replace({\n            path: '/auth/login',\n            query: {\n              redirect: this.$route.fullPath\n            }\n          });\n          return;\n        }\n\n        // Ê∑ªÂä†userIdÂ≠óÊÆµ\n        const taskPayload = {\n          ...subtaskData,\n          collectionId: this.currentCollectionId,\n          userId\n        };\n        let response;\n        if (subtaskData._id) {\n          // ÁºñËæëÁé∞ÊúâÂ≠ê‰ªªÂä°\n          console.log('üìù [TaskCollections] Êõ¥Êñ∞Áé∞ÊúâÂ≠ê‰ªªÂä°:', subtaskData._id);\n          response = await api.tasks.updateTask(subtaskData._id, taskPayload);\n        } else {\n          // ÂàõÂª∫Êñ∞Â≠ê‰ªªÂä°\n          console.log('üÜï [TaskCollections] ÂàõÂª∫Êñ∞Â≠ê‰ªªÂä°');\n          response = await api.tasks.createTask(taskPayload);\n        }\n        console.log('‚úÖ [TaskCollections] Â≠ê‰ªªÂä°APIÂìçÂ∫î:', response);\n        if (response.success) {\n          const message = subtaskData._id ? 'Â≠ê‰ªªÂä°Êõ¥Êñ∞ÊàêÂäü' : 'Â≠ê‰ªªÂä°Ê∑ªÂä†ÊàêÂäü';\n          console.log('üéâ [TaskCollections]', message);\n          this.$toast?.success(message);\n\n          // ÂÖ≥Èó≠ÂºπÁ™ó\n          this.closeSubtaskModal();\n\n          // ÈáçÊñ∞Âä†ËΩΩÂàóË°®‰ª•ÊòæÁ§∫Êõ¥Êñ∞\n          console.log('üîÑ [TaskCollections] ÈáçÊñ∞Âä†ËΩΩ‰ªªÂä°ÈõÜÂàóË°®');\n          await this.loadCollections();\n        } else {\n          console.error('‚ùå [TaskCollections] Â≠ê‰ªªÂä°Êìç‰ΩúÂ§±Ë¥•:', response.message);\n          this.$toast?.error(response.message || 'Êìç‰ΩúÂ§±Ë¥•');\n        }\n      } catch (error) {\n        console.error('üí• [TaskCollections] Â≠ê‰ªªÂä°Êìç‰ΩúÂºÇÂ∏∏:', error);\n        this.$toast?.error('Êìç‰ΩúÂ§±Ë¥•');\n      }\n    },\n    async handleToggleSubtask(subtaskId) {\n      try {\n        console.log('üîÑ [TaskCollections] ÂàáÊç¢Â≠ê‰ªªÂä°Áä∂ÊÄÅ:', subtaskId);\n\n        // ÊâæÂà∞ÂØπÂ∫îÁöÑÂ≠ê‰ªªÂä°\n        let targetSubtask = null;\n        for (const collection of this.collections) {\n          if (collection.subtasks) {\n            const subtask = collection.subtasks.find(st => st._id === subtaskId);\n            if (subtask) {\n              targetSubtask = subtask;\n              break;\n            }\n          }\n        }\n        if (!targetSubtask) {\n          console.error('‚ùå [TaskCollections] Êú™ÊâæÂà∞ÁõÆÊ†áÂ≠ê‰ªªÂä°:', subtaskId);\n          return;\n        }\n        const response = await api.tasks.toggleTaskStatus(subtaskId);\n        console.log('‚úÖ [TaskCollections] Â≠ê‰ªªÂä°Áä∂ÊÄÅÂ∑≤ÂàáÊç¢:', response);\n\n        // Êú¨Âú∞Êõ¥Êñ∞Áä∂ÊÄÅ\n        targetSubtask.completed = !targetSubtask.completed;\n      } catch (error) {\n        console.error('üí• [TaskCollections] ÂàáÊç¢Â≠ê‰ªªÂä°Áä∂ÊÄÅÂºÇÂ∏∏:', error);\n      }\n    },\n    handleToggleExpansion(collectionId) {\n      // Â±ïÂºÄ/ÊäòÂè†Áî±Â≠êÁªÑ‰ª∂ÁÆ°ÁêÜ\n      console.log('üîÑ [TaskCollections] ÂàáÊç¢Â±ïÂºÄÁä∂ÊÄÅ:', collectionId);\n    }\n  }\n};","map":{"version":3,"names":["CollectionCard","CollectionModal","SubtaskModal","TabBar","LoadingSpinner","api","collectionApi","name","components","data","collections","loading","showCollectionModal","showSubtaskModal","editingCollection","editingSubtask","currentCollectionId","computed","currentUserId","user","JSON","parse","localStorage","getItem","_id","id","mounted","loadCollections","methods","console","log","userId","warn","$router","replace","path","query","redirect","$route","fullPath","response","getCollections","success","length","message","error","$toast","openCreateCollectionModal","closeCollectionModal","handleCollectionSubmit","collectionData","payload","updateCollection","createCollection","openAddSubtaskModal","collectionId","title","priority","completed","openEditSubtaskModal","subtask","closeSubtaskModal","handleSubtaskSubmit","subtaskData","taskPayload","tasks","updateTask","createTask","handleToggleSubtask","subtaskId","targetSubtask","collection","subtasks","find","st","toggleTaskStatus","handleToggleExpansion"],"sources":["/Users/bytedance/Desktop/backend(2)/timer/src/views/TaskCollections.vue"],"sourcesContent":["<template>\n  <div class=\"collections-container\">\n    <!-- Header -->\n    <div class=\"header\">\n      <div class=\"header-title\">‰ªªÂä°ÈõÜ</div>\n      <button \n        class=\"create-collection-btn\" \n        @click=\"openCreateCollectionModal\" \n        title=\"ÂàõÂª∫Êñ∞‰ªªÂä°ÈõÜ\"\n      >\n        <font-awesome-icon icon=\"plus\" />\n      </button>\n    </div>\n    \n    <!-- Content -->\n    <div class=\"content\" v-if=\"!loading\">\n      <!-- Collections List -->\n      <template v-if=\"collections.length > 0\">\n        <CollectionCard\n          v-for=\"collection in collections\"\n          :key=\"collection._id\"\n          :collection=\"collection\"\n          @toggle-expansion=\"handleToggleExpansion\"\n          @add-subtask=\"openAddSubtaskModal\"\n          @toggle-subtask=\"handleToggleSubtask\"\n        />\n      </template>\n      \n      <!-- Empty State -->\n      <div v-else class=\"empty-state\">\n        <div class=\"empty-icon\">üìã</div>\n        <div class=\"empty-title\">ÊöÇÊó†‰ªªÂä°ÈõÜ</div>\n        <div class=\"empty-subtitle\">ÁÇπÂáªÂè≥‰∏äËßí + ÊåâÈíÆÂàõÂª∫Á¨¨‰∏Ä‰∏™‰ªªÂä°ÈõÜ</div>\n      </div>\n    </div>\n    \n    <!-- Loading State -->\n    <div v-else class=\"loading-container\">\n      <LoadingSpinner />\n    </div>\n    \n    <!-- Floating Add Button -->\n    <button class=\"add-collection-btn\" @click=\"openCreateCollectionModal\">\n      <font-awesome-icon icon=\"plus\" />\n    </button>\n    \n    <!-- Tab Bar -->\n    <TabBar />\n    \n    <!-- Collection Modal -->\n    <CollectionModal\n      :visible=\"showCollectionModal\"\n      :collection=\"editingCollection\"\n      @close=\"closeCollectionModal\"\n      @submit=\"handleCollectionSubmit\"\n    />\n    \n    <!-- Subtask Modal -->\n    <SubtaskModal\n      :visible=\"showSubtaskModal\"\n      :collection-id=\"currentCollectionId\"\n      :subtask=\"editingSubtask\"\n      @close=\"closeSubtaskModal\"\n      @submit=\"handleSubtaskSubmit\"\n    />\n  </div>\n</template>\n\n<script>\nimport CollectionCard from '../components/task-collections/CollectionCard.vue'\nimport CollectionModal from '../components/task-collections/CollectionModal.vue'\nimport SubtaskModal from '../components/task-collections/SubtaskModal.vue'\nimport TabBar from '../components/common/TabBar.vue'\nimport LoadingSpinner from '../components/common/LoadingSpinner.vue'\nimport api from '@/api'\nimport collectionApi from '@/api/collections'\n\nexport default {\n  name: 'TaskCollections',\n  components: {\n    CollectionCard,\n    CollectionModal,\n    SubtaskModal,\n    TabBar,\n    LoadingSpinner\n  },\n  data() {\n    return {\n      collections: [],\n      loading: true,\n      \n      // Modal states\n      showCollectionModal: false,\n      showSubtaskModal: false,\n      editingCollection: null,\n      editingSubtask: null,\n      currentCollectionId: ''\n    }\n  },\n  computed: {\n    currentUserId() {\n      const user = JSON.parse(localStorage.getItem('user') || 'null')\n      return user?._id || user?.id || null\n    }\n  },\n  async mounted() {\n    await this.loadCollections();\n  },\n  methods: {\n    // Âä†ËΩΩ‰ªªÂä°ÈõÜÂàóË°®\n    async loadCollections() {\n      try {\n        this.loading = true;\n        console.log('üîÑ [TaskCollections] ÂºÄÂßãÂä†ËΩΩ‰ªªÂä°ÈõÜÂàóË°®...');\n        \n        const userId = this.currentUserId\n        if (!userId) {\n          console.warn('‚ö†Ô∏è [TaskCollections] Êú™ÁôªÂΩïÔºåË∑≥ËΩ¨Âà∞ÁôªÂΩïÈ°µ')\n          this.$router.replace({ path: '/auth/login', query: { redirect: this.$route.fullPath } })\n          return\n        }\n        \n        // Âä†ËΩΩÊôÆÈÄö‰ªªÂä°ÈõÜ  \n        const response = await collectionApi.getCollections({ userId });\n        console.log('üìã [TaskCollections] APIÂìçÂ∫î:', response);\n        \n        if (response && response.data && response.data.success) {\n          this.collections = response.data.data || [];\n          console.log('‚úÖ [TaskCollections] ÊàêÂäüÂä†ËΩΩ‰ªªÂä°ÈõÜÂàóË°®:', this.collections.length);\n        } else {\n          const message = response?.data?.message || 'ÂìçÂ∫îÊ†ºÂºèÈîôËØØ'\n          console.error('‚ùå [TaskCollections] Âä†ËΩΩ‰ªªÂä°ÈõÜÂ§±Ë¥•:', message);\n          this.$toast?.error(message || 'Âä†ËΩΩ‰ªªÂä°ÈõÜÂ§±Ë¥•');\n        }\n      } catch (error) {\n        console.error('üí• [TaskCollections] Âä†ËΩΩ‰ªªÂä°ÈõÜÂºÇÂ∏∏:', error);\n        this.$toast?.error('Âä†ËΩΩ‰ªªÂä°ÈõÜÂ§±Ë¥•');\n      } finally {\n        this.loading = false;\n      }\n    },\n    \n    // ‰ªªÂä°ÈõÜÁõ∏ÂÖ≥Êìç‰Ωú\n    openCreateCollectionModal() {\n      this.editingCollection = null;\n      this.showCollectionModal = true;\n    },\n    \n    closeCollectionModal() {\n      this.showCollectionModal = false;\n      this.editingCollection = null;\n    },\n    \n    async handleCollectionSubmit(collectionData) {\n      try {\n        const userId = this.currentUserId\n        if (!userId) {\n          console.warn('‚ö†Ô∏è [TaskCollections] Êú™ÁôªÂΩïÔºåË∑≥ËΩ¨Âà∞ÁôªÂΩïÈ°µ')\n          this.$router.replace({ path: '/auth/login', query: { redirect: this.$route.fullPath } })\n          return\n        }\n        \n        let response;\n        // Áªü‰∏ÄÂ∏¶‰∏ä userId\n        const payload = { ...collectionData, userId }\n        if (collectionData._id) {\n          // ÁºñËæëÁé∞Êúâ‰ªªÂä°ÈõÜ\n          response = await collectionApi.updateCollection(collectionData._id, payload);\n        } else {\n          // ÂàõÂª∫Êñ∞‰ªªÂä°ÈõÜ\n          response = await collectionApi.createCollection(payload);\n        }\n        \n        if (response.data.success) {\n          this.$toast?.success(collectionData._id ? '‰ªªÂä°ÈõÜÊõ¥Êñ∞ÊàêÂäü' : '‰ªªÂä°ÈõÜÂàõÂª∫ÊàêÂäü');\n          this.closeCollectionModal();\n          await this.loadCollections(); // ÈáçÊñ∞Âä†ËΩΩÂàóË°®\n        } else {\n          this.$toast?.error(response.data.message || 'Êìç‰ΩúÂ§±Ë¥•');\n        }\n      } catch (error) {\n        console.error('‰ªªÂä°ÈõÜÊìç‰ΩúÂ§±Ë¥•:', error);\n        this.$toast?.error('Êìç‰ΩúÂ§±Ë¥•');\n      }\n    },\n    \n    // Â≠ê‰ªªÂä°Áõ∏ÂÖ≥Êìç‰Ωú\n    openAddSubtaskModal(collectionId) {\n      this.currentCollectionId = collectionId;\n      // È¢ÑÁΩÆ‰∏Ä‰∏™ËçâÁ®øÂØπË±°ÔºåÁ°Æ‰øùÂ≠ê‰ªªÂä°ÂàõÂª∫Êó∂Êê∫Â∏¶collectionId\n      this.editingSubtask = {\n        title: '',\n        collectionId: collectionId,\n        priority: 'medium',\n        completed: false\n      };\n      this.showSubtaskModal = true;\n    },\n    \n    openEditSubtaskModal(subtask) {\n      this.currentCollectionId = subtask.collectionId;\n      this.editingSubtask = subtask;\n      this.showSubtaskModal = true;\n    },\n    \n    closeSubtaskModal() {\n      this.showSubtaskModal = false;\n      this.editingSubtask = null;\n      this.currentCollectionId = '';\n    },\n    \n    async handleSubtaskSubmit(subtaskData) {\n      try {\n        console.log('üîÑ [TaskCollections] ÂºÄÂßãÂ§ÑÁêÜÂ≠ê‰ªªÂä°Êèê‰∫§:', subtaskData);\n        \n        const userId = this.currentUserId\n        if (!userId) {\n          console.warn('‚ö†Ô∏è [TaskCollections] Êú™ÁôªÂΩïÔºåË∑≥ËΩ¨Âà∞ÁôªÂΩïÈ°µ')\n          this.$router.replace({ path: '/auth/login', query: { redirect: this.$route.fullPath } })\n          return\n        }\n        \n        // Ê∑ªÂä†userIdÂ≠óÊÆµ\n        const taskPayload = {\n          ...subtaskData,\n          collectionId: this.currentCollectionId,\n          userId\n        };\n        \n        let response;\n        if (subtaskData._id) {\n          // ÁºñËæëÁé∞ÊúâÂ≠ê‰ªªÂä°\n          console.log('üìù [TaskCollections] Êõ¥Êñ∞Áé∞ÊúâÂ≠ê‰ªªÂä°:', subtaskData._id);\n          response = await api.tasks.updateTask(subtaskData._id, taskPayload);\n        } else {\n          // ÂàõÂª∫Êñ∞Â≠ê‰ªªÂä°\n          console.log('üÜï [TaskCollections] ÂàõÂª∫Êñ∞Â≠ê‰ªªÂä°');\n          response = await api.tasks.createTask(taskPayload);\n        }\n        \n        console.log('‚úÖ [TaskCollections] Â≠ê‰ªªÂä°APIÂìçÂ∫î:', response);\n        \n        if (response.success) {\n          const message = subtaskData._id ? 'Â≠ê‰ªªÂä°Êõ¥Êñ∞ÊàêÂäü' : 'Â≠ê‰ªªÂä°Ê∑ªÂä†ÊàêÂäü';\n          console.log('üéâ [TaskCollections]', message);\n          this.$toast?.success(message);\n          \n          // ÂÖ≥Èó≠ÂºπÁ™ó\n          this.closeSubtaskModal();\n          \n          // ÈáçÊñ∞Âä†ËΩΩÂàóË°®‰ª•ÊòæÁ§∫Êõ¥Êñ∞\n          console.log('üîÑ [TaskCollections] ÈáçÊñ∞Âä†ËΩΩ‰ªªÂä°ÈõÜÂàóË°®');\n          await this.loadCollections();\n        } else {\n          console.error('‚ùå [TaskCollections] Â≠ê‰ªªÂä°Êìç‰ΩúÂ§±Ë¥•:', response.message);\n          this.$toast?.error(response.message || 'Êìç‰ΩúÂ§±Ë¥•');\n        }\n      } catch (error) {\n        console.error('üí• [TaskCollections] Â≠ê‰ªªÂä°Êìç‰ΩúÂºÇÂ∏∏:', error);\n        this.$toast?.error('Êìç‰ΩúÂ§±Ë¥•');\n      }\n    },\n    \n    async handleToggleSubtask(subtaskId) {\n      try {\n        console.log('üîÑ [TaskCollections] ÂàáÊç¢Â≠ê‰ªªÂä°Áä∂ÊÄÅ:', subtaskId);\n        \n        // ÊâæÂà∞ÂØπÂ∫îÁöÑÂ≠ê‰ªªÂä°\n        let targetSubtask = null;\n        \n        for (const collection of this.collections) {\n          if (collection.subtasks) {\n            const subtask = collection.subtasks.find(st => st._id === subtaskId);\n            if (subtask) {\n              targetSubtask = subtask;\n              break;\n            }\n          }\n        }\n        \n        if (!targetSubtask) {\n          console.error('‚ùå [TaskCollections] Êú™ÊâæÂà∞ÁõÆÊ†áÂ≠ê‰ªªÂä°:', subtaskId);\n          return;\n        }\n        \n        const response = await api.tasks.toggleTaskStatus(subtaskId);\n        console.log('‚úÖ [TaskCollections] Â≠ê‰ªªÂä°Áä∂ÊÄÅÂ∑≤ÂàáÊç¢:', response);\n        \n        // Êú¨Âú∞Êõ¥Êñ∞Áä∂ÊÄÅ\n        targetSubtask.completed = !targetSubtask.completed;\n      } catch (error) {\n        console.error('üí• [TaskCollections] ÂàáÊç¢Â≠ê‰ªªÂä°Áä∂ÊÄÅÂºÇÂ∏∏:', error);\n      }\n    },\n    \n    handleToggleExpansion(collectionId) {\n      // Â±ïÂºÄ/ÊäòÂè†Áî±Â≠êÁªÑ‰ª∂ÁÆ°ÁêÜ\n      console.log('üîÑ [TaskCollections] ÂàáÊç¢Â±ïÂºÄÁä∂ÊÄÅ:', collectionId)\n    }\n  }\n}\n</script>\n\n<style scoped>\n* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\n.collections-container {\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  background: #f8f9fe;\n  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;\n}\n\n.header {\n  background: #fff;\n  padding: 16px 30px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  box-shadow: 0 1px 3px rgba(0,0,0,0.05);\n  position: sticky;\n  top: 0;\n  z-index: 100;\n}\n\n.header-title {\n  font-size: 32px;\n  font-weight: 700;\n  color: #1d1d1f;\n}\n\n.create-collection-btn {\n  width: 36px;\n  height: 36px;\n  border-radius: 18px;\n  background: linear-gradient(135deg, #4a90e2, #007aff);\n  color: white;\n  border: none;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  font-size: 18px;\n  box-shadow: 0 4px 12px rgba(74, 144, 226, 0.3);\n}\n\n.create-collection-btn:hover {\n  transform: translateY(-2px) scale(1.1);\n  box-shadow: 0 6px 20px rgba(74, 144, 226, 0.4);\n}\n\n.content {\n  flex: 1;\n  overflow-y: auto;\n  padding: 20px 16px;\n  padding-bottom: 120px; /* ‰∏∫Â∫ïÈÉ®ÂØºËà™Ê†èÂíåÊµÆÂä®ÊåâÈíÆÁïôÂá∫Á©∫Èó¥ */\n}\n\n.loading-container {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.empty-state {\n  text-align: center;\n  padding: 60px 20px;\n  color: #8e8e93;\n}\n\n.empty-icon {\n  font-size: 48px;\n  margin-bottom: 16px;\n  color: #d1d1d6;\n}\n\n.empty-title {\n  font-size: 18px;\n  font-weight: 600;\n  color: #1d1d1f;\n  margin-bottom: 8px;\n}\n\n.empty-subtitle {\n  font-size: 14px;\n  color: #8e8e93;\n}\n\n.add-collection-btn {\n  position: fixed;\n  bottom: 100px;\n  right: 30px;\n  width: 60px;\n  height: 60px;\n  border-radius: 30px;\n  background: linear-gradient(135deg, #4a90e2, #007aff);\n  color: white;\n  border: none;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  box-shadow: 0 6px 20px rgba(74, 144, 226, 0.4);\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  z-index: 100;\n  font-size: 24px;\n}\n\n.add-collection-btn:hover {\n  transform: translateY(-3px) scale(1.1);\n  box-shadow: 0 8px 25px rgba(74, 144, 226, 0.5);\n}\n\n/* ÁßªÂä®Á´ØÈÄÇÈÖç */\n@media (max-width: 768px) {\n  .header {\n    padding: 12px 20px;\n  }\n  \n  .header-title {\n    font-size: 28px;\n  }\n  \n  .content {\n    padding: 16px 12px;\n    padding-bottom: 120px;\n  }\n  \n  .add-collection-btn {\n    bottom: 90px;\n    right: 20px;\n    width: 56px;\n    height: 56px;\n    font-size: 22px;\n  }\n}\n\n/* Ë∂ÖÂ∞èÂ±èÂπïÈÄÇÈÖç */\n@media (max-width: 480px) {\n  .header {\n    padding: 10px 16px;\n  }\n  \n  .header-title {\n    font-size: 24px;\n  }\n  \n  .create-collection-btn {\n    width: 32px;\n    height: 32px;\n    font-size: 16px;\n  }\n  \n  .content {\n    padding: 12px 8px;\n  }\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}