{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/**\r\n * 语音识别服务\r\n * 提供音频文件转文字的功能\r\n */\n\nimport { getSpeechRecognitionApiUrl } from '../../config/api.js';\nimport { log } from '../utils/logger.js';\n\n// API端点配置\nconst API_ENDPOINTS = {\n  RECOGNIZE: '/speech-recognition/recognize',\n  // 完整识别流程\n  UPLOAD_ONLY: '/speech-recognition/upload',\n  // 仅上传文件\n  RECOGNIZE_URL: '/speech-recognition/recognize-url' // 从URL识别\n};\n\n// 获取token\nfunction getToken() {\n  return localStorage.getItem('token') || localStorage.getItem('userToken') || '';\n}\n\n// 获取用户ID\nfunction getCurrentUserId() {\n  try {\n    const user = JSON.parse(localStorage.getItem('user') || 'null');\n    return user?._id || user?.id || null;\n  } catch (_) {\n    return null;\n  }\n}\n\n/**\r\n * 语音识别服务类\r\n */\nclass SpeechRecognitionService {\n  constructor() {\n    this.userId = getCurrentUserId();\n    this.isProcessing = false;\n    log.info('语音识别服务初始化', {\n      userId: this.userId\n    });\n  }\n\n  /**\r\n   * 检查认证状态\r\n   */\n  checkAuth() {\n    const token = getToken();\n    if (!token) {\n      throw new Error('未登录，请先登录');\n    }\n    return token;\n  }\n\n  /**\r\n   * 完整语音识别流程\r\n   * @param {File} audioFile - 音频文件对象\r\n   * @returns {Promise<Object>} 识别结果\r\n   */\n  async recognizeVoice(audioFile) {\n    try {\n      this.isProcessing = true;\n      log.info('开始语音识别', {\n        fileName: audioFile.name,\n        fileSize: audioFile.size\n      });\n\n      // 检查文件类型\n      const allowedTypes = ['audio/mpeg', 'audio/wav', 'audio/mp4', 'audio/aac', 'audio/flac', 'audio/ogg', 'audio/webm'];\n      if (!allowedTypes.includes(audioFile.type)) {\n        throw new Error('不支持的音频格式，请使用 MP3, WAV, M4A, AAC, FLAC, OGG, WEBM 格式');\n      }\n\n      // 检查文件大小（10MB限制）\n      if (audioFile.size > 10 * 1024 * 1024) {\n        throw new Error('文件大小不能超过10MB');\n      }\n      const token = this.checkAuth();\n\n      // 创建FormData\n      const formData = new FormData();\n      formData.append('audio', audioFile);\n\n      // 发送请求\n      const response = await fetch(getSpeechRecognitionApiUrl(API_ENDPOINTS.RECOGNIZE), {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        },\n        body: formData\n      });\n      if (!response.ok) {\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n      }\n      const result = await response.json();\n      if (result.success) {\n        log.success('语音识别成功', {\n          transcription: result.data.transcription,\n          audioUrl: result.data.audioUrl\n        });\n        return {\n          success: true,\n          transcription: result.data.transcription,\n          // 识别文本\n          audioUrl: result.data.audioUrl,\n          // 音频文件URL\n          ossKey: result.data.ossKey // OSS存储路径\n        };\n      } else {\n        throw new Error(result.error || result.message || '识别失败');\n      }\n    } catch (error) {\n      log.error('语音识别失败', error);\n      throw error;\n    } finally {\n      this.isProcessing = false;\n    }\n  }\n\n  /**\r\n   * 仅上传音频文件\r\n   * @param {File} audioFile - 音频文件对象\r\n   * @returns {Promise<Object>} 上传结果\r\n   */\n  async uploadAudioOnly(audioFile) {\n    try {\n      this.isProcessing = true;\n      log.info('开始上传音频文件', {\n        fileName: audioFile.name,\n        fileSize: audioFile.size\n      });\n      const token = this.checkAuth();\n      const formData = new FormData();\n      formData.append('audio', audioFile);\n      const response = await fetch(getSpeechRecognitionApiUrl(API_ENDPOINTS.UPLOAD_ONLY), {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        },\n        body: formData\n      });\n      if (!response.ok) {\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n      }\n      const result = await response.json();\n      if (result.success) {\n        log.success('音频文件上传成功', {\n          audioUrl: result.data.audioUrl,\n          ossKey: result.data.ossKey\n        });\n        return {\n          success: true,\n          audioUrl: result.data.audioUrl,\n          ossKey: result.data.ossKey\n        };\n      } else {\n        throw new Error(result.error || result.message || '上传失败');\n      }\n    } catch (error) {\n      log.error('音频文件上传失败', error);\n      throw error;\n    } finally {\n      this.isProcessing = false;\n    }\n  }\n\n  /**\r\n   * 从URL识别音频\r\n   * @param {string} audioUrl - 音频文件URL\r\n   * @returns {Promise<Object>} 识别结果\r\n   */\n  async recognizeFromUrl(audioUrl) {\n    try {\n      this.isProcessing = true;\n      log.info('从URL识别音频', {\n        audioUrl\n      });\n      const token = this.checkAuth();\n      const response = await fetch(getSpeechRecognitionApiUrl(API_ENDPOINTS.RECOGNIZE_URL), {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          audioUrl\n        })\n      });\n      if (!response.ok) {\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n      }\n      const result = await response.json();\n      if (result.success) {\n        log.success('URL识别成功', {\n          transcription: result.data.transcription\n        });\n        return {\n          success: true,\n          transcription: result.data.transcription,\n          audioUrl: result.data.audioUrl\n        };\n      } else {\n        throw new Error(result.error || result.message || '识别失败');\n      }\n    } catch (error) {\n      log.error('URL识别失败', error);\n      throw error;\n    } finally {\n      this.isProcessing = false;\n    }\n  }\n\n  /**\r\n   * 检查音频文件是否有效\r\n   * @param {File} file - 音频文件\r\n   * @returns {Object} 检查结果\r\n   */\n  validateAudioFile(file) {\n    const allowedTypes = ['audio/mpeg', 'audio/wav', 'audio/mp4', 'audio/aac', 'audio/flac', 'audio/ogg', 'audio/webm'];\n    const maxSize = 100 * 1024 * 1024; // 100MB\n\n    const validation = {\n      isValid: true,\n      errors: []\n    };\n    if (!file) {\n      validation.isValid = false;\n      validation.errors.push('请选择音频文件');\n      return validation;\n    }\n    if (!allowedTypes.includes(file.type)) {\n      validation.isValid = false;\n      validation.errors.push('不支持的音频格式，请使用 MP3, WAV, M4A, AAC, FLAC, OGG 格式');\n    }\n    if (file.size > maxSize) {\n      validation.isValid = false;\n      validation.errors.push('文件大小不能超过10MB');\n    }\n    return validation;\n  }\n\n  /**\r\n   * 获取处理状态\r\n   */\n  getProcessingStatus() {\n    return this.isProcessing;\n  }\n\n  /**\r\n   * 重置处理状态\r\n   */\n  resetProcessingStatus() {\n    this.isProcessing = false;\n  }\n}\n\n// 创建单例实例\nconst speechRecognitionService = new SpeechRecognitionService();\nexport default speechRecognitionService;\n\n// 同时导出类，用于需要多实例的场景\nexport { SpeechRecognitionService };","map":{"version":3,"names":["getSpeechRecognitionApiUrl","log","API_ENDPOINTS","RECOGNIZE","UPLOAD_ONLY","RECOGNIZE_URL","getToken","localStorage","getItem","getCurrentUserId","user","JSON","parse","_id","id","_","SpeechRecognitionService","constructor","userId","isProcessing","info","checkAuth","token","Error","recognizeVoice","audioFile","fileName","name","fileSize","size","allowedTypes","includes","type","formData","FormData","append","response","fetch","method","headers","body","ok","status","statusText","result","json","success","transcription","data","audioUrl","ossKey","error","message","uploadAudioOnly","recognizeFromUrl","stringify","validateAudioFile","file","maxSize","validation","isValid","errors","push","getProcessingStatus","resetProcessingStatus","speechRecognitionService"],"sources":["C:/Users/wuby/OneDrive/Desktop/已完成/ai秘书/backup/timer/src/AIsiri/services/speechRecognitionService.js"],"sourcesContent":["/**\r\n * 语音识别服务\r\n * 提供音频文件转文字的功能\r\n */\r\n\r\nimport { getSpeechRecognitionApiUrl } from '../../config/api.js'\r\nimport { log } from '../utils/logger.js'\r\n\r\n// API端点配置\r\nconst API_ENDPOINTS = {\r\n  RECOGNIZE: '/speech-recognition/recognize',        // 完整识别流程\r\n  UPLOAD_ONLY: '/speech-recognition/upload',        // 仅上传文件\r\n  RECOGNIZE_URL: '/speech-recognition/recognize-url' // 从URL识别\r\n}\r\n\r\n// 获取token\r\nfunction getToken() {\r\n  return localStorage.getItem('token') || localStorage.getItem('userToken') || ''\r\n}\r\n\r\n// 获取用户ID\r\nfunction getCurrentUserId() {\r\n  try {\r\n    const user = JSON.parse(localStorage.getItem('user') || 'null')\r\n    return user?._id || user?.id || null\r\n  } catch (_) {\r\n    return null\r\n  }\r\n}\r\n\r\n/**\r\n * 语音识别服务类\r\n */\r\nclass SpeechRecognitionService {\r\n  constructor() {\r\n    this.userId = getCurrentUserId()\r\n    this.isProcessing = false\r\n    log.info('语音识别服务初始化', { userId: this.userId })\r\n  }\r\n\r\n  /**\r\n   * 检查认证状态\r\n   */\r\n  checkAuth() {\r\n    const token = getToken()\r\n    if (!token) {\r\n      throw new Error('未登录，请先登录')\r\n    }\r\n    return token\r\n  }\r\n\r\n  /**\r\n   * 完整语音识别流程\r\n   * @param {File} audioFile - 音频文件对象\r\n   * @returns {Promise<Object>} 识别结果\r\n   */\r\n  async recognizeVoice(audioFile) {\r\n    try {\r\n      this.isProcessing = true\r\n      log.info('开始语音识别', { fileName: audioFile.name, fileSize: audioFile.size })\r\n\r\n      // 检查文件类型\r\n      const allowedTypes = ['audio/mpeg', 'audio/wav', 'audio/mp4', 'audio/aac', 'audio/flac', 'audio/ogg', 'audio/webm']\r\n      if (!allowedTypes.includes(audioFile.type)) {\r\n        throw new Error('不支持的音频格式，请使用 MP3, WAV, M4A, AAC, FLAC, OGG, WEBM 格式')\r\n      }\r\n\r\n      // 检查文件大小（10MB限制）\r\n      if (audioFile.size > 10 * 1024 * 1024) {\r\n        throw new Error('文件大小不能超过10MB')\r\n      }\r\n\r\n      const token = this.checkAuth()\r\n\r\n      // 创建FormData\r\n      const formData = new FormData()\r\n      formData.append('audio', audioFile)\r\n\r\n      // 发送请求\r\n      const response = await fetch(getSpeechRecognitionApiUrl(API_ENDPOINTS.RECOGNIZE), {\r\n        method: 'POST',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n        body: formData\r\n      })\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`)\r\n      }\r\n\r\n      const result = await response.json()\r\n      \r\n      if (result.success) {\r\n        log.success('语音识别成功', { \r\n          transcription: result.data.transcription,\r\n          audioUrl: result.data.audioUrl \r\n        })\r\n        return {\r\n          success: true,\r\n          transcription: result.data.transcription,  // 识别文本\r\n          audioUrl: result.data.audioUrl,           // 音频文件URL\r\n          ossKey: result.data.ossKey               // OSS存储路径\r\n        }\r\n      } else {\r\n        throw new Error(result.error || result.message || '识别失败')\r\n      }\r\n    } catch (error) {\r\n      log.error('语音识别失败', error)\r\n      throw error\r\n    } finally {\r\n      this.isProcessing = false\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 仅上传音频文件\r\n   * @param {File} audioFile - 音频文件对象\r\n   * @returns {Promise<Object>} 上传结果\r\n   */\r\n  async uploadAudioOnly(audioFile) {\r\n    try {\r\n      this.isProcessing = true\r\n      log.info('开始上传音频文件', { fileName: audioFile.name, fileSize: audioFile.size })\r\n\r\n      const token = this.checkAuth()\r\n\r\n      const formData = new FormData()\r\n      formData.append('audio', audioFile)\r\n\r\n      const response = await fetch(getSpeechRecognitionApiUrl(API_ENDPOINTS.UPLOAD_ONLY), {\r\n        method: 'POST',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n        body: formData\r\n      })\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`)\r\n      }\r\n\r\n      const result = await response.json()\r\n      \r\n      if (result.success) {\r\n        log.success('音频文件上传成功', { \r\n          audioUrl: result.data.audioUrl,\r\n          ossKey: result.data.ossKey \r\n        })\r\n        return {\r\n          success: true,\r\n          audioUrl: result.data.audioUrl,\r\n          ossKey: result.data.ossKey\r\n        }\r\n      } else {\r\n        throw new Error(result.error || result.message || '上传失败')\r\n      }\r\n    } catch (error) {\r\n      log.error('音频文件上传失败', error)\r\n      throw error\r\n    } finally {\r\n      this.isProcessing = false\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 从URL识别音频\r\n   * @param {string} audioUrl - 音频文件URL\r\n   * @returns {Promise<Object>} 识别结果\r\n   */\r\n  async recognizeFromUrl(audioUrl) {\r\n    try {\r\n      this.isProcessing = true\r\n      log.info('从URL识别音频', { audioUrl })\r\n\r\n      const token = this.checkAuth()\r\n\r\n      const response = await fetch(getSpeechRecognitionApiUrl(API_ENDPOINTS.RECOGNIZE_URL), {\r\n        method: 'POST',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({ audioUrl })\r\n      })\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`)\r\n      }\r\n\r\n      const result = await response.json()\r\n      \r\n      if (result.success) {\r\n        log.success('URL识别成功', { \r\n          transcription: result.data.transcription \r\n        })\r\n        return {\r\n          success: true,\r\n          transcription: result.data.transcription,\r\n          audioUrl: result.data.audioUrl\r\n        }\r\n      } else {\r\n        throw new Error(result.error || result.message || '识别失败')\r\n      }\r\n    } catch (error) {\r\n      log.error('URL识别失败', error)\r\n      throw error\r\n    } finally {\r\n      this.isProcessing = false\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 检查音频文件是否有效\r\n   * @param {File} file - 音频文件\r\n   * @returns {Object} 检查结果\r\n   */\r\n  validateAudioFile(file) {\r\n    const allowedTypes = ['audio/mpeg', 'audio/wav', 'audio/mp4', 'audio/aac', 'audio/flac', 'audio/ogg', 'audio/webm']\r\n    const maxSize = 100 * 1024 * 1024 // 100MB\r\n\r\n    const validation = {\r\n      isValid: true,\r\n      errors: []\r\n    }\r\n\r\n    if (!file) {\r\n      validation.isValid = false\r\n      validation.errors.push('请选择音频文件')\r\n      return validation\r\n    }\r\n\r\n    if (!allowedTypes.includes(file.type)) {\r\n      validation.isValid = false\r\n      validation.errors.push('不支持的音频格式，请使用 MP3, WAV, M4A, AAC, FLAC, OGG 格式')\r\n    }\r\n\r\n    if (file.size > maxSize) {\r\n      validation.isValid = false\r\n      validation.errors.push('文件大小不能超过10MB')\r\n    }\r\n\r\n    return validation\r\n  }\r\n\r\n  /**\r\n   * 获取处理状态\r\n   */\r\n  getProcessingStatus() {\r\n    return this.isProcessing\r\n  }\r\n\r\n  /**\r\n   * 重置处理状态\r\n   */\r\n  resetProcessingStatus() {\r\n    this.isProcessing = false\r\n  }\r\n}\r\n\r\n// 创建单例实例\r\nconst speechRecognitionService = new SpeechRecognitionService()\r\n\r\nexport default speechRecognitionService\r\n\r\n// 同时导出类，用于需要多实例的场景\r\nexport { SpeechRecognitionService }\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}