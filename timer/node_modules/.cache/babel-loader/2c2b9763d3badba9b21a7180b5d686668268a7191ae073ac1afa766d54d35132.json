{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"auth-page\"\n};\nconst _hoisted_2 = {\n  class: \"auth-container\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_AuthLogo = _resolveComponent(\"AuthLogo\");\n  const _component_LoginForm = _resolveComponent(\"LoginForm\");\n  const _component_RegisterForm = _resolveComponent(\"RegisterForm\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_AuthLogo), $setup.currentMode === 'login' ? (_openBlock(), _createBlock(_component_LoginForm, {\n    key: 0,\n    onSwitchMode: $setup.switchMode,\n    onSubmit: $setup.handleLogin\n  }, null, 8, [\"onSwitchMode\", \"onSubmit\"])) : (_openBlock(), _createBlock(_component_RegisterForm, {\n    key: 1,\n    onSwitchMode: $setup.switchMode,\n    onSubmit: $setup.handleRegister\n  }, null, 8, [\"onSwitchMode\", \"onSubmit\"]))]), _cache[0] || (_cache[0] = _createElementVNode(\"div\", {\n    class: \"bg-decoration\"\n  }, [_createElementVNode(\"div\", {\n    class: \"bg-circle bg-circle-1\"\n  }), _createElementVNode(\"div\", {\n    class: \"bg-circle bg-circle-2\"\n  }), _createElementVNode(\"div\", {\n    class: \"bg-circle bg-circle-3\"\n  })], -1))]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createVNode","_component_AuthLogo","$setup","currentMode","_createBlock","_component_LoginForm","onSwitchMode","switchMode","onSubmit","handleLogin","_component_RegisterForm","handleRegister"],"sources":["C:\\Users\\wuby\\OneDrive\\Desktop\\backend(1) 3\\timer\\src\\views\\Auth.vue"],"sourcesContent":["<template>\n  <div class=\"auth-page\">\n    <div class=\"auth-container\">\n      <!-- Logoéƒ¨åˆ† -->\n      <AuthLogo />\n\n      <!-- ç™»å½•è¡¨å• -->\n      <LoginForm\n        v-if=\"currentMode === 'login'\"\n        @switch-mode=\"switchMode\"\n        @submit=\"handleLogin\"\n      />\n\n      <!-- æ³¨å†Œè¡¨å• -->\n      <RegisterForm\n        v-else\n        @switch-mode=\"switchMode\"\n        @submit=\"handleRegister\"\n      />\n    </div>\n\n    <!-- èƒŒæ™¯è£…é¥° -->\n    <div class=\"bg-decoration\">\n      <div class=\"bg-circle bg-circle-1\"></div>\n      <div class=\"bg-circle bg-circle-2\"></div>\n      <div class=\"bg-circle bg-circle-3\"></div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref, onMounted } from 'vue'\nimport { useRouter, useRoute } from 'vue-router'\nimport { useToast } from 'vue-toastification'\nimport AuthLogo from '../components/login/AuthLogo.vue'\nimport LoginForm from '../components/login/LoginForm.vue'\nimport RegisterForm from '../components/login/RegisterForm.vue'\nimport { useAuthStore } from '../store/auth.js'\n\nexport default {\n  name: 'AuthPage',\n  components: {\n    AuthLogo,\n    LoginForm,\n    RegisterForm\n  },\n  setup() {\n    const router = useRouter()\n    const route = useRoute()\n    const toast = useToast()\n    const authStore = useAuthStore()\n\n    // å½“å‰æ¨¡å¼ï¼ˆç™»å½•/æ³¨å†Œï¼‰\n    const currentMode = ref('login')\n\n    // æ£€æŸ¥æ˜¯å¦å·²ç»ç™»å½•\n    onMounted(() => {\n      console.log('ğŸ” æ£€æŸ¥ç”¨æˆ·ç™»å½•çŠ¶æ€')\n      if (authStore.isAuthenticated.value) {\n        console.log('âœ… ç”¨æˆ·å·²ç™»å½•ï¼Œè·³è½¬åˆ°ä¸»é¡µ')\n        router.replace('/')\n        return\n      }\n\n      // æ ¹æ®è·¯ç”±å‚æ•°è®¾ç½®æ¨¡å¼\n      const mode = route.params.mode || 'login'\n      if (['login', 'register'].includes(mode)) {\n        currentMode.value = mode\n        console.log(`ğŸ“± è®¾ç½®è®¤è¯æ¨¡å¼: ${mode}`)\n      }\n    })\n\n    // åˆ‡æ¢æ¨¡å¼\n    const switchMode = (mode) => {\n      console.log(`ğŸ”„ åˆ‡æ¢è®¤è¯æ¨¡å¼: ${currentMode.value} -> ${mode}`)\n      currentMode.value = mode\n      // æ›´æ–°URLä½†ä¸è§¦å‘è·¯ç”±è·³è½¬\n      const newPath = `/auth/${mode}`\n      if (route.path !== newPath) {\n        router.replace(newPath)\n      }\n    }\n\n    // å¤„ç†ç™»å½•\n    const handleLogin = async (credentials) => {\n      console.log('ğŸ” å¤„ç†ç”¨æˆ·ç™»å½•')\n      try {\n        const result = await authStore.login(credentials)\n        \n        if (result.success) {\n          toast.success(`æ¬¢è¿å›æ¥ï¼Œ${result.user.nickname || result.user.maskedPhoneNumber}ï¼`)\n          console.log('ğŸ‰ ç™»å½•æˆåŠŸï¼Œå‡†å¤‡è·³è½¬')\n          \n          // å»¶è¿Ÿè·³è½¬ä»¥æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯\n          setTimeout(() => {\n            const redirectPath = route.query.redirect || '/'\n            console.log(`ğŸ”„ è·³è½¬åˆ°: ${redirectPath}`)\n            router.replace(redirectPath)\n          }, 1000)\n        }\n      } catch (error) {\n        console.error('âŒ ç™»å½•å¤±è´¥:', error)\n        const errorMessage = error.response?.data?.message || error.message || 'ç™»å½•å¤±è´¥ï¼Œè¯·é‡è¯•'\n        toast.error(errorMessage)\n        // ä¸å†å‘ä¸Šä¼ é€’é”™è¯¯ï¼Œé¿å…è§¦å‘â€œUnhandled error during execution of component event handlerâ€\n      }\n    }\n\n    // å¤„ç†æ³¨å†Œ\n    const handleRegister = async (userData) => {\n      console.log('ğŸ“ å¤„ç†ç”¨æˆ·æ³¨å†Œ')\n      try {\n        const result = await authStore.register(userData)\n        \n        if (result.success) {\n          toast.success(`æ³¨å†ŒæˆåŠŸï¼æ¬¢è¿åŠ å…¥ï¼Œ${result.user.nickname || result.user.maskedPhoneNumber}ï¼`)\n          console.log('ğŸ‰ æ³¨å†ŒæˆåŠŸï¼Œå‡†å¤‡è·³è½¬')\n          \n          // å»¶è¿Ÿè·³è½¬ä»¥æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯\n          setTimeout(() => {\n            console.log('ğŸ”„ è·³è½¬åˆ°ä¸»é¡µ')\n            router.replace('/')\n          }, 1000)\n        }\n      } catch (error) {\n        console.error('âŒ æ³¨å†Œå¤±è´¥:', error)\n        const errorMessage = error.response?.data?.message || error.message || 'æ³¨å†Œå¤±è´¥ï¼Œè¯·é‡è¯•'\n        toast.error(errorMessage)\n        throw error // è®©è¡¨å•ç»„ä»¶ä¹Ÿèƒ½å¤„ç†é”™è¯¯\n      }\n    }\n\n    return {\n      currentMode,\n      switchMode,\n      handleLogin,\n      handleRegister\n    }\n  }\n}\n</script>\n\n<style scoped>\n.auth-page {\n  min-height: 100vh;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 20px;\n  position: relative;\n  overflow: hidden;\n}\n\n.auth-container {\n  background: rgba(255, 255, 255, 0.95);\n  backdrop-filter: blur(20px);\n  border-radius: 24px;\n  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);\n  padding: 48px 40px;\n  width: 100%;\n  max-width: 380px;\n  position: relative;\n  z-index: 10;\n  transition: all 0.3s ease;\n}\n\n.auth-container:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);\n}\n\n/* èƒŒæ™¯è£…é¥° */\n.bg-decoration {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  pointer-events: none;\n  z-index: 1;\n}\n\n.bg-circle {\n  position: absolute;\n  border-radius: 50%;\n  background: rgba(255, 255, 255, 0.1);\n  animation: float 6s ease-in-out infinite;\n}\n\n.bg-circle-1 {\n  width: 120px;\n  height: 120px;\n  top: 10%;\n  left: 10%;\n  animation-delay: 0s;\n}\n\n.bg-circle-2 {\n  width: 80px;\n  height: 80px;\n  top: 70%;\n  right: 15%;\n  animation-delay: 2s;\n}\n\n.bg-circle-3 {\n  width: 60px;\n  height: 60px;\n  top: 30%;\n  right: 25%;\n  animation-delay: 4s;\n}\n\n@keyframes float {\n  0%, 100% {\n    transform: translateY(0) rotate(0deg);\n    opacity: 0.7;\n  }\n  50% {\n    transform: translateY(-20px) rotate(180deg);\n    opacity: 1;\n  }\n}\n\n/* ç§»åŠ¨ç«¯é€‚é… */\n@media (max-width: 480px) {\n  .auth-page {\n    padding: 16px;\n  }\n  \n  .auth-container {\n    padding: 40px 32px;\n    max-width: 100%;\n    border-radius: 20px;\n  }\n  \n  /* ç§»åŠ¨ç«¯éšè—éƒ¨åˆ†èƒŒæ™¯è£…é¥°ä»¥æå‡æ€§èƒ½ */\n  .bg-circle-2,\n  .bg-circle-3 {\n    display: none;\n  }\n}\n\n/* å¹³æ¿é€‚é… */\n@media (min-width: 481px) and (max-width: 768px) {\n  .auth-container {\n    max-width: 420px;\n    padding: 44px 36px;\n  }\n}\n\n/* å¤§å±å¹•ä¼˜åŒ– */\n@media (min-width: 1200px) {\n  .auth-container {\n    max-width: 400px;\n    padding: 52px 44px;\n  }\n}\n\n/* é«˜åº¦è¾ƒå°çš„å±å¹•é€‚é… */\n@media (max-height: 700px) {\n  .auth-page {\n    padding: 10px;\n  }\n  \n  .auth-container {\n    padding: 30px 32px;\n  }\n}\n\n/* æ·±è‰²æ¨¡å¼é€‚é… */\n@media (prefers-color-scheme: dark) {\n  .auth-container {\n    background: rgba(26, 26, 26, 0.95);\n    color: #fff;\n  }\n}\n\n/* å‡å°‘åŠ¨ç”»ä»¥èŠ‚çœç”µé‡ */\n@media (prefers-reduced-motion: reduce) {\n  .auth-container,\n  .bg-circle {\n    animation: none;\n    transition: none;\n  }\n  \n  .auth-container:hover {\n    transform: none;\n  }\n}\n</style>"],"mappings":";;EACOA,KAAK,EAAC;AAAW;;EACfA,KAAK,EAAC;AAAgB;;;;;uBAD7BC,mBAAA,CA0BM,OA1BNC,UA0BM,GAzBJC,mBAAA,CAiBM,OAjBNC,UAiBM,GAfJC,YAAA,CAAYC,mBAAA,GAIJC,MAAA,CAAAC,WAAW,gB,cADnBC,YAAA,CAIEC,oBAAA;;IAFCC,YAAW,EAAEJ,MAAA,CAAAK,UAAU;IACvBC,QAAM,EAAEN,MAAA,CAAAO;8DAIXL,YAAA,CAIEM,uBAAA;;IAFCJ,YAAW,EAAEJ,MAAA,CAAAK,UAAU;IACvBC,QAAM,EAAEN,MAAA,CAAAS;0EAKbb,mBAAA,CAIM;IAJDH,KAAK,EAAC;EAAe,IACxBG,mBAAA,CAAyC;IAApCH,KAAK,EAAC;EAAuB,IAClCG,mBAAA,CAAyC;IAApCH,KAAK,EAAC;EAAuB,IAClCG,mBAAA,CAAyC;IAApCH,KAAK,EAAC;EAAuB,G","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}