{"ast":null,"code":"export default {\n  name: 'CollectionModal',\n  props: {\n    visible: {\n      type: Boolean,\n      default: false\n    },\n    collection: {\n      type: Object,\n      default: null\n    }\n  },\n  emits: ['close', 'submit'],\n  data() {\n    return {\n      formData: {\n        name: ''\n      }\n    };\n  },\n  computed: {\n    isEditing() {\n      return this.collection !== null;\n    }\n  },\n  watch: {\n    visible(newVal) {\n      if (newVal) {\n        this.resetForm();\n        this.$nextTick(() => {\n          this.$refs.nameInput?.focus();\n        });\n        // 绑定ESC键事件\n        document.addEventListener('keydown', this.handleKeyDown);\n      } else {\n        // 移除ESC键事件监听\n        document.removeEventListener('keydown', this.handleKeyDown);\n      }\n    },\n    collection: {\n      handler(newVal) {\n        if (newVal) {\n          this.formData.name = newVal.name || '';\n        } else {\n          this.resetForm();\n        }\n      },\n      immediate: true\n    }\n  },\n  methods: {\n    resetForm() {\n      if (this.collection) {\n        this.formData.name = this.collection.name || '';\n      } else {\n        this.formData.name = '';\n      }\n    },\n    handleSubmit() {\n      if (!this.formData.name.trim()) {\n        return;\n      }\n      const submitData = {\n        name: this.formData.name.trim()\n      };\n      if (this.isEditing) {\n        submitData._id = this.collection._id;\n      }\n      this.$emit('submit', submitData);\n    },\n    closeModal() {\n      this.$emit('close');\n    },\n    handleKeyDown(event) {\n      if (event.key === 'Escape') {\n        this.closeModal();\n      }\n    }\n  },\n  beforeUnmount() {\n    // 确保移除事件监听\n    document.removeEventListener('keydown', this.handleKeyDown);\n  }\n};","map":{"version":3,"names":["name","props","visible","type","Boolean","default","collection","Object","emits","data","formData","computed","isEditing","watch","newVal","resetForm","$nextTick","$refs","nameInput","focus","document","addEventListener","handleKeyDown","removeEventListener","handler","immediate","methods","handleSubmit","trim","submitData","_id","$emit","closeModal","event","key","beforeUnmount"],"sources":["C:\\Users\\wuby\\OneDrive\\Desktop\\backend(1) 3\\timer\\src\\components\\task-collections\\CollectionModal.vue"],"sourcesContent":["<template>\n  <div v-if=\"visible\" class=\"modal\" @click=\"closeModal\">\n    <div class=\"modal-content\" @click.stop>\n      <div class=\"modal-header\">{{ isEditing ? '编辑任务集' : '创建新任务集' }}</div>\n      \n      <form @submit.prevent=\"handleSubmit\">\n        <div class=\"form-group\">\n          <label for=\"collectionName\">任务集名称</label>\n          <input\n            id=\"collectionName\"\n            type=\"text\"\n            class=\"modal-input\"\n            v-model=\"formData.name\"\n            placeholder=\"请输入任务集名称\"\n            maxlength=\"50\"\n            required\n            ref=\"nameInput\"\n          />\n        </div>\n        \n        <div class=\"modal-actions\">\n          <button type=\"button\" class=\"modal-btn cancel\" @click=\"closeModal\">\n            取消\n          </button>\n          <button type=\"submit\" class=\"modal-btn confirm\" :disabled=\"!formData.name.trim()\">\n            {{ isEditing ? '保存' : '创建' }}\n          </button>\n        </div>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'CollectionModal',\n  props: {\n    visible: {\n      type: Boolean,\n      default: false\n    },\n    collection: {\n      type: Object,\n      default: null\n    }\n  },\n  emits: ['close', 'submit'],\n  data() {\n    return {\n      formData: {\n        name: ''\n      }\n    }\n  },\n  computed: {\n    isEditing() {\n      return this.collection !== null;\n    }\n  },\n  watch: {\n    visible(newVal) {\n      if (newVal) {\n        this.resetForm();\n        this.$nextTick(() => {\n          this.$refs.nameInput?.focus();\n        });\n        // 绑定ESC键事件\n        document.addEventListener('keydown', this.handleKeyDown);\n      } else {\n        // 移除ESC键事件监听\n        document.removeEventListener('keydown', this.handleKeyDown);\n      }\n    },\n    collection: {\n      handler(newVal) {\n        if (newVal) {\n          this.formData.name = newVal.name || '';\n        } else {\n          this.resetForm();\n        }\n      },\n      immediate: true\n    }\n  },\n  methods: {\n    resetForm() {\n      if (this.collection) {\n        this.formData.name = this.collection.name || '';\n      } else {\n        this.formData.name = '';\n      }\n    },\n    handleSubmit() {\n      if (!this.formData.name.trim()) {\n        return;\n      }\n      \n      const submitData = {\n        name: this.formData.name.trim()\n      };\n      \n      if (this.isEditing) {\n        submitData._id = this.collection._id;\n      }\n      \n      this.$emit('submit', submitData);\n    },\n    closeModal() {\n      this.$emit('close');\n    },\n    handleKeyDown(event) {\n      if (event.key === 'Escape') {\n        this.closeModal();\n      }\n    }\n  },\n  beforeUnmount() {\n    // 确保移除事件监听\n    document.removeEventListener('keydown', this.handleKeyDown);\n  }\n}\n</script>\n\n<style scoped>\n.modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.5);\n  backdrop-filter: blur(10px);\n  z-index: 1000;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  animation: fadeIn 0.3s ease-out;\n}\n\n.modal-content {\n  background: white;\n  border-radius: 20px;\n  padding: 32px;\n  width: 90%;\n  max-width: 380px;\n  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);\n  animation: slideUp 0.3s ease-out;\n  max-height: 80vh;\n  overflow-y: auto;\n}\n\n.modal-header {\n  font-size: 20px;\n  font-weight: 600;\n  color: #1d1d1f;\n  margin-bottom: 24px;\n  text-align: center;\n}\n\n.form-group {\n  margin-bottom: 20px;\n}\n\n.form-group label {\n  display: block;\n  font-size: 14px;\n  font-weight: 500;\n  color: #1d1d1f;\n  margin-bottom: 8px;\n}\n\n.modal-input {\n  width: 100%;\n  padding: 16px;\n  border: 1px solid #e5e7eb;\n  border-radius: 12px;\n  font-size: 16px;\n  font-family: 'Inter', sans-serif;\n  transition: border-color 0.2s;\n  box-sizing: border-box;\n}\n\n.modal-textarea {\n  width: 100%;\n  padding: 16px;\n  border: 1px solid #e5e7eb;\n  border-radius: 12px;\n  font-size: 16px;\n  font-family: 'Inter', sans-serif;\n  transition: border-color 0.2s;\n  box-sizing: border-box;\n  resize: vertical;\n  min-height: 80px;\n}\n\n.modal-input:focus,\n.modal-textarea:focus {\n  outline: none;\n  border-color: #007aff;\n}\n\n.modal-actions {\n  display: flex;\n  gap: 12px;\n  margin-top: 24px;\n}\n\n.modal-btn {\n  flex: 1;\n  padding: 12px 24px;\n  border: none;\n  border-radius: 12px;\n  font-size: 16px;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.modal-btn:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n.modal-btn.cancel {\n  background: #f3f4f6;\n  color: #6b7280;\n}\n\n.modal-btn.cancel:hover:not(:disabled) {\n  background: #e5e7eb;\n}\n\n.modal-btn.confirm {\n  background: linear-gradient(135deg, #4a90e2, #007aff);\n  color: white;\n}\n\n.modal-btn.confirm:hover:not(:disabled) {\n  transform: translateY(-1px);\n  box-shadow: 0 4px 12px rgba(74, 144, 226, 0.3);\n}\n\n@keyframes fadeIn {\n  from { opacity: 0; }\n  to { opacity: 1; }\n}\n\n@keyframes slideUp {\n  from { \n    opacity: 0;\n    transform: translateY(20px);\n  }\n  to { \n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n</style>"],"mappings":"AAkCA,eAAe;EACbA,IAAI,EAAE,iBAAiB;EACvBC,KAAK,EAAE;IACLC,OAAO,EAAE;MACPC,IAAI,EAAEC,OAAO;MACbC,OAAO,EAAE;IACX,CAAC;IACDC,UAAU,EAAE;MACVH,IAAI,EAAEI,MAAM;MACZF,OAAO,EAAE;IACX;EACF,CAAC;EACDG,KAAK,EAAE,CAAC,OAAO,EAAE,QAAQ,CAAC;EAC1BC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,QAAQ,EAAE;QACRV,IAAI,EAAE;MACR;IACF;EACF,CAAC;EACDW,QAAQ,EAAE;IACRC,SAASA,CAAA,EAAG;MACV,OAAO,IAAI,CAACN,UAAS,KAAM,IAAI;IACjC;EACF,CAAC;EACDO,KAAK,EAAE;IACLX,OAAOA,CAACY,MAAM,EAAE;MACd,IAAIA,MAAM,EAAE;QACV,IAAI,CAACC,SAAS,CAAC,CAAC;QAChB,IAAI,CAACC,SAAS,CAAC,MAAM;UACnB,IAAI,CAACC,KAAK,CAACC,SAAS,EAAEC,KAAK,CAAC,CAAC;QAC/B,CAAC,CAAC;QACF;QACAC,QAAQ,CAACC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAACC,aAAa,CAAC;MAC1D,OAAO;QACL;QACAF,QAAQ,CAACG,mBAAmB,CAAC,SAAS,EAAE,IAAI,CAACD,aAAa,CAAC;MAC7D;IACF,CAAC;IACDhB,UAAU,EAAE;MACVkB,OAAOA,CAACV,MAAM,EAAE;QACd,IAAIA,MAAM,EAAE;UACV,IAAI,CAACJ,QAAQ,CAACV,IAAG,GAAIc,MAAM,CAACd,IAAG,IAAK,EAAE;QACxC,OAAO;UACL,IAAI,CAACe,SAAS,CAAC,CAAC;QAClB;MACF,CAAC;MACDU,SAAS,EAAE;IACb;EACF,CAAC;EACDC,OAAO,EAAE;IACPX,SAASA,CAAA,EAAG;MACV,IAAI,IAAI,CAACT,UAAU,EAAE;QACnB,IAAI,CAACI,QAAQ,CAACV,IAAG,GAAI,IAAI,CAACM,UAAU,CAACN,IAAG,IAAK,EAAE;MACjD,OAAO;QACL,IAAI,CAACU,QAAQ,CAACV,IAAG,GAAI,EAAE;MACzB;IACF,CAAC;IACD2B,YAAYA,CAAA,EAAG;MACb,IAAI,CAAC,IAAI,CAACjB,QAAQ,CAACV,IAAI,CAAC4B,IAAI,CAAC,CAAC,EAAE;QAC9B;MACF;MAEA,MAAMC,UAAS,GAAI;QACjB7B,IAAI,EAAE,IAAI,CAACU,QAAQ,CAACV,IAAI,CAAC4B,IAAI,CAAC;MAChC,CAAC;MAED,IAAI,IAAI,CAAChB,SAAS,EAAE;QAClBiB,UAAU,CAACC,GAAE,GAAI,IAAI,CAACxB,UAAU,CAACwB,GAAG;MACtC;MAEA,IAAI,CAACC,KAAK,CAAC,QAAQ,EAAEF,UAAU,CAAC;IAClC,CAAC;IACDG,UAAUA,CAAA,EAAG;MACX,IAAI,CAACD,KAAK,CAAC,OAAO,CAAC;IACrB,CAAC;IACDT,aAAaA,CAACW,KAAK,EAAE;MACnB,IAAIA,KAAK,CAACC,GAAE,KAAM,QAAQ,EAAE;QAC1B,IAAI,CAACF,UAAU,CAAC,CAAC;MACnB;IACF;EACF,CAAC;EACDG,aAAaA,CAAA,EAAG;IACd;IACAf,QAAQ,CAACG,mBAAmB,CAAC,SAAS,EAAE,IAAI,CAACD,aAAa,CAAC;EAC7D;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}