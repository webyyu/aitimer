{"ast":null,"code":"import { ref, onMounted } from 'vue';\nimport { useRouter, useRoute } from 'vue-router';\nimport { useToast } from 'vue-toastification';\nimport AuthLogo from '../components/login/AuthLogo.vue';\nimport LoginForm from '../components/login/LoginForm.vue';\nimport RegisterForm from '../components/login/RegisterForm.vue';\nimport { useAuthStore } from '../store/auth.js';\nexport default {\n  name: 'AuthPage',\n  components: {\n    AuthLogo,\n    LoginForm,\n    RegisterForm\n  },\n  setup() {\n    const router = useRouter();\n    const route = useRoute();\n    const toast = useToast();\n    const authStore = useAuthStore();\n\n    // ÂΩìÂâçÊ®°ÂºèÔºàÁôªÂΩï/Ê≥®ÂÜåÔºâ\n    const currentMode = ref('login');\n\n    // Ê£ÄÊü•ÊòØÂê¶Â∑≤ÁªèÁôªÂΩï\n    onMounted(() => {\n      console.log('üîç Ê£ÄÊü•Áî®Êà∑ÁôªÂΩïÁä∂ÊÄÅ');\n      if (authStore.isAuthenticated.value) {\n        console.log('‚úÖ Áî®Êà∑Â∑≤ÁôªÂΩïÔºåË∑≥ËΩ¨Âà∞‰∏ªÈ°µ');\n        router.replace('/');\n        return;\n      }\n\n      // Ê†πÊçÆË∑ØÁî±ÂèÇÊï∞ËÆæÁΩÆÊ®°Âºè\n      const mode = route.params.mode || 'login';\n      if (['login', 'register'].includes(mode)) {\n        currentMode.value = mode;\n        console.log(`üì± ËÆæÁΩÆËÆ§ËØÅÊ®°Âºè: ${mode}`);\n      }\n    });\n\n    // ÂàáÊç¢Ê®°Âºè\n    const switchMode = mode => {\n      console.log(`üîÑ ÂàáÊç¢ËÆ§ËØÅÊ®°Âºè: ${currentMode.value} -> ${mode}`);\n      currentMode.value = mode;\n      // Êõ¥Êñ∞URL‰ΩÜ‰∏çËß¶ÂèëË∑ØÁî±Ë∑≥ËΩ¨\n      const newPath = `/auth/${mode}`;\n      if (route.path !== newPath) {\n        router.replace(newPath);\n      }\n    };\n\n    // Â§ÑÁêÜÁôªÂΩï\n    const handleLogin = async credentials => {\n      console.log('üîê Â§ÑÁêÜÁî®Êà∑ÁôªÂΩï');\n      try {\n        const result = await authStore.login(credentials);\n        if (result.success) {\n          toast.success(`Ê¨¢ËøéÂõûÊù•Ôºå${result.user.nickname || result.user.maskedPhoneNumber}ÔºÅ`);\n          console.log('üéâ ÁôªÂΩïÊàêÂäüÔºåÂáÜÂ§áË∑≥ËΩ¨');\n\n          // Âª∂ËøüË∑≥ËΩ¨‰ª•ÊòæÁ§∫ÊàêÂäüÊ∂àÊÅØ\n          setTimeout(() => {\n            const redirectPath = route.query.redirect || '/';\n            console.log(`üîÑ Ë∑≥ËΩ¨Âà∞: ${redirectPath}`);\n            router.replace(redirectPath);\n          }, 1000);\n        }\n      } catch (error) {\n        console.error('‚ùå ÁôªÂΩïÂ§±Ë¥•:', error);\n        const errorMessage = error.response?.data?.message || error.message || 'ÁôªÂΩïÂ§±Ë¥•ÔºåËØ∑ÈáçËØï';\n        toast.error(errorMessage);\n        // ‰∏çÂÜçÂêë‰∏ä‰º†ÈÄíÈîôËØØÔºåÈÅøÂÖçËß¶Âèë‚ÄúUnhandled error during execution of component event handler‚Äù\n      }\n    };\n\n    // Â§ÑÁêÜÊ≥®ÂÜå\n    const handleRegister = async userData => {\n      console.log('üìù Â§ÑÁêÜÁî®Êà∑Ê≥®ÂÜå');\n      try {\n        const result = await authStore.register(userData);\n        if (result.success) {\n          toast.success(`Ê≥®ÂÜåÊàêÂäüÔºÅÊ¨¢ËøéÂä†ÂÖ•Ôºå${result.user.nickname || result.user.maskedPhoneNumber}ÔºÅ`);\n          console.log('üéâ Ê≥®ÂÜåÊàêÂäüÔºåÂáÜÂ§áË∑≥ËΩ¨');\n\n          // Âª∂ËøüË∑≥ËΩ¨‰ª•ÊòæÁ§∫ÊàêÂäüÊ∂àÊÅØ\n          setTimeout(() => {\n            console.log('üîÑ Ë∑≥ËΩ¨Âà∞‰∏ªÈ°µ');\n            router.replace('/');\n          }, 1000);\n        }\n      } catch (error) {\n        console.error('‚ùå Ê≥®ÂÜåÂ§±Ë¥•:', error);\n        const errorMessage = error.response?.data?.message || error.message || 'Ê≥®ÂÜåÂ§±Ë¥•ÔºåËØ∑ÈáçËØï';\n        toast.error(errorMessage);\n        throw error; // ËÆ©Ë°®ÂçïÁªÑ‰ª∂‰πüËÉΩÂ§ÑÁêÜÈîôËØØ\n      }\n    };\n    return {\n      currentMode,\n      switchMode,\n      handleLogin,\n      handleRegister\n    };\n  }\n};","map":{"version":3,"names":["ref","onMounted","useRouter","useRoute","useToast","AuthLogo","LoginForm","RegisterForm","useAuthStore","name","components","setup","router","route","toast","authStore","currentMode","console","log","isAuthenticated","value","replace","mode","params","includes","switchMode","newPath","path","handleLogin","credentials","result","login","success","user","nickname","maskedPhoneNumber","setTimeout","redirectPath","query","redirect","error","errorMessage","response","data","message","handleRegister","userData","register"],"sources":["C:\\Users\\wuby\\OneDrive\\Desktop\\backend(1) 3\\timer\\timer\\src\\views\\Auth.vue"],"sourcesContent":["<template>\n  <div class=\"auth-page\">\n    <div class=\"auth-container\">\n      <!-- LogoÈÉ®ÂàÜ -->\n      <AuthLogo />\n\n      <!-- ÁôªÂΩïË°®Âçï -->\n      <LoginForm\n        v-if=\"currentMode === 'login'\"\n        @switch-mode=\"switchMode\"\n        @submit=\"handleLogin\"\n      />\n\n      <!-- Ê≥®ÂÜåË°®Âçï -->\n      <RegisterForm\n        v-else\n        @switch-mode=\"switchMode\"\n        @submit=\"handleRegister\"\n      />\n    </div>\n\n    <!-- ËÉåÊôØË£ÖÈ•∞ -->\n    <div class=\"bg-decoration\">\n      <div class=\"bg-circle bg-circle-1\"></div>\n      <div class=\"bg-circle bg-circle-2\"></div>\n      <div class=\"bg-circle bg-circle-3\"></div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref, onMounted } from 'vue'\nimport { useRouter, useRoute } from 'vue-router'\nimport { useToast } from 'vue-toastification'\nimport AuthLogo from '../components/login/AuthLogo.vue'\nimport LoginForm from '../components/login/LoginForm.vue'\nimport RegisterForm from '../components/login/RegisterForm.vue'\nimport { useAuthStore } from '../store/auth.js'\n\nexport default {\n  name: 'AuthPage',\n  components: {\n    AuthLogo,\n    LoginForm,\n    RegisterForm\n  },\n  setup() {\n    const router = useRouter()\n    const route = useRoute()\n    const toast = useToast()\n    const authStore = useAuthStore()\n\n    // ÂΩìÂâçÊ®°ÂºèÔºàÁôªÂΩï/Ê≥®ÂÜåÔºâ\n    const currentMode = ref('login')\n\n    // Ê£ÄÊü•ÊòØÂê¶Â∑≤ÁªèÁôªÂΩï\n    onMounted(() => {\n      console.log('üîç Ê£ÄÊü•Áî®Êà∑ÁôªÂΩïÁä∂ÊÄÅ')\n      if (authStore.isAuthenticated.value) {\n        console.log('‚úÖ Áî®Êà∑Â∑≤ÁôªÂΩïÔºåË∑≥ËΩ¨Âà∞‰∏ªÈ°µ')\n        router.replace('/')\n        return\n      }\n\n      // Ê†πÊçÆË∑ØÁî±ÂèÇÊï∞ËÆæÁΩÆÊ®°Âºè\n      const mode = route.params.mode || 'login'\n      if (['login', 'register'].includes(mode)) {\n        currentMode.value = mode\n        console.log(`üì± ËÆæÁΩÆËÆ§ËØÅÊ®°Âºè: ${mode}`)\n      }\n    })\n\n    // ÂàáÊç¢Ê®°Âºè\n    const switchMode = (mode) => {\n      console.log(`üîÑ ÂàáÊç¢ËÆ§ËØÅÊ®°Âºè: ${currentMode.value} -> ${mode}`)\n      currentMode.value = mode\n      // Êõ¥Êñ∞URL‰ΩÜ‰∏çËß¶ÂèëË∑ØÁî±Ë∑≥ËΩ¨\n      const newPath = `/auth/${mode}`\n      if (route.path !== newPath) {\n        router.replace(newPath)\n      }\n    }\n\n    // Â§ÑÁêÜÁôªÂΩï\n    const handleLogin = async (credentials) => {\n      console.log('üîê Â§ÑÁêÜÁî®Êà∑ÁôªÂΩï')\n      try {\n        const result = await authStore.login(credentials)\n        \n        if (result.success) {\n          toast.success(`Ê¨¢ËøéÂõûÊù•Ôºå${result.user.nickname || result.user.maskedPhoneNumber}ÔºÅ`)\n          console.log('üéâ ÁôªÂΩïÊàêÂäüÔºåÂáÜÂ§áË∑≥ËΩ¨')\n          \n          // Âª∂ËøüË∑≥ËΩ¨‰ª•ÊòæÁ§∫ÊàêÂäüÊ∂àÊÅØ\n          setTimeout(() => {\n            const redirectPath = route.query.redirect || '/'\n            console.log(`üîÑ Ë∑≥ËΩ¨Âà∞: ${redirectPath}`)\n            router.replace(redirectPath)\n          }, 1000)\n        }\n      } catch (error) {\n        console.error('‚ùå ÁôªÂΩïÂ§±Ë¥•:', error)\n        const errorMessage = error.response?.data?.message || error.message || 'ÁôªÂΩïÂ§±Ë¥•ÔºåËØ∑ÈáçËØï'\n        toast.error(errorMessage)\n        // ‰∏çÂÜçÂêë‰∏ä‰º†ÈÄíÈîôËØØÔºåÈÅøÂÖçËß¶Âèë‚ÄúUnhandled error during execution of component event handler‚Äù\n      }\n    }\n\n    // Â§ÑÁêÜÊ≥®ÂÜå\n    const handleRegister = async (userData) => {\n      console.log('üìù Â§ÑÁêÜÁî®Êà∑Ê≥®ÂÜå')\n      try {\n        const result = await authStore.register(userData)\n        \n        if (result.success) {\n          toast.success(`Ê≥®ÂÜåÊàêÂäüÔºÅÊ¨¢ËøéÂä†ÂÖ•Ôºå${result.user.nickname || result.user.maskedPhoneNumber}ÔºÅ`)\n          console.log('üéâ Ê≥®ÂÜåÊàêÂäüÔºåÂáÜÂ§áË∑≥ËΩ¨')\n          \n          // Âª∂ËøüË∑≥ËΩ¨‰ª•ÊòæÁ§∫ÊàêÂäüÊ∂àÊÅØ\n          setTimeout(() => {\n            console.log('üîÑ Ë∑≥ËΩ¨Âà∞‰∏ªÈ°µ')\n            router.replace('/')\n          }, 1000)\n        }\n      } catch (error) {\n        console.error('‚ùå Ê≥®ÂÜåÂ§±Ë¥•:', error)\n        const errorMessage = error.response?.data?.message || error.message || 'Ê≥®ÂÜåÂ§±Ë¥•ÔºåËØ∑ÈáçËØï'\n        toast.error(errorMessage)\n        throw error // ËÆ©Ë°®ÂçïÁªÑ‰ª∂‰πüËÉΩÂ§ÑÁêÜÈîôËØØ\n      }\n    }\n\n    return {\n      currentMode,\n      switchMode,\n      handleLogin,\n      handleRegister\n    }\n  }\n}\n</script>\n\n<style scoped>\n.auth-page {\n  min-height: 100vh;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 20px;\n  position: relative;\n  overflow: hidden;\n}\n\n.auth-container {\n  background: rgba(255, 255, 255, 0.95);\n  backdrop-filter: blur(20px);\n  border-radius: 24px;\n  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);\n  padding: 48px 40px;\n  width: 100%;\n  max-width: 380px;\n  position: relative;\n  z-index: 10;\n  transition: all 0.3s ease;\n}\n\n.auth-container:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);\n}\n\n/* ËÉåÊôØË£ÖÈ•∞ */\n.bg-decoration {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  pointer-events: none;\n  z-index: 1;\n}\n\n.bg-circle {\n  position: absolute;\n  border-radius: 50%;\n  background: rgba(255, 255, 255, 0.1);\n  animation: float 6s ease-in-out infinite;\n}\n\n.bg-circle-1 {\n  width: 120px;\n  height: 120px;\n  top: 10%;\n  left: 10%;\n  animation-delay: 0s;\n}\n\n.bg-circle-2 {\n  width: 80px;\n  height: 80px;\n  top: 70%;\n  right: 15%;\n  animation-delay: 2s;\n}\n\n.bg-circle-3 {\n  width: 60px;\n  height: 60px;\n  top: 30%;\n  right: 25%;\n  animation-delay: 4s;\n}\n\n@keyframes float {\n  0%, 100% {\n    transform: translateY(0) rotate(0deg);\n    opacity: 0.7;\n  }\n  50% {\n    transform: translateY(-20px) rotate(180deg);\n    opacity: 1;\n  }\n}\n\n/* ÁßªÂä®Á´ØÈÄÇÈÖç */\n@media (max-width: 480px) {\n  .auth-page {\n    padding: 16px;\n  }\n  \n  .auth-container {\n    padding: 40px 32px;\n    max-width: 100%;\n    border-radius: 20px;\n  }\n  \n  /* ÁßªÂä®Á´ØÈöêËóèÈÉ®ÂàÜËÉåÊôØË£ÖÈ•∞‰ª•ÊèêÂçáÊÄßËÉΩ */\n  .bg-circle-2,\n  .bg-circle-3 {\n    display: none;\n  }\n}\n\n/* Âπ≥ÊùøÈÄÇÈÖç */\n@media (min-width: 481px) and (max-width: 768px) {\n  .auth-container {\n    max-width: 420px;\n    padding: 44px 36px;\n  }\n}\n\n/* Â§ßÂ±èÂπï‰ºòÂåñ */\n@media (min-width: 1200px) {\n  .auth-container {\n    max-width: 400px;\n    padding: 52px 44px;\n  }\n}\n\n/* È´òÂ∫¶ËæÉÂ∞èÁöÑÂ±èÂπïÈÄÇÈÖç */\n@media (max-height: 700px) {\n  .auth-page {\n    padding: 10px;\n  }\n  \n  .auth-container {\n    padding: 30px 32px;\n  }\n}\n\n/* Ê∑±Ëâ≤Ê®°ÂºèÈÄÇÈÖç */\n@media (prefers-color-scheme: dark) {\n  .auth-container {\n    background: rgba(26, 26, 26, 0.95);\n    color: #fff;\n  }\n}\n\n/* ÂáèÂ∞ëÂä®Áîª‰ª•ËäÇÁúÅÁîµÈáè */\n@media (prefers-reduced-motion: reduce) {\n  .auth-container,\n  .bg-circle {\n    animation: none;\n    transition: none;\n  }\n  \n  .auth-container:hover {\n    transform: none;\n  }\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}