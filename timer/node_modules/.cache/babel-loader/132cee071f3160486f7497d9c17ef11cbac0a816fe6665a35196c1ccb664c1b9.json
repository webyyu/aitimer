{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"modal-header\"\n};\nconst _hoisted_2 = {\n  class: \"form-group\"\n};\nconst _hoisted_3 = {\n  class: \"modal-actions\"\n};\nconst _hoisted_4 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return $props.visible ? (_openBlock(), _createElementBlock(\"div\", {\n    key: 0,\n    class: \"modal\",\n    onClick: _cache[4] || (_cache[4] = (...args) => $options.closeModal && $options.closeModal(...args))\n  }, [_createElementVNode(\"div\", {\n    class: \"modal-content\",\n    onClick: _cache[3] || (_cache[3] = _withModifiers(() => {}, [\"stop\"]))\n  }, [_createElementVNode(\"div\", _hoisted_1, _toDisplayString($options.isEditing ? '编辑任务集' : '创建新任务集'), 1 /* TEXT */), _createElementVNode(\"form\", {\n    onSubmit: _cache[2] || (_cache[2] = _withModifiers((...args) => $options.handleSubmit && $options.handleSubmit(...args), [\"prevent\"]))\n  }, [_createElementVNode(\"div\", _hoisted_2, [_cache[5] || (_cache[5] = _createElementVNode(\"label\", {\n    for: \"collectionName\"\n  }, \"任务集名称\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    id: \"collectionName\",\n    type: \"text\",\n    class: \"modal-input\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.formData.name = $event),\n    placeholder: \"请输入任务集名称\",\n    maxlength: \"50\",\n    required: \"\",\n    ref: \"nameInput\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.formData.name]])]), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"button\", {\n    type: \"button\",\n    class: \"modal-btn cancel\",\n    onClick: _cache[1] || (_cache[1] = (...args) => $options.closeModal && $options.closeModal(...args))\n  }, \" 取消 \"), _createElementVNode(\"button\", {\n    type: \"submit\",\n    class: \"modal-btn confirm\",\n    disabled: !$data.formData.name.trim()\n  }, _toDisplayString($options.isEditing ? '保存' : '创建'), 9 /* TEXT, PROPS */, _hoisted_4)])], 32 /* NEED_HYDRATION */)])])) : _createCommentVNode(\"v-if\", true);\n}","map":{"version":3,"names":["class","$props","visible","_createElementBlock","onClick","_cache","args","$options","closeModal","_createElementVNode","_withModifiers","_hoisted_1","_toDisplayString","isEditing","onSubmit","handleSubmit","_hoisted_2","for","id","type","$data","formData","name","$event","placeholder","maxlength","required","ref","_hoisted_3","disabled","trim","_hoisted_4"],"sources":["C:\\Users\\wuby\\OneDrive\\Desktop\\backend(1) 3\\timer\\timer\\src\\components\\task-collections\\CollectionModal.vue"],"sourcesContent":["<template>\n  <div v-if=\"visible\" class=\"modal\" @click=\"closeModal\">\n    <div class=\"modal-content\" @click.stop>\n      <div class=\"modal-header\">{{ isEditing ? '编辑任务集' : '创建新任务集' }}</div>\n      \n      <form @submit.prevent=\"handleSubmit\">\n        <div class=\"form-group\">\n          <label for=\"collectionName\">任务集名称</label>\n          <input\n            id=\"collectionName\"\n            type=\"text\"\n            class=\"modal-input\"\n            v-model=\"formData.name\"\n            placeholder=\"请输入任务集名称\"\n            maxlength=\"50\"\n            required\n            ref=\"nameInput\"\n          />\n        </div>\n        \n        <div class=\"modal-actions\">\n          <button type=\"button\" class=\"modal-btn cancel\" @click=\"closeModal\">\n            取消\n          </button>\n          <button type=\"submit\" class=\"modal-btn confirm\" :disabled=\"!formData.name.trim()\">\n            {{ isEditing ? '保存' : '创建' }}\n          </button>\n        </div>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'CollectionModal',\n  props: {\n    visible: {\n      type: Boolean,\n      default: false\n    },\n    collection: {\n      type: Object,\n      default: null\n    }\n  },\n  emits: ['close', 'submit'],\n  data() {\n    return {\n      formData: {\n        name: ''\n      }\n    }\n  },\n  computed: {\n    isEditing() {\n      return this.collection !== null;\n    }\n  },\n  watch: {\n    visible(newVal) {\n      if (newVal) {\n        this.resetForm();\n        this.$nextTick(() => {\n          this.$refs.nameInput?.focus();\n        });\n        // 绑定ESC键事件\n        document.addEventListener('keydown', this.handleKeyDown);\n      } else {\n        // 移除ESC键事件监听\n        document.removeEventListener('keydown', this.handleKeyDown);\n      }\n    },\n    collection: {\n      handler(newVal) {\n        if (newVal) {\n          this.formData.name = newVal.name || '';\n        } else {\n          this.resetForm();\n        }\n      },\n      immediate: true\n    }\n  },\n  methods: {\n    resetForm() {\n      if (this.collection) {\n        this.formData.name = this.collection.name || '';\n      } else {\n        this.formData.name = '';\n      }\n    },\n    handleSubmit() {\n      if (!this.formData.name.trim()) {\n        return;\n      }\n      \n      const submitData = {\n        name: this.formData.name.trim()\n      };\n      \n      if (this.isEditing) {\n        submitData._id = this.collection._id;\n      }\n      \n      this.$emit('submit', submitData);\n    },\n    closeModal() {\n      this.$emit('close');\n    },\n    handleKeyDown(event) {\n      if (event.key === 'Escape') {\n        this.closeModal();\n      }\n    }\n  },\n  beforeUnmount() {\n    // 确保移除事件监听\n    document.removeEventListener('keydown', this.handleKeyDown);\n  }\n}\n</script>\n\n<style scoped>\n.modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.5);\n  backdrop-filter: blur(10px);\n  z-index: 1000;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  animation: fadeIn 0.3s ease-out;\n}\n\n.modal-content {\n  background: white;\n  border-radius: 20px;\n  padding: 32px;\n  width: 90%;\n  max-width: 380px;\n  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);\n  animation: slideUp 0.3s ease-out;\n  max-height: 80vh;\n  overflow-y: auto;\n}\n\n.modal-header {\n  font-size: 20px;\n  font-weight: 600;\n  color: #1d1d1f;\n  margin-bottom: 24px;\n  text-align: center;\n}\n\n.form-group {\n  margin-bottom: 20px;\n}\n\n.form-group label {\n  display: block;\n  font-size: 14px;\n  font-weight: 500;\n  color: #1d1d1f;\n  margin-bottom: 8px;\n}\n\n.modal-input {\n  width: 100%;\n  padding: 16px;\n  border: 1px solid #e5e7eb;\n  border-radius: 12px;\n  font-size: 16px;\n  font-family: 'Inter', sans-serif;\n  transition: border-color 0.2s;\n  box-sizing: border-box;\n}\n\n.modal-textarea {\n  width: 100%;\n  padding: 16px;\n  border: 1px solid #e5e7eb;\n  border-radius: 12px;\n  font-size: 16px;\n  font-family: 'Inter', sans-serif;\n  transition: border-color 0.2s;\n  box-sizing: border-box;\n  resize: vertical;\n  min-height: 80px;\n}\n\n.modal-input:focus,\n.modal-textarea:focus {\n  outline: none;\n  border-color: #007aff;\n}\n\n.modal-actions {\n  display: flex;\n  gap: 12px;\n  margin-top: 24px;\n}\n\n.modal-btn {\n  flex: 1;\n  padding: 12px 24px;\n  border: none;\n  border-radius: 12px;\n  font-size: 16px;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.modal-btn:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n.modal-btn.cancel {\n  background: #f3f4f6;\n  color: #6b7280;\n}\n\n.modal-btn.cancel:hover:not(:disabled) {\n  background: #e5e7eb;\n}\n\n.modal-btn.confirm {\n  background: linear-gradient(135deg, #4a90e2, #007aff);\n  color: white;\n}\n\n.modal-btn.confirm:hover:not(:disabled) {\n  transform: translateY(-1px);\n  box-shadow: 0 4px 12px rgba(74, 144, 226, 0.3);\n}\n\n@keyframes fadeIn {\n  from { opacity: 0; }\n  to { opacity: 1; }\n}\n\n@keyframes slideUp {\n  from { \n    opacity: 0;\n    transform: translateY(20px);\n  }\n  to { \n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n</style>"],"mappings":";;EAGWA,KAAK,EAAC;AAAc;;EAGlBA,KAAK,EAAC;AAAY;;EAclBA,KAAK,EAAC;AAAe;;;SAnBrBC,MAAA,CAAAC,OAAO,I,cAAlBC,mBAAA,CA6BM;;IA7BcH,KAAK,EAAC,OAAO;IAAEI,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAC,UAAA,IAAAD,QAAA,CAAAC,UAAA,IAAAF,IAAA,CAAU;MAClDG,mBAAA,CA2BM;IA3BDT,KAAK,EAAC,eAAe;IAAEI,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAK,cAAA,CAAN,QAAW;MACpCD,mBAAA,CAAoE,OAApEE,UAAoE,EAAAC,gBAAA,CAAvCL,QAAA,CAAAM,SAAS,uCAEtCJ,mBAAA,CAuBO;IAvBAK,QAAM,EAAAT,MAAA,QAAAA,MAAA,MAAAK,cAAA,KAAAJ,IAAA,KAAUC,QAAA,CAAAQ,YAAA,IAAAR,QAAA,CAAAQ,YAAA,IAAAT,IAAA,CAAY;MACjCG,mBAAA,CAYM,OAZNO,UAYM,G,0BAXJP,mBAAA,CAAyC;IAAlCQ,GAAG,EAAC;EAAgB,GAAC,OAAK,qB,gBACjCR,mBAAA,CASE;IARAS,EAAE,EAAC,gBAAgB;IACnBC,IAAI,EAAC,MAAM;IACXnB,KAAK,EAAC,aAAa;+DACVoB,KAAA,CAAAC,QAAQ,CAACC,IAAI,GAAAC,MAAA;IACtBC,WAAW,EAAC,UAAU;IACtBC,SAAS,EAAC,IAAI;IACdC,QAAQ,EAAR,EAAQ;IACRC,GAAG,EAAC;iDAJKP,KAAA,CAAAC,QAAQ,CAACC,IAAI,E,KAQ1Bb,mBAAA,CAOM,OAPNmB,UAOM,GANJnB,mBAAA,CAES;IAFDU,IAAI,EAAC,QAAQ;IAACnB,KAAK,EAAC,kBAAkB;IAAEI,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAC,UAAA,IAAAD,QAAA,CAAAC,UAAA,IAAAF,IAAA,CAAU;KAAE,MAEnE,GACAG,mBAAA,CAES;IAFDU,IAAI,EAAC,QAAQ;IAACnB,KAAK,EAAC,mBAAmB;IAAE6B,QAAQ,GAAGT,KAAA,CAAAC,QAAQ,CAACC,IAAI,CAACQ,IAAI;sBACzEvB,QAAA,CAAAM,SAAS,sCAAAkB,UAAA,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}