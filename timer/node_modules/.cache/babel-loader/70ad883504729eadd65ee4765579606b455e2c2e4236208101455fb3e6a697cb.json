{"ast":null,"code":"import \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nimport imageAnalysisService from '../../AIsiri/services/imageAnalysisService.js';\nimport { log } from '../../AIsiri/utils/logger.js';\nexport default {\n  name: 'ImageAnalysisModal',\n  props: {\n    visible: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data() {\n    return {\n      activeTab: 'upload',\n      selectedFile: null,\n      previewUrl: '',\n      imageUrl: '',\n      customPrompt: '',\n      isDragOver: false,\n      isUploading: false,\n      analysisResult: null,\n      errorMessage: ''\n    };\n  },\n  methods: {\n    /**\r\n     * å…³é—­æ¨¡æ€æ¡†\r\n     */\n    closeModal() {\n      this.$emit('close');\n      this.resetForm();\n    },\n    /**\r\n     * é‡ç½®è¡¨å•\r\n     */\n    resetForm() {\n      this.selectedFile = null;\n      this.previewUrl = '';\n      this.imageUrl = '';\n      this.customPrompt = '';\n      this.isDragOver = false;\n      this.isUploading = false;\n      this.analysisResult = null;\n      this.errorMessage = '';\n      this.activeTab = 'upload';\n    },\n    /**\r\n     * è§¦å‘æ–‡ä»¶é€‰æ‹©\r\n     */\n    triggerFileSelect() {\n      if (!this.selectedFile && !this.isUploading) {\n        this.$refs.fileInput.click();\n      }\n    },\n    /**\r\n     * å¤„ç†æ–‡ä»¶é€‰æ‹©\r\n     */\n    handleFileSelect(event) {\n      const file = event.target.files[0];\n      if (file) {\n        this.selectFile(file);\n      }\n    },\n    /**\r\n     * å¤„ç†æ‹–æ‹½æ”¾ç½®\r\n     */\n    handleDrop(event) {\n      event.preventDefault();\n      this.isDragOver = false;\n      const files = event.dataTransfer.files;\n      if (files.length > 0) {\n        this.selectFile(files[0]);\n      }\n    },\n    /**\r\n     * é€‰æ‹©æ–‡ä»¶\r\n     */\n    selectFile(file) {\n      // éªŒè¯æ–‡ä»¶\n      const validation = imageAnalysisService.validateImageFile(file);\n      if (!validation.isValid) {\n        this.showError(validation.errors.join(', '));\n        return;\n      }\n      this.selectedFile = file;\n      this.previewUrl = URL.createObjectURL(file);\n      this.errorMessage = '';\n      this.analysisResult = null;\n    },\n    /**\r\n     * ç§»é™¤å›¾ç‰‡\r\n     */\n    removeImage() {\n      if (this.previewUrl) {\n        URL.revokeObjectURL(this.previewUrl);\n      }\n      this.selectedFile = null;\n      this.previewUrl = '';\n      this.analysisResult = null;\n    },\n    /**\r\n     * åˆ†æä¸Šä¼ çš„å›¾ç‰‡\r\n     */\n    async analyzeImage() {\n      if (!this.selectedFile) return;\n      try {\n        this.isUploading = true;\n        this.errorMessage = '';\n        this.analysisResult = null;\n        log.info('å¼€å§‹åˆ†æä¸Šä¼ çš„å›¾ç‰‡', {\n          fileName: this.selectedFile.name,\n          customPrompt: this.customPrompt\n        });\n        const result = await imageAnalysisService.uploadAndAnalyze(this.selectedFile, this.customPrompt);\n        this.analysisResult = result;\n        this.showSuccess('å›¾ç‰‡åˆ†æå®Œæˆï¼');\n\n        // å‘é€åˆ†æç»“æœåˆ°çˆ¶ç»„ä»¶\n        this.$emit('analysisComplete', result);\n      } catch (error) {\n        log.error('å›¾ç‰‡åˆ†æå¤±è´¥', error);\n        this.showError(error.message || 'å›¾ç‰‡åˆ†æå¤±è´¥');\n      } finally {\n        this.isUploading = false;\n      }\n    },\n    /**\r\n     * åˆ†æç½‘ç»œå›¾ç‰‡\r\n     */\n    async analyzeImageUrl() {\n      if (!this.imageUrl.trim()) return;\n      try {\n        this.isUploading = true;\n        this.errorMessage = '';\n        this.analysisResult = null;\n        log.info('å¼€å§‹åˆ†æç½‘ç»œå›¾ç‰‡', {\n          imageUrl: this.imageUrl,\n          customPrompt: this.customPrompt\n        });\n        const result = await imageAnalysisService.analyzeImageUrl(this.imageUrl, this.customPrompt);\n        this.analysisResult = result;\n        this.showSuccess('å›¾ç‰‡åˆ†æå®Œæˆï¼');\n\n        // å‘é€åˆ†æç»“æœåˆ°çˆ¶ç»„ä»¶\n        this.$emit('analysisComplete', result);\n      } catch (error) {\n        log.error('ç½‘ç»œå›¾ç‰‡åˆ†æå¤±è´¥', error);\n        this.showError(error.message || 'å›¾ç‰‡åˆ†æå¤±è´¥');\n      } finally {\n        this.isUploading = false;\n      }\n    },\n    /**\r\n     * æ ¼å¼åŒ–æ–‡ä»¶å¤§å°\r\n     */\n    formatFileSize(bytes) {\n      return imageAnalysisService.formatFileSize(bytes);\n    },\n    /**\r\n     * æ˜¾ç¤ºæˆåŠŸæç¤º\r\n     */\n    showSuccess(message) {\n      this.$emit('showToast', message, 'success');\n    },\n    /**\r\n     * æ˜¾ç¤ºé”™è¯¯æç¤º\r\n     */\n    showError(message) {\n      this.errorMessage = message;\n    }\n  },\n  beforeUnmount() {\n    // æ¸…ç†é¢„è§ˆURL\n    if (this.previewUrl) {\n      URL.revokeObjectURL(this.previewUrl);\n    }\n  }\n};","map":{"version":3,"names":["imageAnalysisService","log","name","props","visible","type","Boolean","default","data","activeTab","selectedFile","previewUrl","imageUrl","customPrompt","isDragOver","isUploading","analysisResult","errorMessage","methods","closeModal","$emit","resetForm","triggerFileSelect","$refs","fileInput","click","handleFileSelect","event","file","target","files","selectFile","handleDrop","preventDefault","dataTransfer","length","validation","validateImageFile","isValid","showError","errors","join","URL","createObjectURL","removeImage","revokeObjectURL","analyzeImage","info","fileName","result","uploadAndAnalyze","showSuccess","error","message","analyzeImageUrl","trim","formatFileSize","bytes","beforeUnmount"],"sources":["C:\\Users\\wuby\\OneDrive\\Desktop\\backend(1) 3\\timer\\src\\components\\AIsecretary\\ImageAnalysisModal.vue"],"sourcesContent":["<template>\r\n  <div v-if=\"visible\" class=\"image-analysis-modal\" @click.self=\"closeModal\">\r\n    <div class=\"modal-content\">\r\n      <!-- æ¨¡æ€æ¡†å¤´éƒ¨ -->\r\n      <div class=\"modal-header\">\r\n        <h3>ğŸ–¼ï¸ å›¾ç‰‡åˆ†æ</h3>\r\n        <button class=\"close-btn\" @click=\"closeModal\">\r\n          <font-awesome-icon icon=\"times\" />\r\n        </button>\r\n      </div>\r\n\r\n      <!-- æ¨¡æ€æ¡†å†…å®¹ -->\r\n      <div class=\"modal-body\">\r\n        <!-- æ ‡ç­¾é¡µåˆ‡æ¢ -->\r\n        <div class=\"tab-container\">\r\n          <button \r\n            class=\"tab-btn\" \r\n            :class=\"{ active: activeTab === 'upload' }\"\r\n            @click=\"activeTab = 'upload'\"\r\n          >\r\n            ğŸ“ ä¸Šä¼ å›¾ç‰‡\r\n          </button>\r\n          <button \r\n            class=\"tab-btn\" \r\n            :class=\"{ active: activeTab === 'url' }\"\r\n            @click=\"activeTab = 'url'\"\r\n          >\r\n            ğŸ”— ç½‘ç»œå›¾ç‰‡\r\n          </button>\r\n        </div>\r\n\r\n        <!-- ä¸Šä¼ å›¾ç‰‡æ ‡ç­¾é¡µ -->\r\n        <div v-if=\"activeTab === 'upload'\" class=\"tab-content\">\r\n          <!-- æ‹–æ‹½ä¸Šä¼ åŒºåŸŸ -->\r\n          <div \r\n            class=\"upload-area\"\r\n            :class=\"{ \r\n              'dragover': isDragOver, \r\n              'has-image': selectedFile,\r\n              'uploading': isUploading \r\n            }\"\r\n            @drop=\"handleDrop\"\r\n            @dragover.prevent=\"isDragOver = true\"\r\n            @dragleave.prevent=\"isDragOver = false\"\r\n            @click=\"triggerFileSelect\"\r\n          >\r\n            <div v-if=\"!selectedFile\" class=\"upload-placeholder\">\r\n              <font-awesome-icon icon=\"cloud-upload-alt\" class=\"upload-icon\" />\r\n              <p class=\"upload-text\">æ‹–æ‹½å›¾ç‰‡åˆ°æ­¤å¤„æˆ–ç‚¹å‡»é€‰æ‹©</p>\r\n              <p class=\"upload-hint\">æ”¯æŒ JPEGã€PNGã€GIFã€WebPã€BMP æ ¼å¼ï¼Œæœ€å¤§ 10MB</p>\r\n            </div>\r\n            \r\n            <div v-else class=\"image-preview\">\r\n              <img :src=\"previewUrl\" :alt=\"selectedFile.name\" class=\"preview-image\" />\r\n              <div class=\"image-info\">\r\n                <p class=\"image-name\">{{ selectedFile.name }}</p>\r\n                <p class=\"image-size\">{{ formatFileSize(selectedFile.size) }}</p>\r\n              </div>\r\n              <button class=\"remove-image\" @click.stop=\"removeImage\">\r\n                <font-awesome-icon icon=\"times\" />\r\n              </button>\r\n            </div>\r\n\r\n            <div v-if=\"isUploading\" class=\"upload-progress\">\r\n              <font-awesome-icon icon=\"spinner\" spin />\r\n              <span>æ­£åœ¨åˆ†æå›¾ç‰‡...</span>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- éšè—çš„æ–‡ä»¶è¾“å…¥ -->\r\n          <input \r\n            ref=\"fileInput\"\r\n            type=\"file\" \r\n            accept=\"image/*\"\r\n            style=\"display: none\"\r\n            @change=\"handleFileSelect\"\r\n          >\r\n        </div>\r\n\r\n        <!-- ç½‘ç»œå›¾ç‰‡æ ‡ç­¾é¡µ -->\r\n        <div v-if=\"activeTab === 'url'\" class=\"tab-content\">\r\n          <div class=\"url-input-container\">\r\n            <input \r\n              v-model=\"imageUrl\"\r\n              type=\"url\" \r\n              placeholder=\"è¯·è¾“å…¥å›¾ç‰‡URLåœ°å€...\"\r\n              class=\"url-input\"\r\n              :disabled=\"isUploading\"\r\n            />\r\n            <button \r\n              class=\"analyze-url-btn\"\r\n              @click=\"analyzeImageUrl\"\r\n              :disabled=\"!imageUrl.trim() || isUploading\"\r\n            >\r\n              <font-awesome-icon icon=\"search\" />\r\n              åˆ†æ\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- è‡ªå®šä¹‰æç¤ºè¯ -->\r\n        <div class=\"prompt-section\">\r\n          <label class=\"prompt-label\">\r\n            <font-awesome-icon icon=\"comment\" />\r\n            è‡ªå®šä¹‰åˆ†ææç¤ºè¯ï¼ˆå¯é€‰ï¼‰\r\n          </label>\r\n          <textarea \r\n            v-model=\"customPrompt\"\r\n            placeholder=\"ä¾‹å¦‚ï¼šè¯·è¯¦ç»†æè¿°è¿™å¼ å›¾ç‰‡çš„å†…å®¹ï¼ŒåŒ…æ‹¬åœºæ™¯ã€å¯¹è±¡ã€é¢œè‰²ç­‰...\"\r\n            class=\"prompt-input\"\r\n            rows=\"3\"\r\n            :disabled=\"isUploading\"\r\n          ></textarea>\r\n        </div>\r\n\r\n        <!-- åˆ†æç»“æœ -->\r\n        <div v-if=\"analysisResult\" class=\"analysis-result\">\r\n          <h4>ğŸ“Š åˆ†æç»“æœ</h4>\r\n          <div class=\"result-content\">\r\n            <p class=\"result-text\">{{ analysisResult.analysis.content }}</p>\r\n            <div class=\"result-meta\">\r\n              <span class=\"token-info\">\r\n                <font-awesome-icon icon=\"info-circle\" />\r\n                æ¶ˆè€— Token: {{ analysisResult.analysis.usage.total_tokens }}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- é”™è¯¯æç¤º -->\r\n        <div v-if=\"errorMessage\" class=\"error-message\">\r\n          <font-awesome-icon icon=\"exclamation-triangle\" />\r\n          {{ errorMessage }}\r\n        </div>\r\n      </div>\r\n\r\n      <!-- æ¨¡æ€æ¡†åº•éƒ¨ -->\r\n      <div class=\"modal-footer\">\r\n        <button class=\"btn btn-secondary\" @click=\"closeModal\">\r\n          å–æ¶ˆ\r\n        </button>\r\n        <button \r\n          v-if=\"activeTab === 'upload' && selectedFile\"\r\n          class=\"btn btn-primary\"\r\n          @click=\"analyzeImage\"\r\n          :disabled=\"isUploading\"\r\n        >\r\n          <font-awesome-icon v-if=\"isUploading\" icon=\"spinner\" spin />\r\n          <span v-else>å¼€å§‹åˆ†æ</span>\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport imageAnalysisService from '../../AIsiri/services/imageAnalysisService.js'\r\nimport { log } from '../../AIsiri/utils/logger.js'\r\n\r\nexport default {\r\n  name: 'ImageAnalysisModal',\r\n  props: {\r\n    visible: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      activeTab: 'upload',\r\n      selectedFile: null,\r\n      previewUrl: '',\r\n      imageUrl: '',\r\n      customPrompt: '',\r\n      isDragOver: false,\r\n      isUploading: false,\r\n      analysisResult: null,\r\n      errorMessage: ''\r\n    }\r\n  },\r\n  methods: {\r\n    /**\r\n     * å…³é—­æ¨¡æ€æ¡†\r\n     */\r\n    closeModal() {\r\n      this.$emit('close')\r\n      this.resetForm()\r\n    },\r\n\r\n    /**\r\n     * é‡ç½®è¡¨å•\r\n     */\r\n    resetForm() {\r\n      this.selectedFile = null\r\n      this.previewUrl = ''\r\n      this.imageUrl = ''\r\n      this.customPrompt = ''\r\n      this.isDragOver = false\r\n      this.isUploading = false\r\n      this.analysisResult = null\r\n      this.errorMessage = ''\r\n      this.activeTab = 'upload'\r\n    },\r\n\r\n    /**\r\n     * è§¦å‘æ–‡ä»¶é€‰æ‹©\r\n     */\r\n    triggerFileSelect() {\r\n      if (!this.selectedFile && !this.isUploading) {\r\n        this.$refs.fileInput.click()\r\n      }\r\n    },\r\n\r\n    /**\r\n     * å¤„ç†æ–‡ä»¶é€‰æ‹©\r\n     */\r\n    handleFileSelect(event) {\r\n      const file = event.target.files[0]\r\n      if (file) {\r\n        this.selectFile(file)\r\n      }\r\n    },\r\n\r\n    /**\r\n     * å¤„ç†æ‹–æ‹½æ”¾ç½®\r\n     */\r\n    handleDrop(event) {\r\n      event.preventDefault()\r\n      this.isDragOver = false\r\n      \r\n      const files = event.dataTransfer.files\r\n      if (files.length > 0) {\r\n        this.selectFile(files[0])\r\n      }\r\n    },\r\n\r\n    /**\r\n     * é€‰æ‹©æ–‡ä»¶\r\n     */\r\n    selectFile(file) {\r\n      // éªŒè¯æ–‡ä»¶\r\n      const validation = imageAnalysisService.validateImageFile(file)\r\n      if (!validation.isValid) {\r\n        this.showError(validation.errors.join(', '))\r\n        return\r\n      }\r\n\r\n      this.selectedFile = file\r\n      this.previewUrl = URL.createObjectURL(file)\r\n      this.errorMessage = ''\r\n      this.analysisResult = null\r\n    },\r\n\r\n    /**\r\n     * ç§»é™¤å›¾ç‰‡\r\n     */\r\n    removeImage() {\r\n      if (this.previewUrl) {\r\n        URL.revokeObjectURL(this.previewUrl)\r\n      }\r\n      this.selectedFile = null\r\n      this.previewUrl = ''\r\n      this.analysisResult = null\r\n    },\r\n\r\n    /**\r\n     * åˆ†æä¸Šä¼ çš„å›¾ç‰‡\r\n     */\r\n    async analyzeImage() {\r\n      if (!this.selectedFile) return\r\n\r\n      try {\r\n        this.isUploading = true\r\n        this.errorMessage = ''\r\n        this.analysisResult = null\r\n\r\n        log.info('å¼€å§‹åˆ†æä¸Šä¼ çš„å›¾ç‰‡', { \r\n          fileName: this.selectedFile.name,\r\n          customPrompt: this.customPrompt \r\n        })\r\n\r\n        const result = await imageAnalysisService.uploadAndAnalyze(\r\n          this.selectedFile, \r\n          this.customPrompt\r\n        )\r\n\r\n        this.analysisResult = result\r\n        this.showSuccess('å›¾ç‰‡åˆ†æå®Œæˆï¼')\r\n        \r\n        // å‘é€åˆ†æç»“æœåˆ°çˆ¶ç»„ä»¶\r\n        this.$emit('analysisComplete', result)\r\n      } catch (error) {\r\n        log.error('å›¾ç‰‡åˆ†æå¤±è´¥', error)\r\n        this.showError(error.message || 'å›¾ç‰‡åˆ†æå¤±è´¥')\r\n      } finally {\r\n        this.isUploading = false\r\n      }\r\n    },\r\n\r\n    /**\r\n     * åˆ†æç½‘ç»œå›¾ç‰‡\r\n     */\r\n    async analyzeImageUrl() {\r\n      if (!this.imageUrl.trim()) return\r\n\r\n      try {\r\n        this.isUploading = true\r\n        this.errorMessage = ''\r\n        this.analysisResult = null\r\n\r\n        log.info('å¼€å§‹åˆ†æç½‘ç»œå›¾ç‰‡', { \r\n          imageUrl: this.imageUrl,\r\n          customPrompt: this.customPrompt \r\n        })\r\n\r\n        const result = await imageAnalysisService.analyzeImageUrl(\r\n          this.imageUrl, \r\n          this.customPrompt\r\n        )\r\n\r\n        this.analysisResult = result\r\n        this.showSuccess('å›¾ç‰‡åˆ†æå®Œæˆï¼')\r\n        \r\n        // å‘é€åˆ†æç»“æœåˆ°çˆ¶ç»„ä»¶\r\n        this.$emit('analysisComplete', result)\r\n      } catch (error) {\r\n        log.error('ç½‘ç»œå›¾ç‰‡åˆ†æå¤±è´¥', error)\r\n        this.showError(error.message || 'å›¾ç‰‡åˆ†æå¤±è´¥')\r\n      } finally {\r\n        this.isUploading = false\r\n      }\r\n    },\r\n\r\n    /**\r\n     * æ ¼å¼åŒ–æ–‡ä»¶å¤§å°\r\n     */\r\n    formatFileSize(bytes) {\r\n      return imageAnalysisService.formatFileSize(bytes)\r\n    },\r\n\r\n    /**\r\n     * æ˜¾ç¤ºæˆåŠŸæç¤º\r\n     */\r\n    showSuccess(message) {\r\n      this.$emit('showToast', message, 'success')\r\n    },\r\n\r\n    /**\r\n     * æ˜¾ç¤ºé”™è¯¯æç¤º\r\n     */\r\n    showError(message) {\r\n      this.errorMessage = message\r\n    }\r\n  },\r\n\r\n  beforeUnmount() {\r\n    // æ¸…ç†é¢„è§ˆURL\r\n    if (this.previewUrl) {\r\n      URL.revokeObjectURL(this.previewUrl)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.image-analysis-modal {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: rgba(0, 0, 0, 0.5);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 9999;\r\n  padding: 20px;\r\n  box-sizing: border-box;\r\n  /* ç¡®ä¿å¼¹çª—åœ¨æœ€é¡¶å±‚ */\r\n  isolation: isolate;\r\n}\r\n\r\n.modal-content {\r\n  background: white;\r\n  border-radius: 16px;\r\n  width: 100%;\r\n  max-width: 500px;\r\n  max-height: 90vh;\r\n  overflow: hidden;\r\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\r\n  position: relative;\r\n}\r\n\r\n.modal-header {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 20px 24px;\r\n  border-bottom: 1px solid #e5e5ea;\r\n}\r\n\r\n.modal-header h3 {\r\n  margin: 0;\r\n  font-size: 18px;\r\n  font-weight: 600;\r\n  color: #1d1d1f;\r\n}\r\n\r\n.close-btn {\r\n  background: none;\r\n  border: none;\r\n  font-size: 18px;\r\n  color: #8e8e93;\r\n  cursor: pointer;\r\n  padding: 8px;\r\n  border-radius: 8px;\r\n  transition: all 0.2s;\r\n}\r\n\r\n.close-btn:hover {\r\n  background: #f2f2f7;\r\n  color: #1d1d1f;\r\n}\r\n\r\n.modal-body {\r\n  padding: 24px;\r\n  max-height: 60vh;\r\n  overflow-y: auto;\r\n}\r\n\r\n/* æ ‡ç­¾é¡µæ ·å¼ */\r\n.tab-container {\r\n  display: flex;\r\n  gap: 8px;\r\n  margin-bottom: 20px;\r\n  border-bottom: 1px solid #e5e5ea;\r\n}\r\n\r\n.tab-btn {\r\n  background: none;\r\n  border: none;\r\n  padding: 12px 16px;\r\n  font-size: 14px;\r\n  color: #8e8e93;\r\n  cursor: pointer;\r\n  border-bottom: 2px solid transparent;\r\n  transition: all 0.2s;\r\n}\r\n\r\n.tab-btn.active {\r\n  color: #007aff;\r\n  border-bottom-color: #007aff;\r\n}\r\n\r\n.tab-btn:hover:not(.active) {\r\n  color: #1d1d1f;\r\n  background: #f2f2f7;\r\n  border-radius: 8px 8px 0 0;\r\n}\r\n\r\n.tab-content {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n/* ä¸Šä¼ åŒºåŸŸæ ·å¼ */\r\n.upload-area {\r\n  border: 2px dashed #d1d1d6;\r\n  border-radius: 12px;\r\n  padding: 40px 20px;\r\n  text-align: center;\r\n  cursor: pointer;\r\n  transition: all 0.2s;\r\n  background: #fafafa;\r\n}\r\n\r\n.upload-area:hover:not(.uploading) {\r\n  border-color: #007aff;\r\n  background: #f0f8ff;\r\n}\r\n\r\n.upload-area.dragover {\r\n  border-color: #007aff;\r\n  background: #e6f3ff;\r\n  transform: scale(1.02);\r\n}\r\n\r\n.upload-area.has-image {\r\n  border-style: solid;\r\n  border-color: #34c759;\r\n  background: #f0fff4;\r\n  padding: 20px;\r\n}\r\n\r\n.upload-area.uploading {\r\n  border-color: #007aff;\r\n  background: #f0f8ff;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.upload-placeholder {\r\n  color: #8e8e93;\r\n}\r\n\r\n.upload-icon {\r\n  font-size: 48px;\r\n  color: #d1d1d6;\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.upload-text {\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  margin: 0 0 8px 0;\r\n  color: #1d1d1f;\r\n}\r\n\r\n.upload-hint {\r\n  font-size: 14px;\r\n  margin: 0;\r\n  color: #8e8e93;\r\n}\r\n\r\n/* å›¾ç‰‡é¢„è§ˆæ ·å¼ */\r\n.image-preview {\r\n  position: relative;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 16px;\r\n}\r\n\r\n.preview-image {\r\n  width: 80px;\r\n  height: 80px;\r\n  object-fit: cover;\r\n  border-radius: 8px;\r\n  border: 2px solid #e5e5ea;\r\n}\r\n\r\n.image-info {\r\n  flex: 1;\r\n  text-align: left;\r\n}\r\n\r\n.image-name {\r\n  font-size: 14px;\r\n  font-weight: 600;\r\n  margin: 0 0 4px 0;\r\n  color: #1d1d1f;\r\n  word-break: break-all;\r\n}\r\n\r\n.image-size {\r\n  font-size: 12px;\r\n  margin: 0;\r\n  color: #8e8e93;\r\n}\r\n\r\n.remove-image {\r\n  position: absolute;\r\n  top: -8px;\r\n  right: -8px;\r\n  background: #ff3b30;\r\n  color: white;\r\n  border: none;\r\n  width: 24px;\r\n  height: 24px;\r\n  border-radius: 12px;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 12px;\r\n  transition: all 0.2s;\r\n}\r\n\r\n.remove-image:hover {\r\n  background: #d70015;\r\n  transform: scale(1.1);\r\n}\r\n\r\n/* ä¸Šä¼ è¿›åº¦æ ·å¼ */\r\n.upload-progress {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  color: #007aff;\r\n  font-size: 14px;\r\n  margin-top: 16px;\r\n}\r\n\r\n/* URLè¾“å…¥æ ·å¼ */\r\n.url-input-container {\r\n  display: flex;\r\n  gap: 12px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.url-input {\r\n  flex: 1;\r\n  padding: 12px 16px;\r\n  border: 1px solid #d1d1d6;\r\n  border-radius: 8px;\r\n  font-size: 14px;\r\n  outline: none;\r\n  transition: all 0.2s;\r\n}\r\n\r\n.url-input:focus {\r\n  border-color: #007aff;\r\n  box-shadow: 0 0 0 2px rgba(0, 122, 255, 0.2);\r\n}\r\n\r\n.analyze-url-btn {\r\n  padding: 12px 20px;\r\n  background: #007aff;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 8px;\r\n  font-size: 14px;\r\n  font-weight: 600;\r\n  cursor: pointer;\r\n  transition: all 0.2s;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.analyze-url-btn:hover:not(:disabled) {\r\n  background: #0056d3;\r\n}\r\n\r\n.analyze-url-btn:disabled {\r\n  background: #e5e5ea;\r\n  color: #8e8e93;\r\n  cursor: not-allowed;\r\n}\r\n\r\n/* æç¤ºè¯è¾“å…¥æ ·å¼ */\r\n.prompt-section {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.prompt-label {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  font-size: 14px;\r\n  font-weight: 600;\r\n  color: #1d1d1f;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.prompt-input {\r\n  width: 100%;\r\n  padding: 12px 16px;\r\n  border: 1px solid #d1d1d6;\r\n  border-radius: 8px;\r\n  font-size: 14px;\r\n  outline: none;\r\n  resize: vertical;\r\n  min-height: 80px;\r\n  transition: all 0.2s;\r\n  font-family: inherit;\r\n}\r\n\r\n.prompt-input:focus {\r\n  border-color: #007aff;\r\n  box-shadow: 0 0 0 2px rgba(0, 122, 255, 0.2);\r\n}\r\n\r\n/* åˆ†æç»“æœæ ·å¼ */\r\n.analysis-result {\r\n  background: #f8f9fa;\r\n  border-radius: 12px;\r\n  padding: 20px;\r\n  margin-bottom: 20px;\r\n  border-left: 4px solid #007aff;\r\n}\r\n\r\n.analysis-result h4 {\r\n  margin: 0 0 16px 0;\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  color: #1d1d1f;\r\n}\r\n\r\n.result-text {\r\n  margin: 0 0 16px 0;\r\n  font-size: 14px;\r\n  line-height: 1.6;\r\n  color: #1d1d1f;\r\n}\r\n\r\n.result-meta {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 16px;\r\n}\r\n\r\n.token-info {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 6px;\r\n  font-size: 12px;\r\n  color: #8e8e93;\r\n}\r\n\r\n/* é”™è¯¯æç¤ºæ ·å¼ */\r\n.error-message {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  background: #fff5f5;\r\n  color: #dc2626;\r\n  padding: 12px 16px;\r\n  border-radius: 8px;\r\n  border: 1px solid #fecaca;\r\n  margin-bottom: 20px;\r\n  font-size: 14px;\r\n}\r\n\r\n/* æ¨¡æ€æ¡†åº•éƒ¨æ ·å¼ */\r\n.modal-footer {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: flex-end;\r\n  gap: 12px;\r\n  padding: 20px 24px;\r\n  border-top: 1px solid #e5e5ea;\r\n  background: #fafafa;\r\n}\r\n\r\n.btn {\r\n  padding: 12px 24px;\r\n  border: none;\r\n  border-radius: 8px;\r\n  font-size: 14px;\r\n  font-weight: 600;\r\n  cursor: pointer;\r\n  transition: all 0.2s;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.btn-secondary {\r\n  background: #f2f2f7;\r\n  color: #1d1d1f;\r\n}\r\n\r\n.btn-secondary:hover {\r\n  background: #e5e5ea;\r\n}\r\n\r\n.btn-primary {\r\n  background: #007aff;\r\n  color: white;\r\n}\r\n\r\n.btn-primary:hover:not(:disabled) {\r\n  background: #0056d3;\r\n}\r\n\r\n.btn-primary:disabled {\r\n  background: #e5e5ea;\r\n  color: #8e8e93;\r\n  cursor: not-allowed;\r\n}\r\n\r\n/* å“åº”å¼è®¾è®¡ */\r\n@media (max-width: 600px) {\r\n  .image-analysis-modal {\r\n    padding: 10px;\r\n  }\r\n  \r\n  .modal-content {\r\n    max-height: 95vh;\r\n    width: calc(100% - 20px);\r\n  }\r\n  \r\n  .modal-body {\r\n    padding: 16px;\r\n    max-height: 70vh;\r\n  }\r\n  \r\n  .upload-area {\r\n    padding: 30px 16px;\r\n  }\r\n  \r\n  .upload-area.has-image {\r\n    padding: 16px;\r\n  }\r\n  \r\n  .preview-image {\r\n    width: 60px;\r\n    height: 60px;\r\n  }\r\n  \r\n  .url-input-container {\r\n    flex-direction: column;\r\n  }\r\n  \r\n  .analyze-url-btn {\r\n    width: 100%;\r\n    justify-content: center;\r\n  }\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}