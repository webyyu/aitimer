{"ast":null,"code":"import { ref, computed, reactive } from 'vue';\nimport { FontAwesomeIcon } from '@fortawesome/vue-fontawesome';\nexport default {\n  name: 'LoginForm',\n  components: {\n    FontAwesomeIcon\n  },\n  emits: ['switch-mode', 'submit'],\n  setup(props, {\n    emit\n  }) {\n    // Ë°®ÂçïÊï∞ÊçÆ\n    const formData = reactive({\n      phoneNumber: '',\n      password: ''\n    });\n\n    // Ë°®ÂçïÁä∂ÊÄÅ\n    const isLoading = ref(false);\n    const showPassword = ref(false);\n    const errors = reactive({\n      phoneNumber: '',\n      password: ''\n    });\n    const message = reactive({\n      text: '',\n      type: ''\n    });\n\n    // È™åËØÅÊâãÊú∫Âè∑\n    const validatePhoneNumber = () => {\n      const phoneRegex = /^1[3-9]\\d{9}$/;\n      if (!formData.phoneNumber) {\n        errors.phoneNumber = 'ËØ∑ËæìÂÖ•ÊâãÊú∫Âè∑';\n      } else if (!phoneRegex.test(formData.phoneNumber)) {\n        errors.phoneNumber = 'ËØ∑ËæìÂÖ•Ê≠£Á°ÆÁöÑ11‰ΩçÊâãÊú∫Âè∑';\n      } else {\n        errors.phoneNumber = '';\n      }\n    };\n\n    // È™åËØÅÂØÜÁ†Å\n    const validatePassword = () => {\n      if (!formData.password) {\n        errors.password = 'ËØ∑ËæìÂÖ•ÂØÜÁ†Å';\n      } else if (formData.password.length < 6) {\n        errors.password = 'ÂØÜÁ†ÅÈïøÂ∫¶Ëá≥Â∞ë6‰Ωç';\n      } else {\n        errors.password = '';\n      }\n    };\n\n    // Ë°®ÂçïÊòØÂê¶ÊúâÊïà\n    const isFormValid = computed(() => {\n      return formData.phoneNumber && formData.password && !errors.phoneNumber && !errors.password;\n    });\n\n    // ÊòæÁ§∫Ê∂àÊÅØ\n    const showMessage = (text, type = 'error') => {\n      console.log(`${type === 'error' ? '‚ùå' : '‚úÖ'} ${text}`);\n      message.text = text;\n      message.type = type;\n      setTimeout(() => {\n        message.text = '';\n        message.type = '';\n      }, 3000);\n    };\n\n    // Ë°®ÂçïÊèê‰∫§\n    const handleSubmit = async () => {\n      console.log('üîÑ ÁôªÂΩïË°®ÂçïÊèê‰∫§');\n\n      // È™åËØÅË°®Âçï\n      validatePhoneNumber();\n      validatePassword();\n      if (!isFormValid.value) {\n        showMessage('ËØ∑Ê≠£Á°ÆÂ°´ÂÜôÊâÄÊúâÂ≠óÊÆµ');\n        return;\n      }\n      isLoading.value = true;\n      try {\n        console.log('üì§ Êèê‰∫§ÁôªÂΩïÊï∞ÊçÆ:', {\n          phoneNumber: formData.phoneNumber,\n          password: '***'\n        });\n        const maybePromise = emit('submit', {\n          ...formData\n        });\n        // ÂÖºÂÆπÁà∂Á∫ßÂºÇÊ≠•Â§ÑÁêÜ\n        if (maybePromise && typeof maybePromise.then === 'function') {\n          await maybePromise;\n        }\n        // ÊàêÂäüÊ∂àÊÅØÁî±Áà∂ÁªÑ‰ª∂ toast ÊèêÁ§∫ÔºåËøôÈáå‰ªÖÂú®Á°ÆËÆ§‰∏∫ÊàêÂäüÊó∂ÊòæÁ§∫\n        // showMessage('ÁôªÂΩïÊàêÂäüÔºÅ', 'success')\n      } catch (error) {\n        console.error('‚ùå ÁôªÂΩïÂ§±Ë¥•:', error);\n        const errorMessage = error?.response?.data?.message || error?.message || 'ÁôªÂΩïÂ§±Ë¥•ÔºåËØ∑ÈáçËØï';\n        showMessage(errorMessage);\n      } finally {\n        isLoading.value = false;\n      }\n    };\n    return {\n      formData,\n      errors,\n      message,\n      isLoading,\n      showPassword,\n      isFormValid,\n      validatePhoneNumber,\n      validatePassword,\n      handleSubmit,\n      showMessage\n    };\n  }\n};","map":{"version":3,"names":["ref","computed","reactive","FontAwesomeIcon","name","components","emits","setup","props","emit","formData","phoneNumber","password","isLoading","showPassword","errors","message","text","type","validatePhoneNumber","phoneRegex","test","validatePassword","length","isFormValid","showMessage","console","log","setTimeout","handleSubmit","value","maybePromise","then","error","errorMessage","response","data"],"sources":["/Users/bytedance/Desktop/backend(2)/timer/src/components/login/LoginForm.vue"],"sourcesContent":["<template>\n  <form @submit.prevent=\"handleSubmit\" class=\"auth-form\">\n    <!-- ÊâãÊú∫Âè∑ËæìÂÖ• -->\n    <div class=\"form-group\">\n      <label class=\"form-label\">ÊâãÊú∫Âè∑</label>\n      <div class=\"input-wrapper\">\n        <font-awesome-icon icon=\"phone\" class=\"input-icon\" />\n        <input\n          v-model=\"formData.phoneNumber\"\n          type=\"tel\"\n          class=\"form-input\"\n          :class=\"{ 'error': errors.phoneNumber }\"\n          placeholder=\"ËØ∑ËæìÂÖ•ÊâãÊú∫Âè∑\"\n          maxlength=\"11\"\n          required\n          @input=\"validatePhoneNumber\"\n          @blur=\"validatePhoneNumber\"\n        />\n      </div>\n      <div v-if=\"errors.phoneNumber\" class=\"error-message\">\n        {{ errors.phoneNumber }}\n      </div>\n    </div>\n\n    <!-- ÂØÜÁ†ÅËæìÂÖ• -->\n    <div class=\"form-group\">\n      <label class=\"form-label\">ÂØÜÁ†Å</label>\n      <div class=\"input-wrapper\">\n        <font-awesome-icon icon=\"lock\" class=\"input-icon\" />\n        <input\n          v-model=\"formData.password\"\n          :type=\"showPassword ? 'text' : 'password'\"\n          class=\"form-input\"\n          :class=\"{ 'error': errors.password }\"\n          placeholder=\"ËØ∑ËæìÂÖ•ÂØÜÁ†Å\"\n          minlength=\"6\"\n          required\n          @blur=\"validatePassword\"\n        />\n        <button\n          type=\"button\"\n          class=\"password-toggle\"\n          @click=\"showPassword = !showPassword\"\n        >\n          <font-awesome-icon :icon=\"showPassword ? 'eye-slash' : 'eye'\" />\n        </button>\n      </div>\n      <div v-if=\"errors.password\" class=\"error-message\">\n        {{ errors.password }}\n      </div>\n    </div>\n\n    <!-- Êèê‰∫§ÊåâÈíÆ -->\n    <button\n      type=\"submit\"\n      class=\"auth-btn\"\n      :disabled=\"isLoading || !isFormValid\"\n      :class=\"{ 'loading': isLoading }\"\n    >\n      <font-awesome-icon v-if=\"isLoading\" icon=\"spinner\" spin class=\"btn-icon\" />\n      <font-awesome-icon v-else icon=\"sign-in-alt\" class=\"btn-icon\" />\n      {{ isLoading ? 'ÁôªÂΩï‰∏≠...' : 'ÁôªÂΩï' }}\n    </button>\n\n    <!-- ÈîôËØØ/ÊàêÂäüÊ∂àÊÅØ -->\n    <div v-if=\"message.text\" :class=\"['message', message.type]\">\n      <font-awesome-icon \n        :icon=\"message.type === 'error' ? 'exclamation-circle' : 'check-circle'\" \n        class=\"message-icon\" \n      />\n      {{ message.text }}\n    </div>\n\n    <!-- ÂàáÊç¢Âà∞Ê≥®ÂÜå -->\n    <div class=\"switch-mode\">\n      ËøòÊ≤°ÊúâË¥¶Âè∑Ôºü\n      <button type=\"button\" class=\"switch-link\" @click=\"$emit('switch-mode', 'register')\">\n        Á´ãÂç≥Ê≥®ÂÜå\n      </button>\n    </div>\n  </form>\n</template>\n\n<script>\nimport { ref, computed, reactive } from 'vue'\nimport { FontAwesomeIcon } from '@fortawesome/vue-fontawesome'\n\nexport default {\n  name: 'LoginForm',\n  components: {\n    FontAwesomeIcon\n  },\n  emits: ['switch-mode', 'submit'],\n  setup(props, { emit }) {\n    // Ë°®ÂçïÊï∞ÊçÆ\n    const formData = reactive({\n      phoneNumber: '',\n      password: ''\n    })\n\n    // Ë°®ÂçïÁä∂ÊÄÅ\n    const isLoading = ref(false)\n    const showPassword = ref(false)\n    const errors = reactive({\n      phoneNumber: '',\n      password: ''\n    })\n    const message = reactive({\n      text: '',\n      type: ''\n    })\n\n    // È™åËØÅÊâãÊú∫Âè∑\n    const validatePhoneNumber = () => {\n      const phoneRegex = /^1[3-9]\\d{9}$/\n      if (!formData.phoneNumber) {\n        errors.phoneNumber = 'ËØ∑ËæìÂÖ•ÊâãÊú∫Âè∑'\n      } else if (!phoneRegex.test(formData.phoneNumber)) {\n        errors.phoneNumber = 'ËØ∑ËæìÂÖ•Ê≠£Á°ÆÁöÑ11‰ΩçÊâãÊú∫Âè∑'\n      } else {\n        errors.phoneNumber = ''\n      }\n    }\n\n    // È™åËØÅÂØÜÁ†Å\n    const validatePassword = () => {\n      if (!formData.password) {\n        errors.password = 'ËØ∑ËæìÂÖ•ÂØÜÁ†Å'\n      } else if (formData.password.length < 6) {\n        errors.password = 'ÂØÜÁ†ÅÈïøÂ∫¶Ëá≥Â∞ë6‰Ωç'\n      } else {\n        errors.password = ''\n      }\n    }\n\n    // Ë°®ÂçïÊòØÂê¶ÊúâÊïà\n    const isFormValid = computed(() => {\n      return formData.phoneNumber && \n             formData.password && \n             !errors.phoneNumber && \n             !errors.password\n    })\n\n    // ÊòæÁ§∫Ê∂àÊÅØ\n    const showMessage = (text, type = 'error') => {\n      console.log(`${type === 'error' ? '‚ùå' : '‚úÖ'} ${text}`)\n      message.text = text\n      message.type = type\n      setTimeout(() => {\n        message.text = ''\n        message.type = ''\n      }, 3000)\n    }\n\n    // Ë°®ÂçïÊèê‰∫§\n    const handleSubmit = async () => {\n      console.log('üîÑ ÁôªÂΩïË°®ÂçïÊèê‰∫§')\n      \n      // È™åËØÅË°®Âçï\n      validatePhoneNumber()\n      validatePassword()\n\n      if (!isFormValid.value) {\n        showMessage('ËØ∑Ê≠£Á°ÆÂ°´ÂÜôÊâÄÊúâÂ≠óÊÆµ')\n        return\n      }\n\n      isLoading.value = true\n\n      try {\n        console.log('üì§ Êèê‰∫§ÁôªÂΩïÊï∞ÊçÆ:', { \n          phoneNumber: formData.phoneNumber,\n          password: '***'\n        })\n        \n        const maybePromise = emit('submit', { ...formData })\n        // ÂÖºÂÆπÁà∂Á∫ßÂºÇÊ≠•Â§ÑÁêÜ\n        if (maybePromise && typeof maybePromise.then === 'function') {\n          await maybePromise\n        }\n        // ÊàêÂäüÊ∂àÊÅØÁî±Áà∂ÁªÑ‰ª∂ toast ÊèêÁ§∫ÔºåËøôÈáå‰ªÖÂú®Á°ÆËÆ§‰∏∫ÊàêÂäüÊó∂ÊòæÁ§∫\n        // showMessage('ÁôªÂΩïÊàêÂäüÔºÅ', 'success')\n        \n      } catch (error) {\n        console.error('‚ùå ÁôªÂΩïÂ§±Ë¥•:', error)\n        const errorMessage = error?.response?.data?.message || error?.message || 'ÁôªÂΩïÂ§±Ë¥•ÔºåËØ∑ÈáçËØï'\n        showMessage(errorMessage)\n      } finally {\n        isLoading.value = false\n      }\n    }\n\n    return {\n      formData,\n      errors,\n      message,\n      isLoading,\n      showPassword,\n      isFormValid,\n      validatePhoneNumber,\n      validatePassword,\n      handleSubmit,\n      showMessage\n    }\n  }\n}\n</script>\n\n<style scoped>\n.auth-form {\n  width: 100%;\n}\n\n.form-group {\n  margin-bottom: 24px;\n  text-align: left;\n}\n\n.form-label {\n  display: block;\n  font-size: 14px;\n  font-weight: 500;\n  color: #333;\n  margin-bottom: 8px;\n}\n\n.input-wrapper {\n  position: relative;\n}\n\n.form-input {\n  width: 100%;\n  padding: 16px 20px 16px 48px;\n  border: 2px solid #e1e5e9;\n  border-radius: 12px;\n  font-size: 16px;\n  transition: all 0.3s ease;\n  background: #fafbfc;\n  box-sizing: border-box;\n}\n\n.form-input:focus {\n  outline: none;\n  border-color: #667eea;\n  background: white;\n  box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1);\n}\n\n.form-input.error {\n  border-color: #e74c3c;\n  background: #fdf2f2;\n}\n\n.input-icon {\n  position: absolute;\n  left: 16px;\n  top: 50%;\n  transform: translateY(-50%);\n  color: #8e9196;\n  font-size: 16px;\n  z-index: 1;\n}\n\n.password-toggle {\n  position: absolute;\n  right: 16px;\n  top: 50%;\n  transform: translateY(-50%);\n  background: none;\n  border: none;\n  color: #8e9196;\n  cursor: pointer;\n  padding: 4px;\n  font-size: 16px;\n  transition: color 0.2s ease;\n}\n\n.password-toggle:hover {\n  color: #667eea;\n}\n\n.auth-btn {\n  width: 100%;\n  padding: 16px;\n  background: linear-gradient(135deg, #667eea, #764ba2);\n  color: white;\n  border: none;\n  border-radius: 12px;\n  font-size: 16px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  margin-top: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n}\n\n.auth-btn:hover:not(:disabled) {\n  transform: translateY(-2px);\n  box-shadow: 0 8px 24px rgba(102, 126, 234, 0.4);\n}\n\n.auth-btn:active {\n  transform: translateY(0);\n}\n\n.auth-btn:disabled {\n  opacity: 0.7;\n  cursor: not-allowed;\n  transform: none;\n}\n\n.auth-btn.loading {\n  background: linear-gradient(135deg, #667eea, #764ba2);\n  opacity: 0.8;\n}\n\n.btn-icon {\n  font-size: 14px;\n}\n\n.message {\n  margin-top: 16px;\n  padding: 12px 16px;\n  border-radius: 8px;\n  font-size: 14px;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  animation: slideIn 0.3s ease;\n}\n\n.message.error {\n  background: #fef2f2;\n  color: #dc2626;\n  border: 1px solid #fecaca;\n}\n\n.message.success {\n  background: #f0fdf4;\n  color: #16a34a;\n  border: 1px solid #bbf7d0;\n}\n\n.message-icon {\n  font-size: 16px;\n}\n\n.error-message {\n  color: #e74c3c;\n  font-size: 13px;\n  margin-top: 6px;\n  display: flex;\n  align-items: center;\n  gap: 4px;\n}\n\n.switch-mode {\n  margin-top: 24px;\n  font-size: 14px;\n  color: #666;\n  text-align: center;\n}\n\n.switch-link {\n  color: #667eea;\n  background: none;\n  border: none;\n  font-weight: 500;\n  cursor: pointer;\n  text-decoration: none;\n  padding: 0;\n  margin-left: 4px;\n}\n\n.switch-link:hover {\n  text-decoration: underline;\n}\n\n@keyframes slideIn {\n  from {\n    opacity: 0;\n    transform: translateY(-10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n/* ÁßªÂä®Á´ØÈÄÇÈÖç */\n@media (max-width: 480px) {\n  .form-input {\n    padding: 14px 18px 14px 44px;\n    font-size: 16px; /* Èò≤Ê≠¢iOSÁº©Êîæ */\n  }\n  \n  .input-icon {\n    left: 14px;\n    font-size: 14px;\n  }\n  \n  .password-toggle {\n    right: 14px;\n    font-size: 14px;\n  }\n  \n  .auth-btn {\n    padding: 14px;\n    font-size: 15px;\n  }\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}