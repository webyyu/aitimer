{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nexport default {\n  name: 'AddTaskModal',\n  props: {\n    visible: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: ['close', 'submit'],\n  data() {\n    return {\n      formData: {\n        title: '',\n        date: '',\n        time: '',\n        quadrant: 2\n      },\n      quadrants: [{\n        id: 1,\n        label: '重要且紧急',\n        color: '#ff3b30'\n      }, {\n        id: 2,\n        label: '重要不紧急',\n        color: '#007aff'\n      }, {\n        id: 3,\n        label: '紧急不重要',\n        color: '#ff9500'\n      }, {\n        id: 4,\n        label: '不重要不紧急',\n        color: '#34c759'\n      }]\n    };\n  },\n  computed: {\n    today() {\n      const now = new Date();\n      const y = now.getFullYear();\n      const m = String(now.getMonth() + 1).padStart(2, '0');\n      const d = String(now.getDate()).padStart(2, '0');\n      return `${y}-${m}-${d}`;\n    },\n    currentTime() {\n      const now = new Date();\n      return now.toTimeString().slice(0, 5); // HH:MM格式\n    }\n  },\n  watch: {\n    visible(newVal) {\n      if (newVal) {\n        // 弹窗打开时，实时更新当前日期\n        this.formData.date = this.today;\n        // 自动填充当前时间\n        this.formData.time = this.currentTime;\n      }\n    }\n  },\n  methods: {\n    handleClose() {\n      this.$emit('close');\n    },\n    handleSubmit() {\n      const timeBlockType = this.getTimeBlockType(this.formData.time);\n      const taskData = {\n        ...this.formData,\n        id: Date.now(),\n        completed: false,\n        createdAt: new Date().toISOString(),\n        userId: 'default-user',\n        // 可以从用户状态获取\n        // 根据时间判断timeBlockType\n        timeBlockType: timeBlockType,\n        isScheduled: !!this.formData.time,\n        // 统一格式：添加timeBlock对象，与AI创建的任务格式保持一致\n        timeBlock: {\n          timeBlockType: timeBlockType,\n          startTime: this.formData.time || null,\n          endTime: this.formData.time ? this.addHour(this.formData.time) : null\n        }\n      };\n      this.$emit('submit', taskData);\n      this.resetForm();\n    },\n    getTimeBlockType(time) {\n      if (!time) return 'unscheduled';\n      const hour = parseInt(time.split(':')[0]);\n      if (hour >= 7 && hour < 12) {\n        return 'morning';\n      } else if (hour >= 12 && hour < 18) {\n        return 'afternoon';\n      } else if (hour >= 18 && hour < 24) {\n        return 'evening';\n      }\n      return 'unscheduled';\n    },\n    // 辅助方法：给时间加一小时\n    addHour(time) {\n      if (!time) return null;\n      const [hour, minute] = time.split(':').map(Number);\n      const newHour = (hour + 1) % 24;\n      return `${newHour.toString().padStart(2, '0')}:${minute.toString().padStart(2, '0')}`;\n    },\n    resetForm() {\n      this.formData = {\n        title: '',\n        date: this.today,\n        time: '',\n        quadrant: 2\n      };\n    }\n  }\n};","map":{"version":3,"names":["name","props","visible","type","Boolean","default","emits","data","formData","title","date","time","quadrant","quadrants","id","label","color","computed","today","now","Date","y","getFullYear","m","String","getMonth","padStart","d","getDate","currentTime","toTimeString","slice","watch","newVal","methods","handleClose","$emit","handleSubmit","timeBlockType","getTimeBlockType","taskData","completed","createdAt","toISOString","userId","isScheduled","timeBlock","startTime","endTime","addHour","resetForm","hour","parseInt","split","minute","map","Number","newHour","toString"],"sources":["C:\\Users\\wuby\\OneDrive\\Desktop\\backend(1) 3\\timer\\src\\components\\task\\AddTaskModal.vue"],"sourcesContent":["<template>\n  <teleport to=\"body\">\n    <transition name=\"modal-fade\">\n    <div v-if=\"visible\" class=\"modal-overlay\" @click=\"handleClose\">\n      <transition name=\"modal-slide\">\n        <div class=\"modal-container\" @click.stop>\n          <div class=\"modal-header\">\n            <h2 class=\"modal-title\">添加新任务</h2>\n            <button class=\"close-button\" @click=\"handleClose\">\n              <font-awesome-icon icon=\"times\" />\n            </button>\n          </div>\n          \n          <form @submit.prevent=\"handleSubmit\" class=\"modal-form\">\n            <!-- 任务名称 -->\n            <div class=\"form-section\">\n              <label class=\"form-label\">任务名称</label>\n              <input \n                v-model=\"formData.title\"\n                type=\"text\"\n                class=\"form-input\"\n                placeholder=\"例如：考研数学复习\"\n                maxlength=\"50\"\n                required\n              >\n            </div>\n\n            <!-- 四象限分类 -->\n            <div class=\"form-section\">\n              <label class=\"form-label\">分类</label>\n              <div class=\"quadrant-selector\">\n                <div\n                  v-for=\"quadrant in quadrants\"\n                  :key=\"quadrant.id\"\n                  class=\"quadrant-option\"\n                  :class=\"{ active: formData.quadrant === quadrant.id }\"\n                  @click=\"formData.quadrant = quadrant.id\"\n                >\n                  <div class=\"quadrant-color\" :style=\"{ backgroundColor: quadrant.color }\"></div>\n                  <span>{{ quadrant.label }}</span>\n                </div>\n              </div>\n            </div>\n\n            <!-- 时间选择 -->\n            <div class=\"form-section\">\n              <label class=\"form-label\">日期和时间 <span class=\"optional-label\">选填</span></label>\n              <div class=\"time-row\">\n                <input \n                  v-model=\"formData.date\"\n                  type=\"date\"\n                  class=\"form-input date-input\"\n                  :min=\"today\"\n                >\n                <input \n                  v-model=\"formData.time\"\n                  type=\"time\"\n                  class=\"form-input time-input\"\n                >\n              </div>\n            </div>\n\n            <!-- 操作按钮 -->\n            <div class=\"form-actions\">\n              <button type=\"button\" class=\"btn-secondary\" @click=\"handleClose\">\n                取消\n              </button>\n              <button type=\"submit\" class=\"btn-primary\" :disabled=\"!formData.title.trim()\">\n                添加任务\n              </button>\n            </div>\n          </form>\n        </div>\n      </transition>\n    </div>\n  </transition>\n</teleport>\n</template>\n\n<script>\nexport default {\n  name: 'AddTaskModal',\n  props: {\n    visible: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: ['close', 'submit'],\n  data() {\n    return {\n      formData: {\n        title: '',\n        date: '',\n        time: '',\n        quadrant: 2\n      },\n\n      quadrants: [\n        { id: 1, label: '重要且紧急', color: '#ff3b30' },\n        { id: 2, label: '重要不紧急', color: '#007aff' },\n        { id: 3, label: '紧急不重要', color: '#ff9500' },\n        { id: 4, label: '不重要不紧急', color: '#34c759' }\n      ]\n    }\n  },\n  computed: {\n    today() {\n      const now = new Date()\n      const y = now.getFullYear()\n      const m = String(now.getMonth() + 1).padStart(2, '0')\n      const d = String(now.getDate()).padStart(2, '0')\n      return `${y}-${m}-${d}`\n    },\n    currentTime() {\n      const now = new Date()\n      return now.toTimeString().slice(0, 5) // HH:MM格式\n    }\n  },\n  watch: {\n    visible(newVal) {\n      if (newVal) {\n        // 弹窗打开时，实时更新当前日期\n        this.formData.date = this.today\n        // 自动填充当前时间\n        this.formData.time = this.currentTime\n      }\n    }\n  },\n  methods: {\n    handleClose() {\n      this.$emit('close')\n    },\n    handleSubmit() {\n      const timeBlockType = this.getTimeBlockType(this.formData.time)\n      const taskData = {\n        ...this.formData,\n        id: Date.now(),\n        completed: false,\n        createdAt: new Date().toISOString(),\n        userId: 'default-user', // 可以从用户状态获取\n        // 根据时间判断timeBlockType\n        timeBlockType: timeBlockType,\n        isScheduled: !!this.formData.time,\n        // 统一格式：添加timeBlock对象，与AI创建的任务格式保持一致\n        timeBlock: {\n          timeBlockType: timeBlockType,\n          startTime: this.formData.time || null,\n          endTime: this.formData.time ? this.addHour(this.formData.time) : null\n        }\n      }\n      this.$emit('submit', taskData)\n      this.resetForm()\n    },\n    getTimeBlockType(time) {\n      if (!time) return 'unscheduled'\n      \n      const hour = parseInt(time.split(':')[0])\n      if (hour >= 7 && hour < 12) {\n        return 'morning'\n      } else if (hour >= 12 && hour < 18) {\n        return 'afternoon'\n      } else if (hour >= 18 && hour < 24) {\n        return 'evening'\n      }\n      return 'unscheduled'\n    },\n    // 辅助方法：给时间加一小时\n    addHour(time) {\n      if (!time) return null\n      const [hour, minute] = time.split(':').map(Number)\n      const newHour = (hour + 1) % 24\n      return `${newHour.toString().padStart(2, '0')}:${minute.toString().padStart(2, '0')}`\n    },\n    resetForm() {\n      this.formData = {\n        title: '',\n        date: this.today,\n        time: '',\n        quadrant: 2\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.3);\n  backdrop-filter: blur(10px);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 2000;\n}\n\n.modal-container {\n  background: rgba(255, 255, 255, 0.95);\n  backdrop-filter: blur(20px);\n  border-radius: 20px;\n  width: 90%;\n  max-width: 380px;\n  max-height: 85vh;\n  overflow: hidden;\n  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);\n}\n\n.modal-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 20px 24px 16px;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.05);\n}\n\n.modal-title {\n  font-size: 20px;\n  font-weight: 600;\n  color: #1d1d1f;\n  margin: 0;\n}\n\n.close-button {\n  width: 32px;\n  height: 32px;\n  border: none;\n  background: rgba(0, 0, 0, 0.05);\n  border-radius: 16px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  color: #8e8e93;\n}\n\n.close-button:hover {\n  background: rgba(0, 0, 0, 0.1);\n  color: #1d1d1f;\n}\n\n.modal-form {\n  padding: 0 24px 24px;\n  overflow-y: auto;\n}\n\n.form-section {\n  margin-bottom: 20px;\n}\n\n.form-label {\n  display: block;\n  font-size: 15px;\n  font-weight: 600;\n  color: #1d1d1f;\n  margin-bottom: 8px;\n}\n\n.form-input {\n  width: 100%;\n  padding: 12px 16px;\n  font-size: 16px;\n  border: 1px solid rgba(0, 0, 0, 0.1);\n  border-radius: 12px;\n  background: rgba(255, 255, 255, 0.8);\n  transition: all 0.2s ease;\n  color: #1d1d1f;\n}\n\n.form-input:focus {\n  outline: none;\n  border-color: #007aff;\n  background: white;\n  box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.1);\n}\n\n.form-input::placeholder {\n  color: #8e8e93;\n}\n\n\n\n/* 选填标签样式 */\n.optional-label {\n  font-size: 12px;\n  color: #8e8e93;\n  font-weight: 400;\n  margin-left: 6px;\n}\n\n/* 时间选择器样式 */\n.time-row {\n  display: flex;\n  gap: 12px;\n  align-items: center;\n}\n\n.date-input,\n.time-input {\n  flex: 1;\n}\n\n.date-input,\n.time-input {\n  -webkit-appearance: none;\n  appearance: none;\n  position: relative;\n  width: 100%;\n}\n\n.date-input::-webkit-calendar-picker-indicator,\n.time-input::-webkit-calendar-picker-indicator {\n  background: none;\n  cursor: pointer;\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n}\n\n/* 四象限选择器 */\n.quadrant-selector {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 8px;\n}\n\n.quadrant-option {\n  padding: 12px;\n  border: 1px solid rgba(0, 0, 0, 0.1);\n  border-radius: 12px;\n  background: rgba(255, 255, 255, 0.8);\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-size: 13px;\n  color: #1d1d1f;\n}\n\n.quadrant-option.active {\n  border-color: currentColor;\n  background: rgba(255, 255, 255, 1);\n  box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.1);\n}\n\n.quadrant-color {\n  width: 12px;\n  height: 12px;\n  border-radius: 6px;\n  flex-shrink: 0;\n}\n\n/* 操作按钮 */\n.form-actions {\n  display: flex;\n  gap: 12px;\n  margin-top: 32px;\n  padding-top: 20px;\n  border-top: 1px solid rgba(0, 0, 0, 0.05);\n}\n\n.btn-primary,\n.btn-secondary {\n  flex: 1;\n  padding: 14px 20px;\n  border: none;\n  border-radius: 12px;\n  font-size: 16px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.btn-primary {\n  background: #007aff;\n  color: white;\n}\n\n.btn-primary:hover:not(:disabled) {\n  background: #0051d5;\n  transform: translateY(-1px);\n}\n\n.btn-primary:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n.btn-secondary {\n  background: rgba(0, 0, 0, 0.05);\n  color: #1d1d1f;\n}\n\n.btn-secondary:hover {\n  background: rgba(0, 0, 0, 0.1);\n}\n\n/* 动画 */\n.modal-fade-enter-active,\n.modal-fade-leave-active {\n  transition: opacity 0.3s ease;\n}\n\n.modal-fade-enter-from,\n.modal-fade-leave-to {\n  opacity: 0;\n}\n\n.modal-slide-enter-active,\n.modal-slide-leave-active {\n  transition: all 0.3s ease;\n}\n\n.modal-slide-enter-from {\n  opacity: 0;\n  transform: scale(0.9) translateY(20px);\n}\n\n.modal-slide-leave-to {\n  opacity: 0;\n  transform: scale(0.9) translateY(20px);\n}\n\n/* 响应式设计 */\n@media (max-width: 430px) {\n  .modal-container {\n    width: 95%;\n    margin: 20px;\n    max-height: 90vh;\n  }\n  \n  .modal-header {\n    padding: 16px 20px 12px;\n  }\n  \n  .modal-form {\n    padding: 0 20px 20px;\n  }\n  \n  .quadrant-selector {\n    grid-template-columns: 1fr;\n  }\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}